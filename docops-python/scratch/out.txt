FlexSave Recommendations

 FlexSave Recommendations are only available when
using FlexSave Manual Mode. 

FlexSave Manual Mode lets you commit to EC2 Reserved Instances in
one-month intervals while sharing in >=80 of the AWS-listed discount
for the equivalent 1-year RI commitment.

FlexSave Recommendations identifies your AWS EC2 instances that aren’t
covered by a billing discount mechanism (RIs, Savings Plans, etc.), and
calculates the ideal number of FlexSave reservations recommended to
optimize your spend. You can then purchase these reservations from DoiT
in just a few clicks.

 Required Permissions: Flexible RI Admin 
  

View FlexSave Recommendations

To view your FlexSave Recommendations, click on the “FlexSave” icon in
your left-hand navigation panel. Then navigate to the “Recommendations”
tab.

Towards the top, you’ll see a summary of the recommendations displayed
in a blue information box summarizing:

-   the total number of recommendations, and
-   anticipated savings expressed in absolute dollars and percentage
    relative to current spend

 All recommendations are for the following
month, and based on your EC2 usage data over the previous seven days. 
  



Right below this summary you’ll find a few important metrics around your
FlexSave Recommendations. These metrics will update dynamically based
upon your selections from the table below.

Understanding FlexSave Recommendation Metrics



Total Instances Eligible: total number of EC2 instances (across all
recommendations) that don’t appear to be covered by a discounted billing
mechanism such as RIs, Savings Plans, etc.

Total Potential Savings: your potential cost savings resulting from
purchasing all eligible instances listed in the recommendations table
below.

Selected FlexSave Recommendations: number of eligible instances you’ve
selected for inclusion in the FlexSave order.

Selected Potential Savings: your potential cost savings resulting from
purchasing FlexSave for the instances you’ve selected.

Implementing Recommendations

By default, your recommendations are sorted by potential savings in
descending order. However, you can sort or filter through your
recommendations by any of the displayed columns.

First, select which recommendations you’d like to implement by clicking
the checkbox next to each recommendation. To choose all recommendations,
click on the checkbox that appears to the left of the “Account” column.

Note that as you select recommendations, the values appearing under the
“Selected FlexSave Recommendations” and “Selected Potential Savings”
widgets will adjust accordingly, as shown below.



Modifying eligible instances for a recommendation

For every recommendation, you may also modify the number of eligible
instances you’d like covered by your FlexSave purchase. The default
number displayed is the number of machines you’re currently running for
that given instance type and region.

If you anticipate that demand will increase/decrease, you can edit the
number under the “Eligible Instances” column.

Again, the numbers displayed in the widgets will adjust accordingly.

Finally, if you change your mind and want to revert back to the original
recommendations, click the “Reset” button in the blue information box.



Create your order

After selecting a set of recommendations to implement, click on the red
“Create Orders” button towards the top-right of your screen.

This will open an Order Confirmation pop-up which lets you know:

-   How much you will pay if you fully utilize the instances purchased
    via FlexSave,
-   How much you would pay if you continued using on-demand instances,
    and
-   Your anticipated savings, expressed in percentages, given your
    selected recommendations

After reviewing, click “Confirm” to place your order. You will still be
able to edit your orders up until the final 24 hours of the current
month.



Modifying Orders

To view, edit, or cancel your Flex RI orders, switch to the Orders tab.

As with purchasing Flex RIs, you can modify your orders up until the
final 24 hours of the current month.

You can easily identify your orders by filtering for orders that have
Status == New, and have your Email associated with it. By default, all
purchases made via the Recommendations tab will have “Based on FlexSave
Recommendation” under Order Notes as well.

Then click on the “Edit Order” icon next to the order you wish to
modify.



Here you can modify any aspect of your order, including number of
instances.

You can also make the order a recurring purchase up to a certain month
and year, or modify the Order Notes to give the Flex RI purchase more
context.


Bulk Upload FlexSave Orders

When you have a lot of FlexSave orders to place for the coming month,
bulk uploading your orders may save you lots of time. From within the
CMP, you can make as many orders as you want by uploading a CSV file.

 This capability is for FlexSave Manual Mode
only. 

Begin by navigating to the FlexSave page, and click on the vertical
ellipsis (⋮) at the top-right of your screen.

Then, select “Upload Orders” and upload the CSV file with your order
information.



The following fields are optional and don’t need to be filled for your
CSV file to be processed:

-   Note
-   Recurring

To ensure your CSV file is structured properly, we recommend downloading
the template below and using it to format your orders.

 file src=“../.gitbook/assets/flexri-bulk-upload-template.csv”
caption=“FlexSave Bulk Upload Template” 
Supported AWS Regions

Availability

As of the September 2021, FlexSave is available in the following twelve
AWS regions on shared Master Payer Accounts (MPAs):

    us-east-1 US East (N. Virginia)
    us-east-2 US East (Ohio)
    us-west-1 US West (N. California)
    us-west-2 US West (Oregon)
    eu-central-1 Europe (Frankfurt)
    eu-west-1 Europe (Ireland)
    ap-northeast-1 Asia Pacific (Tokyo)
    ap-southeast-1 (Singapore)
    ap-southeast-2 (Sydney)
    eu-west-2 (London)
    eu-west-3 (Paris)
    ap-northeast-2 (Seoul)

Roadmap

Starting Oct 2021, the following AWS regions will be supported as well
on shared MPAs:

    ap-south-1  Asia Pacific (Mumbai)
    ap-northeast-2  Asia Pacific (Seoul)
    ca-central-1 Canada (Central)
    sa-east-1 South America (São Paulo)
FlexSave for AWS FAQ

Overview

FlexSave helps you maximize EC2 discounts with zero commitments, loss
risk, or management on your part. It works by analyzing your on-demand
workloads, and then applying the ideal mix of RIs and Savings Plans to
them, optimizing for cost.

In order to use FlexSave, your AWS account/s should be consolidated with
the DoiT International billing organization. DoiT International is a
global AWS Advanced Channel Reseller.

How much can I save every month?

You can realize between 80 and 100 of the discount granted by the
applicable AWS Reserved Instance 1-year Full Upfront.

For example, AWS grants a 19.5 discount on reserved instances for
instances from the m5 instance family in the us-west-1 region. A
FlexSave reservation for this machine/region combination will provide
you with a 15.6 (19.5  0.8) discount but without the risk of
committing to the entire year.

Can I use FlexSave if I am using AWS RIs or Saving Plans?

FlexSave reservations are applied to on-demand usage. Usage covered by
AWS Reserved Instances or Savings Plans is excluded.

Which AWS services are supported with FlexSave?

At this time, FlexSave supports AWS EC2. Other AWS services such as AWS
RDS, VMware or Elasticache aren’t supported at this time. Since FlexSave
relies on AWS Convertible Reservations, you can check supported
instances on AWS website. If there are no Convertible Reservations
available for your instance type, it’s not supported with FlexSave as
well.

Can I send a report to the CFO with the actual realized savings?

Your actual savings is displayed in your FlexSave Dashboard. Your CFO
should have access to this dashboard if they have the FlexSave Admin
permission, and would be able to monitor the utilization as well as the
actual savings yielded by the FlexSave.

This is your FlexSave Dashboard:



Do you support every Operating System?

Right now, we support Linux and Windows-based (including with Microsoft
SQL Server) operating systems. RedHat Enterprise Linux (RHEL) and SuSe
Enterprise Linux (SLES) are not yet supported.

How does FlexSave differ from Reserved Instances or Saving Plans?

With FlexSave there is:

-   Zero commitment required
-   Zero loss burden on your part — even if you shut down instances in
    the middle of the month
-   Zero management on your part — once you enable FlexSave you don’t
    need to do anything else

  Feature                     DoiT FlexSave   AWS RIs     AWS Compute Saving Plans
  --------------------------- --------------- ----------- --------------------------
  Minimum commitment period   None            12-months   12-months
  Automatic renewal           Yes             no          no
  Regional                    Yes             Yes         No
  Instance Type-specific      Yes             Yes         No
  Covers non-EC2 workloads    No              No          Lambda, Fargate

Which regions are supported with FlexSave?

Please see our supported regions matrix for more details.

I enabled FlexSave, but there aren’t savings yet. What do I do?

FlexSave goes into effect from the beginning of the next month, but you
get access to the FlexSave Dashboard right away.

It’s the beginning of the month and I see no savings yet. What should I do?

This happens due to a delay in receiving billing data from AWS. You can
expect to see accurate savings data from the 4th day of the current
month.
FlexSave for AWS Overview

Overview

FlexSave helps you maximize EC2 discounts with minimal-to-no
commitments.

In order to use FlexSave, your AWS account/s must be consolidated with
DoiT International billing organization. DoiT International is a global
AWS Advanced Channel Reseller.

 Required Permissions: FlexSave Admin
Default roles with this permission: Power User, Admin 

FlexSave 

FlexSave automates the management of AWS Reserved Instances and Saving
Plans so that you realize the largest possible EC2 savings without
having to make any commitments.

 FlexSave works by performing a sophisticated,
AI-based analysis of your AWS workloads and identifies the ideal blend
of Reserved Instances, automatically applying it to your account/s. 
  

Navigate to FlexSave by clicking its icon on the left-hand navigation
panel.



From the FlexSave page, you’ll see a preview of your team’s potential
savings for the following month if you enable FlexSave.

Click “START SAVING” to turn it on.



After enabling FlexSave, you’ll see your FlexSave Dashboard which
displays important insights into your FlexSave savings.

Let’s go over the elements of your FlexSave Dashboard:



FlexSave Dashboard

Your FlexSave Dashboard has three widgets, which displays $ savings
resulting from using FlexSave:

-   Current month’s savings rate (): Savings from FlexSave expressed as
    $ saved / pre-FlexSave on-demand spend
-   Current month’s savings ($): FlexSave savings expressed in absolute
    dollars saved.
-   Current month’s net on-demand spend: On-demand spend after
    subtracting FlexSave savings.

 If you’ve never previously used FlexSave or
purchased Flexible Reserved Instances through the DoiT CMP, the “Last
month’s savings” widget will not appear during the first month you use
FlexSave. 

Adjusting Time Ranges

By default, the three widgets in your FlexSave Dashboard display data
for the current month.

You may adjust the time range by clicking in the dropdown under “Time
range” as shown below, and selecting a different time interval.



Finally, your FlexSave Dashboard contains a stacked-column chart
displaying FlexSave savings and net on-demand EC2 spend from previous
months, your current month, and a forecast of both for the next month.

Columns displaying data for the current and previous months are broken
down into two parts:

-   Savings: Your $ savings realized from using FlexSave
-   Net on-demand spend: Your on-demand EC2 spend, net of savings
    realized from using FlexSave

 Historical data will only show up if you’ve
previously used FlexSave, or if you purchased Flexible Reserved
Instances through the DoiT CMP in the past. 

The column displaying data for the next month contains two parts as
well:

-   Forecasted savings: Anticipated savings assuming you continue to use
    FlexSave, based on AI analysis of your AWS workloads.
-   Forecasted net on-demand spend: Anticipated on-demand EC2 spend, net
    of the forecasted savings from using FlexSave

Disabling FlexSave

If you prefer to turn off FlexSave, click on the vertical ellipsis in
the top-right corner of the FlexSave page. Then select “Disable
FlexSave”.



A confirmation pop-up will appear, explaining that FlexSave will
continue to generate savings until the end of the month.

Click “Disable” to turn off FlexSave.



FlexSave Invoices

In your monthly bill you’ll see a line item with the following details
in your invoice:

-   Description: FlexSave Savings
-   Details: DoiT FlexSave Savings
-   Units: -1
-   PPU: Your monthly savings}}

The dollar amount displayed under “PPU” will be subtracted from your
overall EC2 spend.


How to get GCS cost per bucket

Introduction

Google Cloud Storage (GCS) is object storage for companies of all sizes.
You can use GCS to store any amount of data and retrieve it as often as
you’d like.

Cloud Management Platform (CMP) is a software service that automatically
identifies cloud cost issues, gives those insights to relevant teams,
and delivers the context you need to get back on track.

 This tutorial is intended for people who are
somewhat familiar with Google Cloud Console and want to learn about the
Cloud Management Platform. There are explanations for all of the actions
in Google Cloud Console, but they may not explain everything needed for
someone completely new to Google Cloud. There is no assumed knowledge
about CMP. 

Label Google Cloud Storage Buckets

Start with adding labels to your Google Cloud Storage buckets.

1.  Open the Cloud Storage browser in the Google Cloud Console
2.  In the bucket list, find the bucket you want to apply a label to,
    and click its overflow menu
3.  Click Edit labels
4.  In the side panel that appears, click the + Add label button
5.  Specify bucket-name as a ‘key’ and the name of the bucket as a
    ‘value’ for your label
6.  Click Save

 In the Edit labels side panel, you can also edit
the Value of existing labels. 

Create Cloud Analytics Report

Start with creating a new CMP Analytics Report

1.  ☐ Open CMP Analytics
2.  ☐ Click “Explore” to start a new report



-    
Developer Hub

Please access our Developer documentation at developer.doit-intl.com
Assign Assets to Billing Profiles

You can assign assets to Billing Profiles for invoicing purposes. Since
every Billing Profile receives its own monthly invoice, how you assign
assets will affect how each entity is billed.



Access Assets from the menu on the left-hand side of the page and
clicking on Assets.



Once you’re at the Assets page, switch to the relevant asset, locate the
ellipsis icon, and click on ‘Billing Profile Assignment’.



Finally, select the Billing Profile you’d like to assign the asset to
from the dropdown, and click “Save” to confirm your changes.


Access Contracts

As a customer, you can access your company Contracts, including their
full details and the actual contract documents. In order to access the
Contracts section, go to the menu on the top left-hand side of the page
and click on Contracts.

 Required Permission: Contracts Viewer   




You’re now able to observe the details of the contract such as start and
end dates, and in addition, access the original executed contract
document.


Tag Assets

Assets in DoiT Cloud Management Platform (CMP) refer to your Billing
Accounts for Google Cloud, Accounts for AWS, or Subscriptions for Google
Workspace, Microsoft Azure, or Office.

You can tag an asset for classification purposes. Tags will appear on
invoices so you will be able to identify invoice items easier. The best
practice is to tag assets with a term or keyword like team name, cost
center, location, or any tagging convention used in your organization.

Note that only one tag is allowed per asset. To add tags to assets, see
the following instructions.



1.  Navigate to ‘Assets’ from the menu on the left-hand side of CMP
2.  Select the ‘Asset Type’ you want to tag (AWS, Google Cloud, etc.)
3.  Click the 3-dot menu
4.  Select ‘Tag Asset’
5.  Input a new tag or select from the list of previously created tags.
6.  Click Save

All new tags you save will be added on the tag selection list and will
be available to use for other assets.





After clicking save, the tag will be visible under the asset name as
shown below.


Update Payment Method

You can configure the Payment Method for your organization using the
Cloud Management Platform.

The payment methods available depend on your currency and country. In
many countries, you can set up a credit card, debit card, or bank
account as a primary payment method.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



Once you’re at the Billing Profile Settings page, switch to the ‘Payment
Methods’ tab.



Assuming that the ‘Wire Transfer’ setting is enabled and you’d like to
switch to paying by credit card, enter the relevant details for your
card of choice.



By setting up a credit/debit card, your payments are processed
automatically, so you don’t have to worry that your service will stop
running if you forget to make a payment.



You can also set up a backup credit or debit card as a safety net. That
way, if your primary payment method fails, we’ll charge your costs to
your backup payment method. This ensures that your cloud services keep
running.

Please note that if the enable button to the right of the card is
switched on, it means this card becomes the default for payments.



If you prefer to set the alternative card to be the default for
payments, simply click the enable button next to the card of your
choice.



If no card is enabled as the default for payments, we will not
automatically charge you. This means you will have to manually pay your
invoices.

For further instructions on how to pay for an invoice, please proceed to
the ‘Pay Invoice’ article.

The following video shows you how to update a billing profile’s payment
method:

 embed
url=“https://www.loom.com/share/d8fd0265271e403ab96b88e7e9b8a851” 
Managing Invoices

As a customer, you can access your company invoices, including their
full details and the actual invoice documents.

 Required Permissions: Invoice Viewer   


Start with accessing Invoices from the menu on the top left-hand side of
the page and clicking on Invoices, or locating the icon as seen in the
example below.



You can filter the invoices per billing profile to which it was issued,
and by issue date of the invoice. To filter the invoices, use the
dropdown controls at the top of the page.



In addition, there is the option to download the invoice summary as a
CSV file by clicking the download icon in the top-right corner of the
page.



There are five possible statuses for invoices:

1.  Open - shows the amount owed and due date of the payment.
2.  Canceled - canceled removes the charge but remains listed in your
    Sales Invoices history for review if necessary.
3.  Paid - the amount was delivered and approved.
4.  Partially Paid - the total amount was not fully delivered and has
    yet to have been approved.
5.  Past Due - invoice due date of payment has passed.

By clicking on an invoice number (e.g., IN1940032243) you can review
additional details of the invoices such as detailed invoice lines. There
is also the option to view the document as a PDF file.

If you would like to pay for an invoice now, go to the ’Pay Now’ button
on the top right-hand part of your page.



For further instructions on how to pay for an invoice, please proceed to
the ‘Pay Invoice’ article.
Change Company Name

A customer can edit the name of their company if they choose to do so.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



The next page brings you to the ‘General’ tab where you can change the
name of your company.



Once you have made the necessary changes, click on ‘Save’ at the bottom
right-hand side of the page. Notice the change of the company name at
the top of the page.


Pay with a Credit Card or ACH

You have the option to pay the open (i.e., unpaid) invoices with a
credit card. We process the credit cards with an emphasis on the
security of the provided information.

 Required Permissions: Invoice Viewer   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

To pay for an invoice, please select the ‘Pay Now’ button, located on
the top right-hand corner of the page.



Once clicking on ‘Pay Now’, a popup to enter your credit card details
will appear. If you haven’t entered the credit card details in the past,
you’ll need to do that here.



Furthermore, you may partially pay for an invoice by manually editing
the amount. See the below example for reference.



For customers that have already paid with a credit card in the past, the
window will appear with the history of your cards that were previously
used. If you see more than one credit card, please select one from the
list with which you’d like to pay this invoice.



After clicking on ‘Pay Now’ your order transaction will begin to be
processed, and once approved by the credit card processor, you will
receive the following notification on the bottom left-hand corner of
your page. If the payment was successful, the status of the invoice will
be switched to ‘Paid’.



If you choose to use a different payment method, you can use Wire
Transfer. The bank details can be found within the PDF of the invoice.
Change Billing Currency

If you need to change your company’s Billing Currency, a new Billing
Profile must be registered using the Cloud Management Platform. The
currency of existing billing profiles cannot be changed.

From the main dashboard, locate the three-dots icon on the right-hand
side of the page and click ‘New Billing Profile’.





Once there you will be prompted to ‘New Billing Profile’ and start
filling out the information about your company.



After completing all the required fields in each section, you will be
asked what Billing Currency you’d like to use.



You may choose between the following payment methods and currencies;
ILS, USD, EUR, GBP, or AUD & Wire Transfer, Credit Card, Bill.com, or
ACH Payment.



Click Submit once you’ve completed the entire registration form.
Change Invoice Settings

Overview

You can configure how you would like to be billed for your cloud assets
managed by DoiT International using the Cloud Management Platform. For
example, you might want to split your Production related accounts to be
billed separately from R&D accounts.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



Once you’re at the Billing Profile Settings page, switch to the ‘Invoice
Settings’ tab.



Invoice Bucketing

As a customer, you have two options for each one of your billing
profiles:

Separate the invoice by asset type - individual invoices for each of
your products. If you have four asset types, (e.g., G Suite, Google
Cloud, AWS, and Office 365), you will have four invoices.

Invoice using custom bucketing - buckets allow you to combine assets
into a group. If you have 16 assets and group them into two buckets,
then two invoices will be generated, with eight assets per invoice.



You can create as many buckets as you want, and separate your assets
into various buckets.





Choose a bucket to make it the default. Any asset that isn’t assigned to
a specific bucket will be automatically placed in the default bucket.



You can always revert back to separating your invoices by asset type if
the custom bucketing isn’t suitable for you anymore.

Watch the bite-sized video below for a closer look at Billing Profiles,
Invoices, and Invoice Buckets.

 embed
url=“https://www.loom.com/share/58349311a16d4daf8d9f9c5b1ebffdce?sharedAppSource=teamlibrary”

Update Billing Address

You can update the Billing Address for your organization using the Cloud
Management Platform. The address is used for billing and invoicing
purposes.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



Once you’re at the Billing Profile Details page, switch to the ‘Billing
Address’ tab. Once you’re finished updating your details, go to the
bottom right-hand corner of the page and click Save.

The following video shows you how to Update the Billing Address:

 embed
url=“https://www.loom.com/share/8ec560b96541458bbd2f956af8467fcf” 
Set up a New Billing Profile

As a customer, you are able to set up a New Billing Profile for your
organization apart from other billing profiles.

 Required Permissions: Billing Profile Admin 
  

From the main dashboard, locate the three-dots icon on the right-hand
side of the page and click ‘New Billing Profile’.





Once there, you will be prompted to ‘New Billing Profile’ and start
filling out the information about your company.



After completing all the required fields in each section, you will be
asked what payment method you’d like to use: Credit Card, Bill.com, Wire
Transfer, or ACH Payment.

Click Submit after you fill out the details.



If you receive the following error, please try again.



After the successful submission of a New Billing Profile, an automatic
email notification will be sent to the email address placed in the
Billing Profile details. Here is an example below.



At the beginning of the month, you will receive an invoice for the New
Billing Profile you registered for services used in the previous month.

The new Billing Profile is now visible in your Home dashboard.


Get Invoice Reconciliation File

As a customer, you can access your company invoices as well as download
the invoice summary as a CSV file.

 Required Permissions: Invoice Viewer   


Start with accessing Invoices from the menu on the left-hand side of the
page and click on Invoices.



To download the invoice summary as a CSV file, click the download icon
in the top-right corner of the page.


Set up ACH Payments

You can pay your invoices by using ACH (Automated Clearing House) via
the Cloud Management Platform. Please follow the step-by-step
instructions on how to set up an ACH Payment for your company.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



Once you’re at the Billing Profile Settings page, switch to the ‘Payment
Methods’ tab, select ‘ACH Payment’, and click on ‘Link New Account’ to
link your bank account.



Link Account

We use Plaid (plaid.com) to perform secure ACH payments authorizations
which don’t require making small deposits to your account for
verification.



Next, choose your bank.



Then enter the same credentials used for your online banking account.



After that, choose either a ‘Checking’ or ‘Saving’ account.



Finally, your bank account details should successfully be linked and
saved for future ACH Payments.



Pay Invoice with ACH

The saved ACH method will be available when you want to pay for future
invoices.



We will automatically initiate ACH debits when your invoice is due.
Please note, ACH payments take 4-7 days to process. While processing,
the invoice will be shown with the “processing” state.

Manually set up ACH payments

There are some edge cases where our ACH verification process doesn’t
work properly, such as when you have a Wells Fargo or Bank of America
account with two-factor authentication enabled.

To manually set up ACH payments, open a support ticket under the
“Billing” category, and provide the following information:

-   routing number
-   account number
-   account holder name
-   account holder type (individual or company)

Once we have this information, we will send two small deposits for
verification purposes. Typically, these deposits take 1-2 business days
to appear on your online statement.

The statement has a description that includes AMTS followed by the two
deposit amounts. To validate your bank account information, follow up on
the support ticket with this AMTS description once you see the deposits.
Set Accounts Payable Contact

You can update the Accounts Payable information for your organization
using the Cloud Management Platform. The information is used for billing
and invoicing purposes.

 Required Permissions: Billing Profile Admin 
  

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

From the main dashboard, click on the edit icon next to the Billing
Profile of which you want to update.



Once you’re at the Billing Profile Settings page, switch to the
‘Invoices Contact’ tab.



Once you’re finished updating your details, go to the bottom right-hand
corner of the page and click Save.

The following video shows you how to update the AP information for a
billing profile.

 embed
url=“https://www.loom.com/share/d4b4d1e35f65414b9d59e1290c57badb” 
Payments Notifications

Customers can be notified when charges on upcoming invoices are soon to
be due (as well as overdue invoices), by enabling the alerts for
‘Payment Reminders’ in the profile section of the Cloud Management
Platform.

In order to enable or disable the notification itself, click your
profile icon in the upper-right corner of the page header, then select
Profile.



In the Profile dialog, you will find the ‘Payment Reminders’
notification setting.



Below are three examples of payment reminder email notifications we will
send out:

1.  Seven days before the invoice is due.



2.  Four days after the overdue is due.



3.  10 days after the overdue is due.


Slack Notifications

If you have a shared Slack channel with DoiT International, you may now
opt-in to receive alerts for:

-   Detected cost anomalies
-   Known Issues in Google Cloud and AWS
-   Cloud Quota Alerts for Google Cloud and AWS

To set up notifications, navigate to the Settings page from your
left-hand navigation panel. Then click on the “Slack” tab.

We will automatically detect whether your team has a shared Slack
channel with us, so all you need to do is select which notifications
you’d like to opt-in. When you’re done, click on “Update”

Note that for Cost Anomalies, there is an additional step of selecting
the minimum threshold (Information, Warning, or Critical) of anomalies
you’d like to be notified on.


Cloud Credits Notifications

Customers can be notified when credits on their cloud accounts are due
to be exhausted, and additionally, once they have exhausted, by enabling
the alerts for ‘Credit Alerts’ in the profile section of the Cloud
Management Platform.

In order to enable or disable the notification itself, click your
profile icon in the upper-right corner of the page header, then select
Profile.



In the Profile dialog, you will find the ‘Credit Alerts’ notification
setting.



Below are two examples of credit alerts email notifications we will send
out:

When the credit is due to end.



When the credit has exhausted.


New Invoices Notifications

Customers can be notified when a new invoice has been created by
enabling the alerts for ‘New Invoices’ in the profile section of the
Cloud Management Platform. The email will include a link to the invoice
which will allow online payments.

In order to enable or disable the notification itself, click your
profile icon in the upper-right corner of the page header, then select
Profile.



Select the ‘Notifications’ tab and check the box for ‘New Invoices’.
This change will automatically save.



Below is an example of the new invoice email notification we will send
out.




Read-Only Access to GCP

DoiT International is committed to access transparency and access
approval. When you open a technical support request with DoiT
International, we may need to access your Google Cloud project so we
could help you in the most effective way.

Important to Know

-   Your Google Cloud project is not accessed for any reason other than
    to fulfill contractual obligations
-   Valid business justification required for any access by our
    engineering personnel
-   Approve or dismiss requests for DoiT employees access, working to
    support your service

How does it work?

When you request technical support and create a new service request with
DoiT International, you will be offered to grant DoiT International
engineer read-only access to the Google Cloud project set in your
request.

A typical access grant is implemented with a gcloud command (part of
Google Cloud SDK). The access is always read-only, limited, and provided
only to DoiT International engineers that are handling your request.

    gcloud projects add-iam-policy-binding cassandra-db-prod-289507 \
    --member="group:ticket-38432@cre.doit-intl.com" \
    --role=roles/viewer --condition=None

For example, the above command, grants read-only access
(--role=roles/viewer) to a group of engineers assigned with request
#38432 ( --member="group:ticket-38432@cre.doit-intl.com") to your Google
Cloud project cassandra-db-prod-289507.

We will generate the command for you automatically and display it to you
on the support center user interface.



Revoke Access

For information security reasons, once the ticket is resolved, the
access is automatically revoked. Next time you will create a request,
you will need to provide DoiT International with access again.
Working with Support Requests

If you would like to access and review previously submitted support
requests, you can easily do so through the Cloud Management Platform
(i.e., https://hello.doit-intl.com).

From the main dashboard please select ‘Access Support’.



Another way to access the ‘Support’ page is by clicking on the icon on
the left-hand side of the page.



You can locate tickets that are currently ‘In Progress’, and by enabling
the ‘Show Closed Tickets’ finder, see the archived tickets.



By clicking on ‘View Ticket’, you are brought to a new page which
includes the full description and in-depth details where you are able to
comment, escalate, solve, and more.


Support or Advisory Requests

DoiT International provides unlimited advisory and technical support for
Amazon Web Services, Google Cloud, and Microsoft Azure. As a customer,
you are not limited to any number of support requests or how much time
DoiT International invests in supporting you as a client. To open a
support request with us, please file a ticket as instructed in this
article.

New support or advisory request can be filed by clicking on the ‘Access
Support’ from the home page, or from the menu on the left-hand side of
the page.

Start with logging into the Cloud Management Platform and then click
“Access Support”:



 By clicking on ‘Allow’ to show you
notifications, the Cloud Management Platform will notify the requester
(and anyone that is cc’d) each time an update is made to your support
request. 

Accept ticket notifications in your browser

Once you are on the support page, click ‘New Request’ to create new
support or advisory ticket.



You’re now on the creation page of the ticket. Choose your Cloud
Platform, Product, Resource, and according to your selections, please
choose the appropriate field (AWS Account/Google Project ID/G Suite
Domain/Office 365 Domain/Azure Tenant) so we can route the ticket to the
most appropriate engineer.

Note that we will also display any Known Issues related to the cloud
platforms you use. If one of the known issues displayed looks to be
related to the service issues you’re experiencing, it’s fine to open a
ticket with DoiT International but it is likely we are already working
together with the cloud vendor engineers on whichever cloud platform the
issue is arising from.



It is essential to be specific when choosing the Severity of your
request, as each issue has a dedicated response time for the support
team:

1.  General Guidance = 4 hours
2.  System Impaired = 2 hours
3.  Production System Impaired = 1 hour
4.  Production System Down = 30 minutes

Fill in the details of the issue with a clear Subject, relevant folks
cc’d, and a full description.

Once ready, click Submit.



 Please note that in some cases, your cloud
vendor representative such as an account manager or customer engineer
can be automatically copied on your request. If you do not wish to copy
the vendor representative, please remove the vendor’s email address from
the “Additional CCs” list. 
Enable Ticket Sharing

Ticket sharing allows users to see all tickets, even if the ticket was
opened by another user in the organization. This is useful if multiple
people are opening support tickets and the organization would like to
have visibility into all tickets.

 Required Permissions: Billing Profile Admin 
  

Start with navigating to the ‘Support’ page by selecting the icon on the
left-hand side menu.



Locate the settings gear icon at the top-right of the page and click
‘Enable Ticket Sharing’.





Once enabled, you will be able to see tickets opened by others in your
organization.
Read-Only Access to AWS

DoiT International is committed to access transparency and access
approval. When you open a technical support request with DoiT
International, we may need to access your AWS account so we could help
you in the most effective way, including to involve the AWS support
team.

Important to Know

-   Your AWS account is not accessed for any reason other than to
    fulfill contractual obligations
-   Valid business justification required for any access by our
    engineering personnel
-   Approve or dismiss requests for DoiT employees access, working to
    support your service

How does it work?

When you request technical support and create a new service request with
DoiT International, you will be offered to grant DoiT International
access to the AWS account set in your request.



To make it easier for you, we have prepared an AWS CloudFormation stack
you can run from here https://l.doit-intl.com/aws-ops-cfn

Before deploying the AWS CloudFormation stack, you can download and
review it at
https://doit-aws-ops-prod-templates.s3.amazonaws.com/doitmanagement.yaml

The CloudFormation will create an IAM Policy and IAM Role the DoiT
International engineers can use to access your AWS account. The
effective policy attached to the role is SecurityAudit.

The CloudFormation will use a small AWS Lambda function to notify our
system of the created role so that we can add it to our system
automatically, this saves you copying and pasting. You can see in the
CloudFormation that the Lambda runs with very restricted permissions to
just serve this purpose.
Escalating Support Requests

If you would like to access and review previously submitted support
requests, you can easily do so through the Cloud Management Platform.

Start with locating the ticket you’d like to escalate on the Support
page:



By clicking on the ticket’s subject or ID, you are brought to a new page
which includes the ticket’s full description and in-depth details
displayed in a collapsible Info Panel.

Click on the ‘Escalate’ button to escalate the ticket and specify the
reason for escalation.



Available Escalation Reasoning:

-   Long Resolution Time
-   Business Impact
-   Technical Expertise
-   Other

Once you select the reason for escalation, you can also add comments
further explaining and justifying the escalation.
Manage Default Email CC

You can configure additional email addresses to be always copied (CC)
when you raise requests with DoiT International. This is particularly
useful when key people within the org should always get visibility of an
issue.

 Required Permissions: Billing Profile Admin 
  

Start with navigating to the ‘Support’ page by selecting the icon on the
left-hand side menu.



Locate the settings gear icon at the top-right of the page



Select ‘Manage Default Emails List’



Add people you’d like to be always copied on new requests and click
“Save”


Known Issues

Known Issues are defined as any faults or defects in Google Cloud,
Amazon Web Services, or Microsoft Azure services that may be impacting
the performance or availability of your applications.

Any known issues from these platforms are displayed on the Known Issues
page, accessible via the left-hand navigation bar in the CMP.



In the event that one or more of your cloud services aren’t functioning
as they normally do, before opening a ticket with DoiT International we
recommend you check the Known Issues page.

If one of the known issues displayed looks to be related to the service
issues you’re experiencing, then opening a ticket with us is not
advised. It will likely have to be resolved by the engineers on
whichever cloud platform the issue is arising from.



Should you want to filter through Known Issues, click on the filter
button near the search box.



If you’d like to learn more about a particular Known Issue, then click
on the VIEW button corresponding to the issue to see a detailed
description.


Set Licenses to Auto-Increase

Auto-increase for Google Workspace ensures that you’ll always have
enough licenses available as your team scales.

All you have to do is set a threshold for the minimum number of
Workspace licenses you’d always like to have available. Let’s see how to
set this up!

 At a minimum, to manage Google Workspace
licenses, your User Role must contain the following permission:

-   Assets Manager 

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to configure auto-increase. 

Start by navigating to your Assets page either via the left-hand
navigation bar or the “Manage Licenses & Assets” shortcut.



Once you’re at the Assets page, switch to the Google Workspace tab.



Locate the subscription you’d like to configure auto-increase for, and
click on the ellipsis icon on the right-hand side of the widget. Then
choose ‘Configure Auto Increase’.



Configure the number of licenses you want to have available at all
times. Once licenses get assigned to users in your organization, a new
license(s) will be added automatically.



After you click “Save” you will see a success message in the lower-left
corner of your screen, confirming your adjustment. Our system will check
for and add, if necessary, additional licenses every 30 minutes.

The following video shows you how to Configure Auto-Increase for G Suite
Subscriptions:

 embed
url=“https://www.loom.com/share/be1b3ebbd165446799b53653487774e7” 
Purchasing G Suite Licenses

If you’re on the Annual or Flexible plans and use up all your licenses,
you can easily purchase more. We increase your monthly payment to cover
the new licenses.

 Required Permission: Assets Manager   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

Start with accessing the G Suite based Assets from the menu on the
left-hand side of the page and clicking on Assets.



Once you’re at the Assets page, switch to the G Suite tab.



Locate the subscription you’d like to add licenses for and click the +
icon to add as many licenses as needed.



Add up to as many licenses as you wish, and click ‘Apply’.



Finally, you may approve the purchase by clicking the ‘Approve’ button.



Understanding License Utilization:

You can see the number of licenses in use under the Quantity field,
versus how many are available. In the following example, two licenses
are in use from seven licenses available.



Decreasing the Number of Licenses:

It is possible to decrease the number of licenses that are not in use.
By doing this, you will not have to pay for the licenses available if
you aren’t planning to use them. The charges will be deducted from your
account as reflected in the next month’s billing to your organization.

Please note that only FLEXIBLE plans allow you to decrease the number of
licenses. For more information, please review this post.
Add a New G Suite Subscription

If you would like to purchase a new G Suite subscription, you can do so
through the Cloud Management Platform.

 Required Permission: Assets Manager   


Please note that you must be assigned access to the specific Billing
Profile under which the domain is managed in order to purchase a new
subscription.

From the main dashboard please select ‘Manage Licenses & Assets’.



Another way to access the G Suite based Assets is via the menu on the
left-hand side of the page and clicking on Assets.



Once you’re at the Assets page, switch to the G Suite tab and click on
‘New Subscription’.



Select the domain for which you’re adding a subscription and click
‘Next’.



Select the Subscription/License and quantity you’d like to order.



Lastly, review your order summary and, if you approve, click ‘Submit’


Transfer G Suite subscription

If you have a contract for a G Suite or Google Workspace with DoiT
International and already have that domain with Google or a different
reseller, you are not required to go through the traditional setup
process. We will instead be able to transfer your existing setup over to
us with no downtime involved.

To transfer the management of your existing G Suite setup you will need
to retrieve your Transfer Token from G Suite, you can retrieve your
token by following the below steps:

-   ☐ Go to the Retrieve Transfer Token page. If you aren’t already
    logged in, ensure you are signed in as the admin user for your G
    Suite setup.
-   ☐ Agree to the terms and conditions by checking the required box.
-   ☐ You will be asked to enter the reseller’s public identifier

 🇺🇸US & AU 🇦🇺customers, please use C02dk8ht9 as
reseller’s public identifier 

 🇪🇺EU customers - please use C03cno21i as
reseller’s public identifier 

-   ☐ Click Generate Transfer Token.
-   ☐ Click Copy Code.
-   ☐ Submit a ticket to our G Suite team with the Transfer Token
    requesting our team complete the transfer of your G Suite service
    over to DoiT International. Leave it to us, our team will respond to
    you once the transfer is complete!

When submitting a ticket, please provide the answers to the following
questions:

-   ☐ Company official name:
-   ☐ Primary domain for G Suite:
-   ☐ Contact person’s full name:
-   ☐ Contact person’s email:
-   ☐ Contact person’s phone #:
-   ☐ Optional Alternate (non-domain) email for account
    reset/activations:
-   ☐ Current G Suite plan:
-   ☐ Which Google Workspace plan are you upgrading to?:
-   ☐ Number of Licenses?:
-   ☐ Payment plan (Flex/Annual):

Transfer Tokens expire 14 days after being generated, if your token
expires, sign in again and repeat the steps above.


Upgrading G Suite Subscription

As a customer, you are able to upgrade your G Suite subscription to get
more business features and administrator controls.

 Required Permission: Assets Manager   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to upgrade your subscription. 

From the main dashboard please select ‘Manage Licenses & Assets’.



Once you’re at the Assets page, switch to the G Suite tab.



To upgrade to a higher edition, locate the G Suite subscription for
which you want to upgrade, and click on the three-dots icon on the
right-hand side of the widget. Then choose ‘Change G Suite Edition’.



Upgrade options:

-   G Suite Basic to Business or Enterprise edition
-   G Suite Business to Enterprise edition

Select the G Suite edition you’d like to upgrade to, and click on
‘Submit’.



An email notification confirming your recent order will be sent to you.


Table of contents

-   What is CMP?

General

-   Login to CMP
-   Company Registration
-   Your Profile
-   Sharing Feedback
-   Slack Integration

Google Cloud

-   Create Google Billing Account
-   Transfer Google Cloud Projects
    -   Transfer manually
    -   Bulk Transfer using Wizard
-   Link Google Cloud Organization
-   Google Cloud Quotas
-   Billing Export
-   Import Historical Data

Amazon Web Services

-   Invite Existing AWS Account
-   Create An AWS Account
-   Link your AWS Account
-   AWS Cost Allocation Tags
-   Set up CloudHealth
-   AWS Quota Monitoring
-   Import AWS Organizations

FlexSave for AWS 

-   FlexSave for AWS Overview
-   FlexSave for AWS FAQ
-   Supported AWS Regions

Spot Scaling

-   Spot Scaling Overview
-   Setting Up Spot Scaling
-   Spot Scaling FAQ

Cloud Analytics

-   Create Cloud Analytics Reports
    -   Report Dimensions, Group By, and Filters
-   Edit Cloud Analytics Report
-   Attribute Cloud Spend
-   Share and Download Cloud Analytics Reports
-   Clone Cloud Analytics Reports
-   Understanding Aggregations
-   Understanding “Minor Values”
-   Trend Analysis
-   Forecasting
-   Export Cloud Analytics Reports
-   Schedule Report Email Delivery
-   Manage Budgets
-   GKE Cost Analytics

Dashboards & Widgets 

-   Widgets Overview
-   Adding Reports to a Dashboard
-   Customize Dashboards
-   Create New Dashboard
-   Access Public Dashboard
-   Rightsizing for Google Cloud
-   BigQuery FinOps Dashboard
-   AWS FinOps Dashboard

Governance

-   Policy Engine Early Access

Working with Tickets 

-   Support or Advisory Requests
-   Escalating Support Requests
-   Enable Ticket Sharing
-   Manage Default Email CC
-   Known Issues
-   Read-Only Access to GCP
-   Read-Only Access to AWS

G Suite & Workspace

-   Transfer G Suite subscription
-   Purchasing G Suite Licenses
-   Add a New G Suite Subscription
-   Upgrading G Suite Subscription
-   Set Licenses to Auto-Increase

Microsoft Office 365

-   Create Office 365 Subscriptions
-   Purchasing Office 365 Licenses

Cloud Sandbox Management

-   Configuring Sandbox Policy
-   Creating Google Cloud Sandbox

Invoices & Payments

-   Set up a New Billing Profile
-   Managing Invoices
-   Pay with a Credit Card or ACH
-   Change Invoice Settings
-   Set up ACH Payments
-   Get Invoice Reconciliation File
-   Change Billing Currency
-   Change Company Name
-   Update Billing Address
-   Update Payment Method
-   Set Accounts Payable Contact

Anomaly Detection

-   View Cost Anomalies

User Management

-   Creating a New User
-   Manage Roles
-   User Permissions Explained
-   Bulk Invite Users
-   Manage Organizations

Notifications

-   Payments Notifications
-   New Invoices Notifications
-   Cloud Credits Notifications
-   Slack Notifications

Vendor Information

-   General Vendor Information
-   CMP Data Access Policy
-   External Services We Use
-   Exchange rates
-   Our Subprocessors

APIs

-   Developer Hub

Perks

-   Perks

Assets & Contracts

-   Tag Assets
-   Assign Assets to Billing Profiles
-   Access Contracts

Tutorials

-   How to get GCS cost per bucket
Flexible Reservations FAQ

Overview

Flexible Reserved Instances let you commit to EC2 Reserved Instances in
one-month intervals while still getting 80+ of the AWS-listed Reserved
Instance discount. With Flex RIs, you’ll eliminate RI lock-in risk for
your less predictable workloads.

In order to use Flexible Reservations, your AWS account/s should be
consolidated with the DoiT International billing organization. DoiT
International is a global AWS Advanced Channel Reseller.

How much can I save every month?

You can realize 80+ of the discount granted by the applicable AWS
Reserved Instance 1-year Full Upfront.

For example, AWS grants a 19.5 discount on reserved instances for
instances from the m5 instance family in the us-west-1 region. A FlexRI
for this machine/region combination will provide you with a 15.6 (19.5
 0.8) discount but without the risk of committing to the entire year.

Can I use FlexRIs if I am using AWS RIs or Saving Plans?

Flexible reservations are applied to on-demand usage. Usage covered by
AWS reserved instances or Savings Plans is excluded from our
recommendations and the order user interface.

Can I buy FlexRI for 3 months?

Yes. Flexible Reservation orders can be configured as “recurring” for
any number of months. Recurring orders will be automatically recreated
every month.

Can I send a report to the CFO with the actual realized savings?

We display actual savings on our FlexRI dashboard. Your CFO would have
access to this dashboard and would be able to monitor the utilization as
well as the actual savings yielded by the Flexible Reservations.

Example of the Actual Savings dashboard

Do you send an expiration reminder before the end of the month?

About 5 days before the existing Flexible Reservation/s expires (unless
there is a “recurring” setting enabled), we will send you an email with
a summary of all expiring flexible reservations.

How the discount is calculated exactly?

The discount is calculated by applying 80 on the applicable AWS
Reserved Instances 1-year Full-Upfront “Savings over On-Demand”. You can
access AWS RI Pricing here.

Can you make recommendations on which FlexRI(s) I should buy?

Yes. Flex RI Recommendations identifies your AWS EC2 instances that
aren’t covered by a billing discount mechanism (RIs, Savings Plans,
etc.), and calculates the ideal number of Flex RIs recommended to
optimize your spend. You can then purchase these Flex RIs from DoiT in
just a few clicks.

How do Flex RI Recommendations work?

FlexRIs Recommendations provides clients a list of machines to commit to
for the proceeding month. In the background, DoiT monitors your
historical EC2 usage and locates EC2 machines that are not covered by
any discount regime (Savings Plans, AWS RIs etc) and that were not yet
ordered for the following month. DoiT will run an algorithm to find the
optimal coverage based on the instances’ size, region, normalized units,
account, operating system and family type.

Upon accepting a recommendation a new order will be created for the
following month and the recommendation will be recalculated. Please
notice that since some machines are eligible for size-flexibility,
ordering a machine from the same family type can affect the
recommendation on others. For example: ordering 1 x r5.2xlarge Linux in
us-east-1 is equivalent to ordering 2 x r5.xlarge. of the same type Upon
making an order of an r5.2xlarge you may see that r5.xlarge may be
eliminated from the recommendations since the first machine covers the
exact same workload.

Can you find a way to provide a discount based on consumption?

Our team is working on a new FlexRI feature that once available, will
automatically implement recommendations, always optimizing for cost.
Under this model, you won’t need to think about which Flexible
Reservations to purchase or to what hourly spend you’re willing to
commit.

Do you support any Operating System?

Right now, we support Linux and Windows-based (including with Microsoft
SQL Server) operating systems. RedHat Enterprise Linux (RHEL) and SuSe
Enterprise Linux (SLES) are not yet supported.

How FlexRIs are different from Reserved Instances or Saving Plans?

In general, while Flexible Reservations do not yield as much discount as
AWS Reserved Instances, you’re not at risk of underutilizing
reservations for longer than 1-month periods.

  Feature                     DoiT FlexRIs   AWS RIs     AWS Compute Saving Plans
  --------------------------- -------------- ----------- --------------------------
  Minimum commitment period   1-month        12-months   12-months
  Automatic renewal           yes            no          no
  Regional                    Yes            Yes         No
  Instance Type-specific      Yes            Yes         No
  Cover non-EC2 workloads     No             No          Lambda, Fargate

Which regions are supported with Flexible Reservations?

As of the first quarter of 2021, Flexible Reservations are available in
7 AWS regions with more regions becoming available later this year.
Please see our supported regions matrix for more details.
Flexible Reservations Overview

Overview

Flexible Reserved Instances let you commit to EC2 Reserved Instances in
one-month intervals while still sharing in the AWS-listed RI commitment
discount. With Flex RIs, you’ll eliminate RI lock-in risk for your less
predictable workloads.

In order to use Flexible Reservations, your AWS account/s should be
consolidated with DoiT International billing organization. DoiT
International is a global AWS Advanced Channel Reseller.

 Required Permissions: Flexible RI Admin 
  

How to purchase Flex RIs

To begin, click the ‘Flexible RIs’ icon on the left-hand side of the
page. Once you’re at the Flexible Reserved Instances page, click on ‘New
Order’, located on the right-hand side of the page.



Complete your Flexible Reserved Instances order by providing the
following information:

  -----------------------------------------------------------------------
  Field                               Description
  ----------------------------------- -----------------------------------
  Account                             AWS account for this order

  Region                              AWS region for this order

  Instance Type                       note, only instances not associated
                                      with existing reservations or
                                      saving plans are shown

  Operating System                    Options include: Linux/UNIX,
                                      Windows, Windows/SQL.Std, Windows
                                      BYOL, Windows/SQL.Ent,
                                      Windows/SQL.Web

  Qty                                 how many instances of the selected
                                      “Instance Type” the order should
                                      include

  Recurring                           For orders with a recurring basis,
                                      select the last month you want this
                                      order to go

  Notes                               Use notes to give more context to
                                      your order such as PO numbers,
                                      workload names, etc.
  -----------------------------------------------------------------------



Click “Submit” and your order will be created and become visible in the
list:



 Please note that new orders and editing previous
orders can only be submitted up until the last 24 hours of the current
month. After that date, orders will become Pending while we conduct an
internal review before activating your Flexible Reservations.   


Monitoring Flex RIs

At the top of the Flex RI page, you’ll see four Flex RI Reporting
metrics that give you a high-level overview of your past and existing
Flex RI purchases:

-   Total Expected Savings - the maximum amount you could have saved,
    given 100 utilization
-   Actual Savings - the amount you actually saved
-   Flexible Reservation Utilization - a weighted FlexRI percentage of
    orders utilization
-   YTD Savings - the total saving across all your reservations, from
    the beginning of the current year.

 Note: The first three metrics are based on what
is shown in the table, meaning taking into account any filters you’ve
set on your orders. The last metric takes every Flex RI order into
account when calculating the number. 

Flex RI Order Statuses

Under the “Status” column, Flex RI orders can have four possible values:

-   New: the order was made, but goes into effect in the following month
    or beyond (if a recurring purchase is set up). New orders can be
    modified until the third-to-last business day of the month prior to
    when they go into effect.
-   Active: the Flex RI order is currently being applied to the
    instance(s) specified
-   Retired: the order is past its expiration date
-   Canceled: the order was cancelled and never applied

To view usage statistics on a specific order, click on the arrow next to
an active or retired order to expand your order and view more details.

You can see the difference between the on-demand price per hour vs. the
Flex RI, and further inspect the utilization graph for additional
details on your flexible reservation.



Flex RI Invoices

For each order of Flexible Reservations, you’ll see one or both of the
following lines on your monthly invoice:

-   Flexible RI #ID Savings
-   Flexible RI #ID Underutilization

The “Flexible RI Savings” will state the amount you have saved due to
the purchase of Flexible Reservation/s for a given month.

The optional “Flexible RI Underutilization” will state the amount
deducted from the cost of the reservation if the underlying instance
wasn’t utilized 100 of the time during the month.

View the bite-sized video below for a closer look at purchasing and
viewing your Flex RIs.


Bulk Upload FlexRI Orders

When you have a lot of Flex RI orders to place for the coming month,
bulk uploading your orders may save you lots of time. From within the
CMP, you can make as many orders as you want by uploading a CSV file.

Begin by navigating to the Flex RIs page, and click on the vertical
ellipsis (⋮) at the top-right of your screen.



Then, select “Upload Orders” and upload the CSV file with your order
information.



The following fields are optional and don’t need to be filled for your
CSV file to be processed:

-   Note
-   Recurring

To ensure your CSV file is structured properly, we recommend downloading
the template below and using it to format your orders.

 file src=“../.gitbook/assets/flexri-bulk-upload-template.csv”
caption=“Flex RI Bulk Upload Template” 
Supported Regions

Availability

As of the first quarter of 2021, Flexible Reservations are available in
the following 7 AWS regions:

    us-east-1 US East (N. Virginia)
    us-east-2 US East (Ohio)
    us-west-1 US West (N. California)
    us-west-2 US West (Oregon
    eu-central-1 Europe (Frankfurt)
    eu-west-1 Europe (Ireland)
    ap-northeast-1 Asia Pacific (Tokyo)

Roadmap

Starting Oct 2021, the following AWS regions would be supported as well:

    ap-south-1  Asia Pacific (Mumbai)
    ap-northeast-2  Asia Pacific (Seoul)
    ap-southeast-1  Asia Pacific (Singapore)
    ap-southeast-2  Asia Pacific (Sydney)
    ca-central-1 Canada (Central)
    eu-west-2 Europe (London)
    eu-west-3 Europe (Paris)
    sa-east-1 South America (São Paulo)
Flex RI Recommendations

Flexible Reserved Instances (Flex RIs) let you commit to EC2
Reserved Instances in one-month intervals while sharing in >=80 of the
AWS-listed discount for the equivalent 1-year RI commitment.

Flex RI Recommendations identifies your AWS EC2 instances that aren’t
covered by a billing discount mechanism (RIs, Savings Plans, etc.), and
calculates the ideal number of Flex RIs recommended to optimize your
spend. You can then purchase these Flex RIs from DoiT in just a few
clicks.

 Required Permissions: Flexible RI Admin 
  

View Flex RI Recommendations

To view your Flex RI Recommendations, click on the “Flexible RIs” icon
in your left-hand navigation panel. By default, you’ll start on the
“Recommendations” tab.

Towards the top, you’ll see a summary of the recommendations displayed
in a blue information box summarizing:

-   the total number of recommendations, and
-   anticipated savings expressed in absolute dollars and percentage
    relative to current spend

 All recommendations are for the following
month, and based on your EC2 usage data over the previous seven days. 
  



Right below this summary you’ll find a few important metrics around your
Flex RI Recommendations. These metrics will update dynamically based
upon your selections from the table below.

Understanding Flex RI Recommendation Metrics



Total Instances Eligible: total number of EC2 instances (across all
recommendations) that don’t appear to be covered by a discounted billing
mechanism such as RIs, Savings Plans, etc.

Total Potential Savings: your potential cost savings resulting from
purchasing Flex RIs for all eligible instances listed in the table
below.

Selected Flex RI Recommendations: number of eligible instances you’ve
selected for inclusion in the Flex RIs order.

Selected Potential Savings: your potential cost savings resulting from
purchasing Flex RIs for the instances you’ve selected.

Implementing Recommendations

By default, your recommendations are sorted by potential savings in
descending order. However, you can sort or filter through your
recommendations by any of the displayed columns.

First, select which recommendations you’d like to implement by clicking
the checkbox next to each recommendation. To choose all recommendations,
click on the checkbox that appears to the left of the “Account” column.

Note that as you select recommendations, the values appearing under the
“Selected Flex RI Recommendations” and “Selected Potential Savings”
widgets will adjust accordingly, as shown below.



Modifying eligible instances for a recommendation

For every recommendation, you may also modify the number of eligible
instances you’d like covered by Flex RIs. The default number displayed
is the number of machines you’re currently running for that given
instance type and region.

If you anticipate that demand will increase/decrease, you can edit the
number under the “Eligible Instances” column.

Again, the numbers displayed in the widgets will adjust accordingly.



Finally, if you change your mind and want to revert back to the original
recommendations, click the “Reset” button in the blue information box.



Create your order

After selecting a set of recommendations to implement, click on the red
“Create Orders” button towards the top-right of your screen.

This will open an Order Confirmation pop-up which lets you know:

-   How much you will pay if you fully utilize your flexible reserved
    instances,
-   How much you would pay if you continued using on-demand instances,
    and
-   Your anticipated savings, expressed in percentages, given your
    selected recommendations

After reviewing, click “Confirm” to place your order. You will still be
able to edit your orders up until the last 24 hours of the current
month.



Modifying Orders

To view, edit, or cancel your Flex RI orders, switch to the Orders tab.

As with purchasing Flex RIs, you can modify your orders up until the
final 24 hours of the current month.

You can easily identify your orders by filtering for orders that have
Status == New, and have your Email associated with it. By default, all
purchases made via the Recommendations tab will have “Based on FlexRI
Recommendation” under Order Notes as well.

Then click on the “Edit Order” icon next to the order you wish to
modify.



Here you can modify any aspect of your order, including number of
instances.

You can also make the order a recurring purchase up to a certain month
and year, or modify the Order Notes to give the Flex RI purchase more
context.


What is CMP?

Welcome to DoiT International’s Help Center for all things Cloud
Management Platform!

 You can request changes to articles or report
issues via our public GitHub repository by submitting a pull request or
creating an issue. 

But for now, let’s go over what exactly the CMP is and how you can
benefit from using it.

The Cloud Management Platform helps the developers and system
administrators at digital-native companies improve cloud operations,
maintain security, control cost, and ensure governance of its cloud
estate. It has five strategic pillars: Analytics, Optimization,
Enablement, Productivity, and Governance.

In this brief, we’ll briefly go over each of the main capabilities you
have access to in the CMP, along with links to other articles for each
feature if you’re interested in doing a deeper dive.

Cloud Analytics

Reports

Cloud Reports give you instant visibility into your Google Cloud and AWS
costs without having to spend agonizing hours manually scanning through
cloud bills.

-   Analyze cloud spend to identify optimization opportunities.
-   Build customized reports and share them with others.
-   Monitor costs on the go from your phone.
-   Detect trends in your cloud usage
-   Forecast your cloud spend across all time ranges and any cloud
    services
-   Cross-check your SUD/CUD credits with by-the-hour reporting.

 embed
url=“https://www.loom.com/share/3bb89b9c624a4a52a2ecfbb61a56b4b8”
caption=“” 

Cost Attributions

Attributions are a flexible way to group resources and their associated
costs, helping you understand the cloud costs and relate them to the
business in your Cloud Reports.

You may have various components of your application(s) spread across
different projects, using different services. Attributions allow you to
combine everything into something coherent.

 embed
url=“https://www.loom.com/share/8d36dbd796c84d51a26b3f836226c883?sharedAppSource=teamlibrary”
caption=“” 

Cloud Cost Optimization

Rightsizing for Google Cloud

When you create an instance in Google Cloud and it is under-utilized,
you are paying more than you should as a result of idle resources.

With Instance Rightsizing for Google Cloud, you will:

-   Get notified of idle resources across all projects, and potential
    savings from rightsizing.
-   Identify and delete and/or modify idle VMs in two clicks.
-   Never pay for underutilized Google Compute instances again.

 embed
url=“https://www.loom.com/share/cecfc1a7f3d84240a5be922e27c0ac56?sharedAppSource=teamlibrary”
caption=“” 

Flexible Reserved Instances

AWS Reserved Instances (RIs) offer you between 30-70 savings on compute
costs in exchange for a one or three-year commitment. Typically, you’d
use RIs for predictable workloads, and pay on-demand pricing for the
less predictable.

However getting RIs usage perfect is hard, because it relies on you
being able to predict the future. Sometimes your predictions turn out
wrong because usage needs suddenly change. As a result, you’re stuck
overpaying for instances you need no more, or forced to re-sell it at a
huge discount.

Flexible Reserved Instances in the CMP let you commit to EC2 Reserved
Instances in one-month intervals while still sharing in the AWS-listed
RI commitment discount. With Flex RIs, you’ll eliminate RI lock-in risk
for your less predictable workloads.

Placing an order for a Flex RI for the following month takes all but a
few clicks, and you can easily monitor their performance from a central
hub in the CMP.



BigQuery FinOps

As powerful as BQ is, it comes at a high cost depending on your
analysts’ behavior and how your BigQuery architecture is set up. Adding
on to this, trying to identify BigQuery resource inefficiencies without
knowing what you’re looking for can be a huge time-suck.

As a result, we created the BigQuery FinOps Dashboard, your Swiss Army
knife for highlighting inefficiencies in your team’s BigQuery usage.

It analyzes your team’s BigQuery behavior, aggregate information, and
display the most important statistics for you. Unlike alternative
solutions and methods, BigQuery FinOps Dashboard brings important
information TO you, without you having to configure anything.

Below you will see the widgets of the dashboard that provide you with
insights into your organization’s BigQuery usage statistics.

One important aspect of the BigQuery FinOps Dashboard is the
Recommendations widget, which offers smart recommendations around the
nature of how your datasets, tables, and queries are structured.

Each recommendation category comes with further details on how to act on
each recommendation.



Cloud Enablement

Cloud Sandboxes

Cloud sandboxes (or DCEs, - disposable cloud environments) offer
engineering teams a safe and controlled environment to run experiments,
test, and build out new features without worrying about impacting
production infrastructure. While easy, simply creating a new Google
Cloud project cannot be considered a “complete” solution due to the lack
of built-in budget management, self-service for developers, and
governing policies.

Cloud Sandbox for Google Cloud gives admins and developers the
governance and autonomy they both need, respectively, all while
connecting to their Google Cloud Organization.

First, create a sandbox policy to automate sandbox management. With a
policy set up, you can:

-   Connect to your Google Cloud billing account, organization, and IAM
    folder.
-   Set sandbox budgets.
-   Get alerts when a budget is hit, or automatically disable the
    billing.
-   Limit the number of sandboxes per user.
-   Give your sandbox names a stable naming convention.

Once a policy is created, developers are free to create cloud sandbox
environments themselves. No more submitting tickets just to get a new
environment provisioned by an SRE. Finally, when sandboxes are up and
running, you can monitor them all from a central hub.

 embed
url=“https://www.loom.com/share/2e2adffc48464c0189b87e4750e7b7d3?sharedAppSource=teamlibrary”
caption=“” 

Cloud Quota Monitoring

Every cloud provider has resource quotas for things like VPCs, CPU
cores, and more. If you’d like to change that quota, you can request
more, and typically cloud vendors will approve it. However, this takes
hours to days.

However, sometimes your quota limits can, without warning, be hit by a
surge of demand that causes you to hit those quotas. When this happens,
you’re forced to wait for your ticket to be addressed.

With Quota Monitoring for Google Cloud, and AWS you can stay on top of
your cloud quotas with proactive monitoring. You’ll get notified when
you’re approaching quotas.

This way, you’ll keep services always running by adjusting limits ahead
of time.

Cost Anomalies

With so many moving parts in the cloud, it’s critical to keep a finger
on the pulse of your costs. However, unless IT regularly monitors cloud
spend, sudden spikes in resource costs can remain undetected for weeks —
until the monthly bill arrives.

As a result, critical staff resources are wasted manually monitoring for
and identifying the scope & source of problems.

Cloud cost anomaly detection offers end-to-end autonomous monitoring of
spikes in your AWS & Google Cloud usage & billing, seamlessly, across
all your projects and services.

Available to DoiT customers right from the CMP, it also offers:

-   Context-aware detection that treats each Google Cloud service
    uniquely.
-   Advanced alerting that goes beyond static budgets & thresholds
-   Fine-tune alerts by training them with your direct feedback.
-   Real-time analysis of workload activity

 embed
url=“https://www.youtube.com/watch?v=h6V7XfhsdmY&list=PLEBxNMZ7Mu3hmB2I2LXcDSYt1SXcjwMz&index=1”


Cloud Support and Advisory

As a DoiT International customer, you have access to 80+ battle-tested
senior cloud engineers around the globe with over 200 certifications
between them.

Within the CMP you can:

-   Create support or advisory requests
-   Escalate support requests
-   Share support requests with others

 embed
url=“https://www.loom.com/share/ec2e0bca53fc46ef80061dd96be2f1a0?sharedAppSource=teamlibrary”
caption=“” 

Perks

Perks are service-based benefits available to DoiT International
customers at no extra cost, including workshops, training, cost
optimization sessions, case studies, and co-produced webinars. They can
easily be browsed and requested on-demand from within the CMP.

 embed
url=“https://www.loom.com/share/9ff183270cb84e32817818589a80d37e?sharedAppSource=teamlibrary”
caption=“” 

Cloud Productivity

superQuery

superQuery is a web-based IDE that enables you to leverage BigQuery, AWS
Athena, and DynamoDB at peak efficiency. With superQuery, you get
top-notch capabilities for:

-   Query Management with Tabs and Boards
-   Collaboration
-   Ad-hoc Visualization
-   Enhanced Caching
-   Git functionality support

As a customer, you get unlimited superQuery seats and access to
superQuery at no additional cost, and can quickly access it from the
CMP.

Cloud Governance

Asset Management

CMP gives you complete self-service management of assets across Google
Cloud, AWS, G Suite, Azure, and Office 365.

From your Asset Management screen, you can:

-   View all cloud subscriptions in one place.
-   Create a new Google Cloud Billing Account and/or an AWS account.
-   Invite an existing AWS account
-   Purchase additional seats for G Suite and/or Office 365 yourself.
-   Automate subscription management with auto-provisioning for G Suite,
    guaranteeing there is an open seat at all times.
-   Tag Assets for classification and invoicing purposes (e.g. team
    name, cost center, location, etc.).

Additionally, you can view your order history of all licenses and
subscriptions across all of your cloud products.

Advanced Billing

CMP gives you capabilities unavailable in Google Cloud or AWS to
customize precisely how you’d like to billed via Billing Profiles,
Invoices, and Invoice Buckets.

Billing Profiles are for when your company has different entities
requiring separate invoices. For instance, you may use a different
payment method or currency depending on the entity.

In the CMP, customers can create as many Billing Profiles as required,
per their company’s needs.

Additionally, whereas with Google Cloud or AWS you can only pay with a
credit card, DoiT International customers have more options for
customizing the payment method for their Billing Profile(s) including
Credit Card, Wire, Bill.com, and ACH.

Invoices across all cloud platforms and their current statuses can be
easily accessed using the CMP.

From the Invoices page, you can:

-   Click on an invoice to view a detailed breakdown.
-   Download invoices.
-   Sort invoices by billing profile, cloud service, date, etc.
-   Get an at-a-glance look of the invoice status, the product its
    referencing, and the total/balance.

Any tags placed on assets will also appear in invoices so you can more
easily identify invoice items.

Invoice Bucketing lets you create custom “buckets” and assign
specific assets to those buckets.

This is especially useful when you have different cost centers such as
R&D or Operations using different assets and want to bill them
separately.

With invoice buckets, you will receive separate invoices for each
invoice bucket, billed to the billing profile it is associated with.

Go here for the full list of your billing and payment related
capabilities.

Contract Management

Via the Contracts page, you get self-service access to all cloud
contracts you are being billed for through DoiT International.

User and Role Management

Use User Management to:

-   Add colleagues to your CMP team.
-   Management Billing Profile assignments.
-   Configure notifications for alerts like payment reminders, new
    invoices, and more.
-   Set up and grant rolesthat give access to various CMP features.

Managed Cloud Support

Within the CMP you can resolve your cloud issues quickly with
hyper-responsive and unlimited support from DoiT International— at no
extra cost.

-   Open tickets with experienced Cloud Architects and Engineers.
-   View open or historical tickets and their statuses.
-   Share tickets with other team members.
-   Stay up to date on any known issues across all clouds you use.
Transfer Google Cloud Projects

Overview

To change the Cloud Billing account for a project, you need to be able
to move a project from your existing Cloud Billing account to another
Cloud Billing account provided by DoiT International. To accomplish this
task, you need permissions adequate to unlink the project from the
existing Cloud Billing account AND to link the project to the target
Cloud Billing account. Unfortunately, it is a manual process and
requires a repetitive, one-by-one, transfer operation for each project.
Learn more.

To make this process much faster, DoiT International developed a Project
Transfer Tool in the Cloud Managemente Platform to help you
bulk-transfer all of your existing Google Cloud projects to the billing
account assigned to you by DoiT International.

 Changing the billing account linked to a
project could disable and result in data loss for any partner-managed
services purchased through Google Cloud Marketplace. Learn more 
  

Let’s see how this is done.

Get Service Account from CMP

Start with you logging into the Cloud Management Platform, and select
‘Manage Licenses & Assets’ from the main dashboard:



Once you’re at the Assets page, please switch to the Google Cloud tab.



To transfer your projects, locate your new Google Cloud billing account
with DoiT International (doit.budgetao.com in this example), and click
on the three-dots menu on the right-hand side of the widget. Choose
‘Transfer Projects’ to start the wizard.



Acknowledge the Marketplace Apps consent and click “Start”:



After you begin the transfer process, a dedicated Google Cloud service
account will be generated to facilitate the transfer process.

Finally, copy the service account name. You will need it for the next
step.



Grant permissions to the service account

To ensure transfer wizard sees all of your projects let’s grant “Billing
Administrator” role for service account both on your current billing
account and your GCP Organization.

You can either run gcloud CLI commands as listed in the wizard:

Expand to see gcloud commands for granting the access

Or follow the detailed instructions below grant the access using GCP
Console UI.

Grant permissions for GCP Organization

-   Go to GCP Resource Manager
-   Select your organization
-   On the permissions info panel on the right, add the service account
    email as Billing Administrator Administrator





Grant permissions for Billing Account

Per the instructions from the image above, we’ll need to add the service
account to your Google Cloud Organization IAM Policy with the “Billing
Administrator” role.

First, navigate to your Google Cloud Console and click on “Billing”



Next, click on “Manage Billing Accounts”



Make sure your organization is selected. Then select the billing account
you want to edit.



In the Billing Overview screen, select “Manage” on the right.



Then, click the “Show Info” panel at the top-right to manage billing
account members. From there, click “Add Member”.



Finally, paste the service account you copied earlier from the CMP
Project Transfer tool and add the “Billing Account Administrator” role
as shown below. Then click “Save”.



If you do not add the service account to your Google Cloud Organization
IAM, the following error will appear.

 If you incorrectly add the service account to
one of your Google Project IAM and not the Organization IAM, the
following error will appear: Service Account Not Found in Organization
IAM. 

 If you don’t have access to your Google Cloud
Organization IAM, the Transfer Tool will provide you with a command you
can send to your colleague who has the Organization IAM permission. 
  

Transfer your Projects

Select the projects you want to transfer to your new Google Cloud
Billing Account with DoiT International.



By clicking the > button, the selected projects are designated to be
transferred. Review the list of projects you intend to transfer,
validate it and click ‘Finish’.



The confirmation page informs you of how many projects were transferred,
and by selecting the ‘Click here’ button you can retrieve the full list
of transferred projects as they will be copied to your clipboard.



Congrats! You have successfully reassigned your existing Google Cloud
projects to your new billing account with DoiT International! Well done!

Partial Transfers

If some or all of your projects don’t transfer successfully, you will
see a discrepancy when you complete your transfer process between the
number of projects successfully transferred and the total number of
projects you attempted to transfer.

If some of your projects transferred, this is the message you will see.



If none of your projects were successfully transferred, you will see
this message.



Troubleshooting

All / Some Projects Don’t Transfer Successfully

There are a few “edge case” situations in which some or all of your
Google Cloud projects won’t transfer successfully:

1.  The project(s) is associated with another Google Organization that
    the service account doesn’t have an access to.
2.  The origin billing account is not under the Organization the service
    account has permissions to.

To identify which project(s) didn’t transfer successfully, click on the
hyperlinked “Click here” in the pop-up shown above. This will copy to
clipboard all of the projects you attempted to transfer, as well as
their statuses.

Here is an example output:

    project-id-1, success
    project-id-2, success
    project-id-3, error-code

From here you can troubleshoot the project(s) that have “error-code” for
one of the two “edge case” situations we described above.

Accidentally Added Service Account at the Project Level

As mentioned above, you will get an error if you add your service
account to at the Project level and not the Organization level. The
error will look something like: “Service Account Not Found in
Organization IAM”

To fix the situation please grant the service account Billing Account
Admin role at the Organization level as described above and try again.

Video

The following video shows you how to Transfer Google Cloud Projects.

 embed
url=“https://www.loom.com/share/c93a3375cbf447a7ae7027ffb9095973” 
Billing Export

 Customers willing to export their Google Cloud
billing data are advised to Set up Cloud Billing data export to
BigQuery. Note, you will need to have a Billing Account Administrator
role for the target Cloud Billing account. 

Cloud Management Platform can automatically export detailed billing data
(such as usage, cost estimates, and pricing data) to a BigQuery table.
Then you can access your billing data from BigQuery for detailed
analysis or use a tool such as Looker to visualize your data.

 Request Access - You will need to request
access to the billing export table by opening a support request at
https://support.doit-intl.com. Please provide your Google user, a Google
group, or a service account you’d like to use when querying the billing
export table 

Data Availability

-   Your billing export table has Cloud Billing data incurred from the
    date you’ve joined the DoiT International consolidated billing.
-   BigQuery loads are ACID compliant, so if you query the BigQuery
    Cloud Billing export table while data is being loaded into it, you
    will not encounter partially loaded data.

Project, Dataset, and Table Name

To query the Google Cloud Billing data in BigQuery, you need to specify
the table name in the FROM clause. The table name is determined using
three values: project.dataset.BQtablename.

-   Project is always doitintl-cmp-gcp-data
-   dataset is gcpbilling concatenated with the name of your Google
    Billing account. Dashes in the billing account ID should be replaced
    with underscores. For example, if your Google Billing Account ID is
    006C3F-3613C3-2A2169, the dataset name would be
    gcpbilling006C3F3613C32A2169
-   BQtablename is gcpbilling

Table Configuration

Please review the table partitioning and clustering schema to allow
query optimization

  ---------------------- --------------------------------------------------
  Table type             Partitioned
  Partitioned by         Day
  Partitioned on field   exporttime
  Partition filter       Required
  Clustered by           projectid, servicedescription, skudescription
  ---------------------- --------------------------------------------------

Sample Queries

This query shows the invoice total for each month since Jan 2020, as a
sum of regular costs, credits, adjustments, and rounding errors.

    SELECT
      DATETRUNC(DATE(usagestarttime, "America/LosAngeles"), MONTH) AS month,
      (SUM(cost)) - (SUM((
          SELECT
            SUM(credit.amount)
          FROM
            UNNEST(credits) AS credit))) AS cost
    FROM
      `doitintl-cmp-gcp-data.gcpbilling006C3F3613C32A2169.gcpbilling`
    WHERE
      DATE(exporttime) >= "2020-01-01"
    GROUP BY
      month
Backfill Historical Billing Data

Overview

This feature enables you to upload all your historical Google Cloud
billing data into DoiT Cloud Management Platform (CMP) to immediately
analyze your cloud spend and promptly identify optimization
opportunities through Cloud Analytics, BigQuery Lens, and other CMP
features.

To get started, first, you need to ensure that you have a Service
Account that connects your Google Cloud Organization to CMP. Then,
you’ll have to grant two additional required permissions.

Step 1. Identify the service account linked to CMP

1.  From CMP’s left side navigation menu, click “Settings”
2.  Select “Google Cloud” tab
3.  Locate the “Service Account” listed in Configured Accounts



If you do not have this configured yet, you need to create a service
account and connect CMP to your Google Cloud Organization. Follow the
steps in this link: Connect Google Cloud Service Account

Once you have identified the service account, copy the service account
email and proceed to granting it with the the additional required
permissions.

Step 2. Grant the required Permissions

 You need to have the appropriate IAM
role/permission in GCP to grant the required permissions to the service
account 

  Grant the BigQuery Data Viewer role

1.  From GCP, navigate to the BigQuery Console and open the dataset
    where the billing data is stored, then click “Share dataset”
2.  In the Dataset Permissions tab, click “Add Member” and paste the
    service account email that was linked to CMP as identified in Step
    1.
3.  Click “Select a Role” highlight BigQuery then choose BigQuery Data
    Viewer
4.  Click “Add”
5.  Click “Done”





Step 3. Link your Google Cloud Direct Billing Account

 Required Permission: CMP Assets Manager or CMP
Admin ? 

1.  From CMP’s left side navigation menu, click “Assets”
2.  Select “Google Cloud” tab
3.  Click the dropdown button next to “New Billing Account” and select
    “Link Direct Account”



You can now import your historical billing data into CMP. You need the
following information to complete the process:

-   Billing Account ID: example “01CF51-9FDB87-7894FD”
-   Source Project: Enter the “Project ID”
-   Source Dataset: Enter the “Dataset ID”



Once you click “Import” a new card will be added to your assets
reflecting the details and progress or completion status.




Create Google Billing Account

Overview

The Cloud Billing accounts are used to define who pays for a given set
of Google Cloud resources and Google Maps Platform APIs. Access control
to a Cloud Billing account is established by IAM roles. A Cloud Billing
account is connected to a DoiT International billing profile.

Use these instructions to create a Google Cloud Billing Account and link
it to your company’s billing profile using the Cloud Management
Platform.

 Required Permissions: Assets Manager   


 Please note: Your user account must be linked
to at least one billing profile in the Cloud Management Platform. 
  

Create a new Billing Account

Start with you logging into the Cloud Management Platform, and select
Manage Licenses & Assets from the main dashboard:



Once you’re at the Assets page, switch to the Google Cloud tab and
select New Billing Account, located on the right-hand side of the page.



You will be prompted with a pop-up requesting you to enter your Google
Billing Account Name, Billing Profile, and the email addresses of
designated Billing Account Administrators.



After a few seconds, you should now see the new billing account:



 Your domain is added as a Billing Account User
on the new Billing Accounts you create in thr CMP. This allows anyone on
the domain to link projects to the billing account. 

The following video shows you how to create a Google Cloud Billing
Account.

 embed
url=“https://www.loom.com/share/c2b1e2fe55204fa9aa7bafe7a3cc8c06” 
Google Cloud Quotas

Google Compute Engine enforces quotas on resource usage for a variety of
reasons; i.e., quotas protect the community of Google Cloud users by
preventing unforeseen spikes in usage. As your use of Google Cloud
expands over time, your quotas may increase accordingly as not all
projects have the same quotas.

The Cloud Management Platform offers quota monitoring, so when you hit
the 80 of your quota threshold, we will notify you ahead of time; you
can then increase the limits before usage is blocked. In order to start
receiving automatic notifications prior to reaching your Google Cloud
quotas, your Google Cloud account must be successfully connected.

To use Google Cloud Quotas, you must verify that your service account
was successfully uploaded and granted the appropriate permissions. You
can read more on how to configure your Google Cloud accounts at Connect
Your Google Cloud Organization.

If successful, you will see:

-   Either a Healthy or Partial value underneath the Status column
    in your Configured Accounts widget
-   Healthy status next to “Core” under the Features widget.

Once that’s been set up, you can add the ‘Google Cloud Quotas’ widget to
any of your dashboards within the Cloud Management Platform. You will
also start receiving the email notifications as you get close or reach
the quotas.

Navigate to the dashboard you’d like to add the widget to, locate the
‘Add Widgets’ button and search for ‘Google Cloud Quotas’, and add the
widget to your dashboard.

To request a quota increase, click on the ‘Modify’ button, and read the
instructions in the Google Cloud documentation.

We are constantly working on monitoring as many quotas as possible.
Right now, here is the list of quotas we support:

Project-based Quotas:

    SNAPSHOTS
    NETWORKS
    FIREWALLS
    IMAGES
    STATICADDRESSES
    ROUTES
    FORWARDINGRULES
    TARGETPOOLS
    HEALTHCHECKS
    INUSEADDRESSES
    TARGETINSTANCES
    TARGETHTTPPROXIES
    URLMAPS
    BACKENDSERVICES
    INSTANCETEMPLATES
    TARGETVPNGATEWAYS
    VPNTUNNELS
    BACKENDBUCKETS
    ROUTERS
    TARGETSSLPROXIES
    TARGETHTTPSPROXIES
    SSLCERTIFICATES
    SUBNETWORKS
    TARGETTCPPROXIES
    SECURITYPOLICYRULES
    PACKETMIRRORINGS
    NETWORKENDPOINTGROUPS
    INTERCONNECTS
    GLOBALINTERNALADDRESSES
    VPNGATEWAYS
    MACHINEIMAGES
    SECURITYPOLICYCEVALRULES
    EXTERNALVPNGATEWAYS
    PUBLICADVERTISEDPREFIXES
    PUBLICDELEGATEDPREFIXES
    STATICBYOIPADDRESSES

Region-based Quotas:

    CPUS
    DISKSTOTALGB
    STATICADDRESSES
    INUSEADDRESSES
    SSDTOTALGB
    LOCALSSDTOTALGB
    INSTANCEGROUPS
    INSTANCEGROUPMANAGERS
    INSTANCES
    AUTOSCALERS
    REGIONALAUTOSCALERS
    REGIONALINSTANCEGROUPMANAGERS
    PREEMPTIBLECPUS
    NVIDIAK80GPUS
    COMMITTEDCPUS
    COMMITTEDLOCALSSDTOTALGB
    COMMITMENTS
    NETWORKENDPOINTGROUPS
    INTERNALADDRESSES
    NVIDIAP100GPUS
    PREEMPTIBLELOCALSSDGB
    PREEMPTIBLENVIDIAK80GPUS
    PREEMPTIBLENVIDIAP100GPUS
    NVIDIAP100VWSGPUS
    NVIDIAV100GPUS
    NVIDIAP4GPUS
    NVIDIAP4VWSGPUS
    NODEGROUPS
    NODETEMPLATES
    PREEMPTIBLENVIDIAV100GPUS
    PREEMPTIBLENVIDIAP4GPUS
    PREEMPTIBLENVIDIAP100VWSGPUS
    PREEMPTIBLENVIDIAP4VWSGPUS
    INTERCONNECTATTACHMENTSPERREGION
    INTERCONNECTATTACHMENTSTOTALMBPS
    RESOURCEPOLICIES
    INUSESNAPSHOTSCHEDULES
    NVIDIAT4GPUS
    NVIDIAT4VWSGPUS
    PREEMPTIBLENVIDIAT4GPUS
    PREEMPTIBLENVIDIAT4VWSGPUS
    INUSEBACKUPSCHEDULES
    PUBLICDELEGATEDPREFIXES
    COMMITTEDNVIDIAK80GPUS
    COMMITTEDNVIDIAP100GPUS
    COMMITTEDNVIDIAP4GPUS
    COMMITTEDNVIDIAV100GPUS
    COMMITTEDNVIDIAT4GPUS
    C2CPUS
    N2CPUS
    COMMITTEDN2CPUS
    COMMITTEDC2CPUS
    RESERVATIONS
    COMMITTEDLICENSES
    N2DCPUS
    COMMITTEDN2DCPUS
    STATICBYOIPADDRESSES
    AFFINITYGROUPS
    NVIDIAA100GPUS
    PREEMPTIBLENVIDIAA100GPUS
    COMMITTEDNVIDIAA100GPUS
    A2CPUS
    COMMITTEDA2CPUS
Bulk Transfer using Wizard

This guide will instruct you how to switch billing for large amount of
GCP projects en masse.

 Please mind the Google Marketplace note. 
  

Get Service Account from CMP

Start with you logging into the Cloud Management Platform, and select
‘Manage Licenses & Assets’ from the main dashboard:



Once you’re at the Assets page, please switch to the Google Cloud tab



To transfer your projects, locate your new Google Cloud billing account
with DoiT International (doit.budgetao.com in this example), and click
on the three-dots menu on the right-hand side of the widget. Choose
‘Transfer Projects’ to start the wizard.



Acknowledge the Marketplace Apps consent and click “Start”:



After you begin the transfer process, a dedicated Google Cloud service
account will be generated to facilitate the transfer process.

Finally, copy the service account name. You will need it for the next
step.



Grant permissions to the service account

To ensure transfer wizard sees all of your projects let’s grant “Billing
Account Administrator” role for the service account both on your current
billing account and your GCP Organization.

You can either run gcloud CLI commands as listed in the wizard:

Expand to see gcloud commands for granting the access

Or follow the detailed instructions below grant the access using GCP
Console UI.

Grant permissions for GCP Organization

-   Go to GCP Resource Manager
-   Select your organization
-   On the permissions info panel on the right, add the service account
    email as Billing Administrator Administrator





Grant permissions for Billing Account

Per the instructions from the image above, we’ll need to add the service
account to your Google Cloud Organization IAM Policy with the “Billing
Administrator” role.

First, navigate to your Google Cloud Console and click on “Billing”



Next, click on “Manage Billing Accounts”



Make sure your organization is selected. Then select the billing account
you want to edit.



In the Billing Overview screen, select “Manage” on the right.



Then, click the “Show Info” panel at the top-right to manage billing
account members. From there, click “Add Member”.



Finally, paste the service account you copied earlier from the CMP
Project Transfer tool and add the “Billing Account Administrator” role
as shown below. Then click “Save”.



If you do not add the service account to your Google Cloud Organization
IAM, the following error will appear.

 If you incorrectly add the service account to
one of your Google Project IAM and not the Organization IAM, the
following error will appear: Service Account Not Found in Organization
IAM. 

Transfer your Projects

Select the projects you want to transfer to your new Google Cloud
Billing Account with DoiT International.



By clicking the > button, the selected projects are designated to be
transferred. Review the list of projects you intend to transfer,
validate it and click ‘Finish’.



The confirmation page informs you of how many projects were transferred,
and by selecting the ‘Click here’ button you can retrieve the full list
of transferred projects as they will be copied to your clipboard.



Congrats! You have successfully reassigned your existing Google Cloud
projects to your new billing account with DoiT International! Well done!

Partial Transfers

If some or all of your projects don’t transfer successfully, you will
see a discrepancy when you complete your transfer process between the
number of projects successfully transferred and the total number of
projects you attempted to transfer.

If some of your projects transferred, this is the message you will see.



If none of your projects were successfully transferred, you will see
this message.



Troubleshooting

All / Some Projects Don’t Transfer Successfully

There are a few “edge case” situations in which some or all of your
Google Cloud projects won’t transfer successfully:

1.  The project(s) is associated with another Google Organization that
    the service account doesn’t have an access to.
2.  The origin billing account is not under the Organization the service
    account has permissions to.

To identify which project(s) didn’t transfer successfully, click on the
hyperlinked “Click here” in the pop-up shown above. This will copy to
clipboard all of the projects you attempted to transfer, as well as
their statuses.

Here is an example output:

    project-id-1, success
    project-id-2, success
    project-id-3, error-code

From here you can troubleshoot the project(s) that have “error-code” for
one of the two “edge case” situations we described above.

Accidentally Added Service Account at the Project Level

As mentioned above, you will get an error if you add your service
account to at the Project level and not the Organization level. The
error will look something like: “Service Account Not Found in
Organization IAM”

To fix the situation please grant the service account Billing Account
Admin role at the Organization level as described above and try again.

Video

The following video shows you how to Transfer Google Cloud Projects.

 embed
url=“https://www.loom.com/share/35299f0634e849a2821155c7488faedd” 
Transfer manually

 Please mind the Google Marketplace note. 
  

Please follow the below steps to switch your Google Cloud projects to
use DoiT-provided billing account.

The steps

-   Go to https://console.cloud.google.com/billing
-   Make sure your organization is selected and then click on your the
    billing account from the list



-   Click on Manage



-   The list of your Google Cloud projects currently linked to this
    billing account will be displayed. For each of the projects, click
    on the three-dots menu and select “Change billing”



-   In the popup modal, pleaes select the new billing account provided
    to you by DoiT International



-   Repeat for each projects on the list

Within an hour, your transferred projects will appear in DoiT Cloud
Management Platform.



Troubleshooting

I don’t see any billing accounts in my Google Cloud Organization

Make sure you have Billing Account Administrator permissions on your
billing account in question. Please contact your Google Cloud
administrator if you believe you don’t.

I can’t change billing for the projects listed

To change billing account for a project you need to have proper
permissions on the project itself. Usually having Billing Account
Administrator on your whole Google Cloud Organization or the project in
question is enough.

While trying to select a new Billing Account no DoiT billing accounts
appear on the list

Make sure you have access to the target Billing Account. To verify,
please go to hello.doit-intl.com and check if your name is on the list:



If it’s not, please contact one of the persons who are on the list to
add you.
Transfer Google Cloud Projects

Overview

To change the Cloud Billing account for a project, you need to be able
to move a project from your existing Cloud Billing account to another
Cloud Billing account provided by DoiT International. To accomplish this
task, you need permissions adequate to unlink the project from the
existing Cloud Billing account AND to link the project to the target
Cloud Billing account.

 If you have Google Cloud Marketplace
subscriptions for any of the below products - please reach out to your
DoiT Account Manager - switching billing account for projects that use
these products may result in data loss.

The products in question are

-   Confluent Apache Kafka on Confluent Cloud
-   Neo4j GCP Integration Service (Prod)
-   Redis Labs Redis Enterprise Cloud
-   Trifacta Cloud Dataprep by Trifacta
-   DataStax Astra for Apache Cassandra (Beta)
-   Elastic Cloud (managed Elasticsearch Service)
-   NetApp, Inc. NetApp Cloud Volumes Service
-   MongoDB Atlas 

Transferring manually

If you have several dozens of GCP projects or less, the simplest way is
to switch billing manually for each of the projects one by one. We’ve
created screenshot-illustrated guide to walk you through.

Bulk Transfer using Wizard

For large amount of projects the manual transfer can be too tedious. To
make this process much faster, DoiT International developed a Project
Transfer Wizard in the Cloud Management Platform to help you
bulk-transfer all of your existing Google Cloud projects to the billing
account assigned to you by DoiT International.

Please follow the guide here.
Link Google Cloud Organization

In order to use many of the functionalities available to you within the
Cloud Management Platform, we request an extra set of permissions,
depending on the features you’d like to use. These permissions allow us
to access the Google API and obtain information for monitoring or
alerts, and/or help you take action on recommendations.

To grant these permissions, you will need to create a Google Cloud
Service Account, set up a Google Cloud IAM Role at the organization
level, and upload the key to the Cloud Management Platform. In this
article, we’ll go over how to do all of the above.

 Required Permissions: Manage Settings   


Create Google Service Account

To create a Google Cloud Service account, please execute the following
steps:

1.  Open Cloud Management Platform
2.  Navigate to the Settings icon in your lefthand navigation panel
3.  Check the features you’d like to enable within the CMP
4.  Review the permissions each service request (by expanding the card)
5.  Click on “Create Service Account”



Next, a slide-out will appear on the right side of your screen,
containing all of the Google SDK (gcloud) commands you need to run in
order to create the service account and set it up with the correct role.

Before executing the gcloud commands, ensure that you have selected an
appropriate project to create your service account. The project should
be one that you are planning to keep long-term and that will only be
accessible by only trusted people.

Next, copy the commands generated above and run them sequentially in
your terminal or Google Cloud Shell.

 The gcloud commands vary according to the boxes
of the features you checked 



Once you finished to run the gcloud commands, you can download the key
in the JSON file for your new service account.

Downloading the key from the terminal

 The gcloud command achieve the following: the
service account is created in one of the projects in your organization,
and then the permissions for this service account are given on the
organization level. 

Congrats! You have now created a new “doitcmprole” linked to the “DoiT
CMP Service Account”, under your organisation.



Upload the Service Account Key

Whether you’ve generated your service account key, your next step is to
upload the JSON file to the CMP by clicking on “Upload File”.

If configured successfully, you should see a “Healthy” or “Partial”
value appear under the “Status” column in the “Configured Accounts”
widget.

“Partial” will only appear next to your configured service account if
you didn’t grant permissions for all of the available features. What’s
important in this case is to examine the “Features” widget and verify
that all of the features you selected have a “Healthy” status.

If there is something wrong with the JSON file you uploaded, you will
see an “Unhealthy” value under the “Status” column.



Updating your Service Account

If, after initially connecting your Google Cloud Organization, you
decide that you want to grant permissions for an additional feature — or
remove permissions — you can do that easily from the same page.

First, check or uncheck the feature(s) you’d like to add or remove. Then
click on “Update Role”.



A slide-out will appear containing the gcloud commands you need to run
to update your service account’s role so that permissions corresponding
to the feature you checked or unchecked are added or removed,
respectively.



Adding Multiple Service Accounts

In the very rare event that you have multiple Google Cloud
Organizations, you can upload multiple service account keys to regulate
which Organizations get access to which features.

To add a new service account, click on the “+” icon in the top-right
corner of the Configured Accounts widget.



Once clicked, notice that all of the Features will revert back to “Not
Configured” since you are setting up a new service account.

As you did with your initial service account, select the features you’d
like to grant permissions for this service account, and run the gcloud
commands provided.

Check out the bite-sized video below for a closer look at connecting
your Google Cloud Organization to CMP.

 embed
url=“https://www.loom.com/share/55c2fd9dbde74ac6bd2d3ac7e8c8bd45?sharedAppSource=teamlibrary”

Import Historical Data

Overview

This feature enables you to upload all your historical Google Cloud
billing data into DoiT Cloud Management Platform (CMP) to immediately
analyze your cloud spend and promptly identify optimization
opportunities through Cloud Analytics, BigQuery Lens, and other CMP
features.

To get started, first, you need to ensure that you have a Service
Account that connects your Google Cloud Organization to CMP. Then,
you’ll have to grant two additional required permissions.

Step 1. Identify the service account linked to CMP

1.  From CMP’s left side navigation menu, click “Settings”
2.  Select “Google Cloud” tab
3.  Locate the “Service Account” listed in Configured Accounts



If you do not have this configured yet, you need to create a service
account and connect CMP to your Google Cloud Organization. Follow the
steps in this link: Connect Google Cloud Service Account

Once you have identified the service account, copy the service account
email and proceed to granting it with the the additional required
permissions.

Step 2. Grant the required Permissions

 You need to have the appropriate IAM
role/permission in GCP to grant the required permissions to the service
account 

  Grant the BigQuery Data Viewer role

1.  From GCP, navigate to the BigQuery Console and open the dataset
    where the billing data is stored, then click “Share dataset”
2.  In the Dataset Permissions tab, click “Add Member” and paste the
    service account email that was linked to CMP as identified in Step
    1.
3.  Click “Select a Role” highlight BigQuery then choose BigQuery Data
    Viewer
4.  Click “Add”
5.  Click “Done”





  Grant the bigquery.jobs.create permission

  Depending on the features initially enabled from the process Connect
  Google Cloud Service Account, you may already have this permission
  granted to the role. Follow the steps below to verify / add the
  permission to the project.

1.  From the GCP console, select your organization from the dropdown
    options
2.  On the navigation menu, go to “IAM & Admin” then select “Roles”
3.  Click on the role “DoiT CMP Service Account”
4.  Check if bigquery.jobs.create is included in the assigned
    permissions, if yes, no further action is needed since these
    permissions will be inherited by the projects
5.  If bigquery.jobs.create permission is not yet added, click on “Edit
    Role”
6.  Click “Add Permissions”
7.  Filter by “Permission : bigquery.jobs.create” and check the box for
    this permission
8.  Click “Add”









Step 3. Link your Google Cloud Direct Billing Account

 Required Permission: CMP Assets Manager 
  

1.  From CMP’s left side navigation menu, click “Assets”
2.  Select “Google Cloud” tab
3.  Click the dropdown button next to “New Billing Account” and select
    “Link Direct Account”



You can now import your historical billing data into CMP. You need the
following information to complete the process:

-   Billing Account ID: example “01CF51-9FDB87-7894FD”
-   Source Project: Enter the “Project ID”
-   Source Dataset: Enter the “Dataset ID”



Once you click “Import” a new card will be added to your assets
reflecting the details and progress or completion status.




View Cost Anomalies

Cloud cost anomaly detection offers end-to-end monitoring of spikes in
your Google Cloud or Amazon Web Services billing, seamlessly, across all
your projects and services.

At the core of our cost anomaly detection service is our
machine-learning algorithm. It works by monitoring billing data and
analyzing the trend of spending in your environment. In addition, the
machine learning model identifies billing patterns across many
customers, forecasting your cloud spending, and constantly improving
itself to provide even more accurate results.

Essentially, billing records that don’t align with your anticipated
spending behavior are identified for its deviation from the established
patterns. You can also get insights into which resources are causing the
anomalies and take corrective actions. Our anomaly detection engine is
always running, however, you can opt to get email notifications, to get
near-real-time email alerts on detected anomalies.

Manage anomaly notifications

To manage your notifications, click on the “Identity & Access” icon in
your lefthand navigation panel.



Next, select your user from the users list.

Navigate to the “Notifications” tab. If you’d like to be notified of
potential anomalies, check the “Cloud Cost Anomalies” box and then set
the minimum severity threshold you’d like to be alerted on.



By default, the threshold for email alerts is set to ‘Warning’, however,
you can overwrite it to reduce the number of emails you receive over
time.

We are also storing all detected cost anomalies under the ‘Cost
Anomalies’ page to filter/search events and zoom in on a specifically
detected anomaly. Once located, you can click on ‘View’ to inspect the
details of a detected anomaly.

View anomalies

In the Profile dialog, you will find the ‘Cost Anomalies’ notification
setting. Once you enable notifications on Cost Anomalies, you will be
prompted to choose the threshold of the alerts you’re interested in
receiving from us:



Below you can see an example of a detected anomaly and the spike as
shown in the chart. We will also display the top three SKUs, in terms of
cost, that relate to the spike. That way you can better understand what
is driving the detected anomaly with minimal effort.

Detected anomaly where the "BigQuery - Analysis" SKU is the culprit

Investigate anomalies further

If you’d like to dive deeper into an anomaly, click on “Investigate” to
launch a pre-configured Cloud Analytics Report. This lets you to zoom in
on a specific anomaly and determine whether any action is needed.

Investigating a detected anomaly in a Cloud Analytics Report

Fine-tune alerts with direct feedback

To further assist with the learning of our machine-learning model, and
reduce the number of false alerts, you can provide feedback for any type
of alert, and mark it thumbs-up or thumbs-down.



Anomalies Widget

View the bite-sized video below for a closer look at Anomaly Detection.

 embed
url=“https://www.loom.com/share/c5005c6d4af9468f9df0b00ca5f43655” 
AWS Quota Monitoring

Amazon Web Services maintains service limits on each AWS account to help
guarantee the availability of AWS resources, as well as to minimize
billing risks for the customers.

 You must have AWS Business or Enterprise
Support in order to use this feature. 

However, when you launch a new workload or need additional resources
within the existing workloads, you may receive an error message similar
to this one.



 Note: This error is related to the AWS Elastic
IP service limits but you may experience service limit error related to
another AWS service. 

For circumstances like these, we’ve added Service Limit and Quota
Monitoring to the Cloud Management Platform. Once you link an Amazon Web
Services IAM Role to the CMP with the requisite permissions for Quota
Monitoring, you will receive automatic notifications whenever you hit
the 80 threshold of your AWS service limits.

Setting up requisite permissions for Quota Monitoring

 Read this article to see how to link your AWS
IAM Role, and specifically this section to see how to give the requisite
permissions for AWS Quota Monitoring. 

Adding the Quotas widget to your dashboard

Once set up, you can add the ‘Amazon Web Services Quotas’ widget to any
of your dashboards within the Cloud Management Platform. You will also
start receiving the email notifications as you get close or reach the
service limits.

To do so, first go to the dashboard you’d like to add the widget to.
Then, locate the ‘Add Widgets’ button in the lower-right corner of your
screen and find the ‘Amazon Web Services Quotas’ option.



Finally, click on the widget option to add it as a widget to your
dashboard.



To request a quota increase, click on the ‘Modify’ button and read the
instructions provided by AWS in their documentation of service quotas.

Monitored Services:

-   Low Utilization Amazon EC2 Instance
-   Idle Load Balancers
-   Underutilized Amazon EBS Volume
-   Unassociated Elastic IP Address
-   Security Groups - Specific Port
-   Security Groups - Unrestricted
-   IAM Use
-   Amazon S3 Bucket Permissions
-   MFA on Root Account
-   IAM Password Policy
-   Amazon RDS Security Group Access
-   Amazon EBS Snapshots
-   Amazon EC2 Availability Zone Balance
-   Load Balancer Optimization
-   VPN Tunnel Redundancy
-   High Utilization Amazon EC2 Instance
-   Auto Scaling Group Resources
-   Amazon RDS Backups
-   Amazon RDS Multi-AZ
-   Auto Scaling Group Health Check
-   Amazon S3 Bucket Logging
-   Amazon EBS Provisioned IOPS (SSD) Volume Attachment Configuration
-   Large Number of Rules in an EC2
-   Large Number of EC2 Security Group Rules Applied to an Instance
-   Amazon RDS Idle DB Instances
-   Amazon Route 53 Alias Resource Record Sets
-   Amazon Route 53 Name Server Delegations
-   Amazon Route 53 High TTL Resource Record Sets
-   Overutilized Amazon EBS Magnetic Volumes
-   CloudFront Content Delivery Optimization
-   Amazon Route 53 Latency Resource Record Sets
-   Amazon Route 53 MX Resource Record Sets and Sender Policy Framework
-   Amazon Route 53 Failover Resource Record Sets
-   Amazon Route 53 Deleted Health Checks
-   AWS CloudTrail Logging
-   ELB Listener Security
-   ELB Security Groups
-   ELB Cross-Zone Load Balancing
-   ELB Connection Draining
-   CloudFront Header Forwarding and Cache Hit Ratio
-   CloudFront Custom SSL Certificates in the IAM Certificate Store
-   CloudFront SSL Certificate on the Origin Server
-   Amazon EC2 to EBS Throughput Optimization
-   CloudFront Alternate Domain Names
-   IAM Access Key Rotation
-   Exposed Access Keys
-   Underutilized Amazon Redshift Clusters
-   Amazon EC2 Reserved Instance Lease Expiration
-   Amazon S3 Bucket Versioning
-   AWS Direct Connect Connection Redundancy
-   AWS Direct Connect Location Redundancy
-   AWS Direct Connect Virtual Interface Redundancy
-   Amazon Aurora DB Instance Accessibility
-   PV Driver Version for EC2 Windows Instances
-   EC2Config Service for EC2 Windows Instances
-   Amazon EBS Public Snapshots
-   Amazon RDS Public Snapshots
-   EC2 On-Demand Instances
-   SES Daily Sending Quota
-   EBS Provisioned IOPS (SSD) Volume Aggregate IOPS
-   EBS Provisioned IOPS SSD (io1) Volume Storage
-   EBS Active Volumes
-   EBS Active Snapshots
-   EBS General Purpose SSD (gp2) Volume Storage
-   EBS Magnetic (standard) Volume Storage
-   EC2 Elastic IP Addresses
-   EC2 Reserved Instance Leases
-   Kinesis Shards per Region
-   CloudFormation Stacks
-   Auto Scaling Launch Configurations
-   Auto Scaling Groups
-   VPC
-   VPC Internet Gateways
-   VPC Elastic IP Address
-   IAM Instance Profiles
-   IAM Roles
-   IAM Policies
-   IAM Users
-   IAM Server Certificates
-   IAM Group
-   ELB Classic Load Balancers
-   RDS Cluster Roles
-   RDS Cluster Parameter Groups
-   RDS Clusters
-   RDS Reserved Instances
-   RDS Subnets per Subnet Group
-   RDS Subnet Groups
-   RDS Option Groups
-   RDS Event Subscriptions
-   RDS DB Manual Snapshots
-   RDS Total Storage Quota
-   RDS DB Parameter Groups
-   RDS Read Replicas per Master
-   RDS DB Security Groups
-   RDS DB Instances
-   RDS Max Auths per Security Group
-   EBS Throughput Optimized HDD (st1) Volume Storage
-   EBS Cold HDD (sc1) Volume Storage
-   DynamoDB Read Capacity
-   DynamoDB Write Capacity
-   Route 53 Max Health Checks
-   Route 53 Hosted Zones
-   Route 53 Reusable Delegation Sets
-   Route 53 Traffic Policies
-   Route 53 Traffic Policy Instances
-   ENA Driver Version for EC2 Windows Instances
-   NVMe Driver Version for EC2 Windows Instances
-   Amazon EC2 Reserved Instances Optimization
-   ELB Application Load Balancers
-   ELB Network Load Balancers
AWS Cost Allocation Tags

We have enabled the following user-defined tags (case sensitive) across
our AWS consolidated billing accounts.

User-defined cost allocation tags

    Alias
    alias
    Billing
    billing
    Env
    env
    Environment
    environment
    Name
    Owner
    owner
    Product
    product
    Project
    project
    team
    Team
    unit
    Unit
    gluejob
    service-name
    kubernetes.io/service-name

AWS-generated cost allocation tags

    aws:cloudformation:stack-name   
    aws:createdBy   
    aws:cloud9:owner    
    aws:cloudformation:logical-id   
    aws:cloud9:environment  
    aws:cloudformation:stack-id 
    aws:backup:source-resource  
    aws:ec2launchtemplate:id    
    aws:transfer:customHostname 
    aws:elasticmapreduce:job-flow-id    
    aws:servicecatalog:provisioningPrincipalArn 
    aws:ecs:serviceName 
    aws:elasticfilesystem:default-backup    
    aws:ec2launchtemplate:version   
    aws:elasticmapreduce:instance-group-role    
    aws:servicecatalog:productArn   
    aws:dlm:lifecycle-schedule-name 
    aws:servicecatalog:portfolioArn 
    aws:autoscaling:groupName   
    aws:ec2spot:fleet-request-id    
    aws:servicecatalog:source   
    aws:zocalo:alias    
    aws:ssmmessages:session-id  
    aws:ec2:fleet-id    
    aws:ecs:clusterName 
    aws:dlm:lifecycle-policy-id 
    aws:ssmmessages:target-id   
    aws:eks:cluster-name    
    aws:elasticmapreduce:editor-id  
    aws:dlm:expirationTime  
    aws:transfer:route53HostedZoneId

Ideally, you will be using one of these tags to track your AWS cost
allocations. If you need a custom cost allocation tag, please open a
support ticket using http://support.doit-intl.com

For more information about cost allocation tags, please read this post
about Cost Allocation Tags in AWS’s documentation.
Create An AWS Account

As a customer, you can create a new AWS account directly from the Cloud
Management Platform.

 Please note you must be assigned access to
the specific Billing Profile under which the domain is managed in order
to create a new account. 

 You will see an OrganizationAccountAccessRole
in the new AWS account. This role is created by AWS and links back to
the parent account. When creating the account we will use this role to
create the CloudHealth IAM Role. The CMP or DoiT International will not
use this role afterwards and you will have to manually remove this role
from your account 

Start with you logging into the Cloud Management Platform, and Access
the ‘Create AWS Account’ from the menu on the left-hand side of the page
and clicking on Assets.



On the right-hand side of the page, click the bottom facing arrow and
choosing ‘Create Account’.



Choose the Billing Profile to which you’re creating the account for
while choosing the name of the account to which the root email is
associated with.



Click ‘Create’ and a popup will appear that the account was created
successfully.



As listed in the popup, an email is sent out for further instructions,
here is an example.



The following video shows you how to create an AWS Account.

 embed
url=“https://www.loom.com/share/f92b0a76aa884a52ad9281f0736f44a1” 

If you require further assistance please contact our support team at
support.doit-intl.com
Invite Existing AWS Account

You can add existing AWS accounts to DoiT International’s consolidated
billing using the Cloud Management Platform.

 Required Permission: Licenses Manager   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to invite an existing account. 

Start with you logging into the Cloud Management Platform, and select
the ‘Invite AWS Account’ from the menu on the left-hand side of the page
and clicking on Assets.



Once you’re at the Assets page, go to the right-hand side of the page
and click on ‘Invite Account’.



Choose the Billing Profile to which you’d like to have the existing AWS
account now be a part of. Enter the 12-digit AWS Account ID and any
optional notes before clicking ‘Invite’.



An email will be sent on behalf of AWS.



If within five minutes you haven’t received the above email, please
re-enter your AWS Account ID in the DoiT Cloud Management Platform and
invite once again.

To complete the process, sign in to the AWS Organizations Console. On
the Invitations page in the console, you can see your open invitations
to join organizations. Finally, click the “Accept” button to accept the
invitation.



Afterward, you will be redirected to the Organization overview page with
details about the organization that your account is now a member of. You
can view the organization’s ID and the owner’s email address.

Multiple Accounts Under a Master Organization

In the event that you have multiple accounts under a Master account /
organization, you will get an error trying to accept the invitation.

In order to successfully accept the invitation, you must remove each
linked AWS account from your master account.

 Note: This will prompt you to input payment
details for each linked account if you didn’t do so while initially
creating them. 

For each account you must:

1.  “Leave” the Organization (no new invites will appear before you do
    this)
2.  Accept the invite from DoiT International in each linked account

Completing IAM Access for CloudHealth

After signing in to the AWS Console and accepting the invitation, a
final email will be sent instructing how to complete the IAM access for
CloudHealth.



Frequently asked questions:

  I’ve performed all the requested steps, I have spends on my AWS billing account, but my information is still not there. What could be the reason ?

Once successfully completed it takes 24-72 hours for the data to start
flowing through from AWS, then our Cloud Management Platform will
update.

  I have not received any invitation email. What could have gone wrong?

1) On your organization’s page, check if you can see the invite:

Invite on your AWS Organizations page

If you can’t see that invite, check if you have left your organization
as specified in the above “Multiple Accounts Under a Master
Organization” steps.

2) If you can see the invite on the organization’s page, consider the
following:
Is the invite on your spam folder? Did you enter the correct AWS account
id when inviting the account?

If you are still having issues, you can open a support ticket

  My CloudHealth status shows as “critical” or “unknown”, what does it mean?

  My payer account is showing as N/A, what does that mean?

CloudHealth Status: Unknown.

It means that your Cloudhealth configuration was not done properly.

Actions to take: please open a support ticket if you see the CloudHealth
status as “critical” or “unknown”, or if you see Payer Account: N/A.
The consequences are the following:

-   Our Cloud Management Platform is not able to properly reflect your
    reservation data, and you cannot use the FlexRI and Spot0 services.
-   It also means you will not be able to run reports on this asset, the
    reason being that the data is not flowing to our platform.
Link your AWS Account

By linking your AWS account/s, you will unlock additional
functionalities such as proactive resource quota monitoring and more.

In order to link your AWS account(s) to the Cloud Management Platform,
you will need to create an AWS IAM Role and attach IAM Policies to it.
The policies you need to attach depend on the feature(s) you’d like to
enable.

In this article, we will go over how to create an IAM role with the
required policies 1) automatically via CloudFormation and 2) manually.

 Looking for instructions on how to set up
CloudHealth IAM role? 

 Required Permission: Manage Settings   


Both the automatic and manual set up process start with you logging into
the Cloud Management Platform, and navigating to the Settings page via
the gear icon in your lefthand navigation panel.

Then switch to the Amazon Web Services tab, and click on the “Link
Account” button.



Automatically Link AWS Account

Select the “Create a role automatically” radio button, then check the
boxes next to the features you’d like to enable for this AWS account.

To explore what AWS policies each feature requires, click the “v” button
to the left of the feature name to expand the list of policies.



There are two options for creating the role with this method:

1.  Creating a stack in CloudFormation
2.  Copy + Pasting a command in CloudShell

Option 1: Create stack in CloudFormation

After selecting the features, click on “Link Account”. This will open
AWS CloudFormation in a new tab, so you can create a stack template
that’ll generate the role with the requisite permissions. Before opening
CloudFormation, you will be asked to confirm the action again by
clicking “Link Account”.



A preconfigured stack template like the one below will appear in your
CloudFormation tab.

Review the details, then under “Capabilities” mark the ‘I acknowledge
that AWS CloudFormation might create IAM resources with custom names’
checkbox. Finally, click on the ’Create stack’ button.



Within approximately 30 seconds of creating the stack, the Settings page
in CMP will update, showing your linked AWS account with a “Healthy”
status next to it if the link attempt was successful.

Option 2: Create role via CLI

If you prefer to run the commands yourself in AWS CloudShell, click on
the “Prefer CLI?” button instead. A pop-up will appear with the commands
you should run to generate the role with the requisite policies for the
features you selected. After running the command, it may take up to 30
seconds for the account to link to the CMP.



Within approximately 30 seconds of running the command, the Settings
page in CMP will update, showing your linked AWS account with a
“Healthy” status next to it if the link attempt was successful.

Manually Link AWS Account

Select the “Create a role manually” radio button, then note the listed
“AWS Account” and “External ID”, as you’ll need them for a later step.



Creating an AWS IAM Role

In a separate tab, open the AWS Management Console. Next, go to
‘Security, Identity, & Compliance > IAM’, or type ‘IAM’ in the ‘Find
Services’ search bar and click on ‘Roles’, located on the left-hand side
of the page.

Then choose ‘Create Role’.



Enter the AWS Account ID and External ID you’ve noted in the previous
step. You might need to check the ‘Options’ checkbox for the External ID
field to show up.



This will take you to a page where you can select built-in policies
and/or create a new one.

Currently, there are three features you can enable for a linked AWS
account: Core, Quotas, and SpotScaling

Core permissions are for a minimum set of read-only permissions we need
as a foundation for many CMP features. As such, it is checked by
default.

For Core, you need to add three built-in policies to your role:

-   SecurityAudit
-   Billing
-   AWSSavingsPlansReadOnlyAccess

To add permissions for other features, you’ll need to create a new
policy. If you wish to enable this feature, click “Create policy”.



Creating new policies

Spot Scaling

A new tab will open for you to create the policy. Switch to the “JSON”
tab and copy-paste the following list of required permissions as a JSON
file:

    
        "Version": "2012-10-17",
        "Statement": 
            
                "Action": 
                    "ec2:Describe",
                    "ec2:CreateLaunchTemplate",
                    "ec2:CreateLaunchTemplateVersion",
                    "ec2:ModifyLaunchTemplate",
                    "ec2:RunInstances",
                    "ec2:TerminateInstances",
                    "ec2:CreateTags",
                    "ec2:DeleteTags",
                    "ec2:CreateLaunchTemplateVersion",
                    "ec2:CancelSpotInstanceRequests",
                    "autoscaling:CreateOrUpdateTags",
                    "autoscaling:UpdateAutoScalingGroup",
                    "autoscaling:Describe",
                    "autoscaling:AttachInstances",
                    "autoscaling:BatchDeleteScheduledAction",
                    "autoscaling:BatchPutScheduledUpdateGroupAction",
                    "cloudformation:ListStacks",
                    "cloudformation:Describe",
                    "iam:PassRole",
                    "events:PutRule",
                    "events:PutTargets",
                    "events:PutEvents"
                ,
                "Resource": "",
                "Effect": "Allow"
            }
        
    }



After the JSON for the new policy you want to create is pasted, click
“Next: Tags”. If you aren’t adding tags to this role, then you may
proceed by clicking on “Next: Review”.

Finally, give your policy an identifiable name, like
“spotscalingpolicy”, and a description if necessary. Then click on
“Create Policy”.



Quota Monitoring

A new tab will open for you to create the policy. Switch to the “JSON”
tab and copy-paste the following list of required permissions as a JSON
file:

    
      "Version": "2012-10-17",
      "Statement": 
        
          "Effect": "Allow",
          "Action": 
            "support:DescribeTrustedAdvisorCheckSummaries",
            "support:DescribeTrustedAdvisorCheckRefreshStatuses",
            "support:DescribeTrustedAdvisorChecks",
            "support:DescribeSeverityLevels",
            "support:RefreshTrustedAdvisorCheck",
            "support:DescribeSupportLevel",
            "support:DescribeCommunications",
            "support:DescribeServices",
            "support:DescribeIssueTypes",
            "support:DescribeTrustedAdvisorCheckResult",
            "trustedadvisor:DescribeNotificationPreferences",
            "trustedadvisor:DescribeCheckRefreshStatuses",
            "trustedadvisor:DescribeCheckItems",
            "trustedadvisor:DescribeAccount",
            "trustedadvisor:DescribeAccountAccess",
            "trustedadvisor:DescribeChecks",
            "trustedadvisor:DescribeCheckSummaries"
          ,
          "Resource": ""
        }
      
    }

After the JSON for the new policy you want to create is pasted, click
“Next: Tags”. If you aren’t adding tags to this role, then you may
proceed by clicking on “Next: Review”



Give your policy an identifiable name, like “doitintlquotas” in the
case of the Quota Monitoring feature, and a description if necessary.
Then click on “Create Policy”.



If the policy was successfully created, you’ll be taken to the IAM
Policies page and see a success message at the top like the following:



Select all policies and confirm role

Once any custom policies (if necessary) have been created, revert back
to your original tab where the workflow first began, and click the
Refresh icon towards the top-right of the policies box. Any
newly-created policies will now appear in the search list.

Select all created policies for the features you want to enable in
addition to the three built-in policies required for Core features, then
click “Next: Tags”.

If you aren’t adding tags to this role, then you may proceed by clicking
on “Next: Review” from the “Add Tags” page.



Give the Role an identifiable name (ex. ‘doit-intl-cmp-role’), review
the selected policies, and click on “Create role”.



If the role was created successfully, you’ll be taken back to the main
Roles page and see your Role in the list.

After you have created the role, click on the role name to bring you to
its summary page. Copy the value next to “Role ARN”



Finally, copy and paste the Role ARN to the Cloud Management Platform
and click ‘Add’.

If the status of your AWS account within the Cloud Management Platform
appears as ‘Healthy’, it means the role was added successfully.



Editing Linked Accounts

Unlinking an account

If you want to unlink an account, click on the “Unlink” button in the
row corresponding to the account.



Modifying feature access

Adding a feature

If, after linking your AWS account, you’d like to update your role with
additional permissions for a new feature, click on the “Edit” button in
the row corresponding to the account.



Then, check the box of any new feature(s) you’d like to add permissions
for.



There are two options for updating your role:

1.  Creating a stack in CloudFormation
2.  Copy + Pasting a command in CloudShell

Both methods are detailed above (and hyperlinked) in the section on
linking your AWS account automatically.

The flows are essentially the same as described above, except instead of
creating a new role you are simply updating a role you’ve already
created.

Removing a feature

To remove a feature that a linked account has access to, go to the IAM
page in the AWS console. Then, detach the policy or policies associated
with the feature in that linked account’s role.

Video

 embed
url=“https://www.loom.com/share/ed483a87c6474c22ae735ec7d19e2215” 
Import AWS Organizations

Overview

Customers having their own AWS Organizations (and willing to preserve
them after switching to DoiT billing) have a new, radically simple
onboarding process which eliminates most of the hassle typically
involved with consolidation process.

Step 1 - Readiness (by Customer)

After signing a contract with AWS, your customer success manager would
contact you to provide you with an onboarding process overview and guide
you through the readiness phase. A typical process would be as
following:

1.  Identify the root AWS account in your AWS Org (normally referred as
    Master Payer Account or MPA)
2.  In the MPA, create a new IAM user with “Administrator” policy
3.  Change an MPA root email address to one provided by DoiT (usually
    this would follow a awsops+ID}}@doit-intl.com pattern)
4.  Remove 2FA from the root account (no worries, we’ll re-enable it in
    the next step)
5.  Notify your customer success manager about completing the steps 1-4

Step 2 - Initial Onboarding (by DoiT)

1.  Change the root password on AWS MPA account
2.  Re-enable 2FA on the root account using software based token
    (1password)
3.  Create doitintlcmp IAM role to facilitate access from Cloud
    Management Platform
4.  Create CloudHealth IAM role to provide access from CloudHealth
5.  Create AWSAdmin IAM role (used to access billing data under AWS
    Channel Reseller Program)
6.  Request SPP team at AWS to onboard the organization under ECAM
    (End-Customer Account Model)

Step 3 - Account Configuration (by DoiT)

1.  Replace existing payment method with a DoiT payment method
2.  Set tax profile to the country matching DoiT’s billing profile
3.  Complete Org email verification process (need to be done because the
    root email has changed)
4.  Enable “Cost and Usage Reports” (if not enabled already)
5.  Create a new S3 bucket (named as doitintl-awsops-id}) to store AWS
    Cost and Usage report
6.  Set up a new Cost and Usage report ( doitintl-awsops-id})

Frequently Asked Questions

Q: Should I expect anything to break during the process?

No, the process was designed to be disruption free.

Q: Will the features dependent on AWS Organizations continue to
function?

All AWS-organization features (e.g. AWS SSO, AWS Backup, AWS Firewall
Manager, Resource Manager, etc) will continue to function in exactly the
same way as before.

Q: Can you please share the IAM policies for the roles you’re creating
on master payer account?

Absolutely! You can find the policy for DoiT Cloud Management Platform
at this gist. If your contract includes CloudHealth, its IAM policy is
at this gist.
Set up CloudHealth

Please use the following instructions to setup CloudHealth for your new
or existing AWS account linked to DoiT International consolidated
billing.

Sign in to AWS Console

Sign in to the AWS account you’d like to integrate with CloudHealth with
an IAM account which has the permission to create AWS IAM roles and
policies.

Create an AWS IAM Policy

1.  Navigate to IAM Policies
2.  Click “Create Policy”
3.  Switch to the JSON tab
4.  Remove existing content and copy the content of this JSON policy and
    paste it into the text area
5.  Click “Review Policy”
6.  Set name to “CloudHealth”
7.  Click “Create Policy”

Create an IAM Role

1.  Navigate to IAM Roles
2.  Click “Create Role”
3.  Select ‘Another AWS Account’
4.  Provide 454464851268 as Account ID
5.  Mark “Require external ID” and paste 6cda262029ad7b34a64ff537196ab4
6.  Click “Next: Permissions”
7.  Search and select “CloudHealth” IAM Policy
8.  Click “Next: Tags”
9.  Click “Next: Review”
10. Set Role Name to “CloudHealth”
11. Click “Create Role”

Create Users

The first user will be an administrator we create for you.

Further users and administrators can be created by yourself in the
Cloudhealth Interface as an Admin.

If you are yourself not an admin, you need to approach an admin in your
company to do this.

If you require any further assistance with the creation of the
CloudHealth IAM Role, don’t hesitate to contact our support at
https://support.doit-intl.com

 If you have SSO enabled in CloudHealth, you
will not be able to add users that use usernames and passwords. In order
to add users they must first be added to the proper role group within
the IDPs directory. 

Inviting a user in Setup &gt; Users is not possible when SSO is enabled
results in an error

SSO in Cloudhealth

more on troubleshooting SSO issues on CloudHealth
Setting Up Spot Scaling

Connect your AWS Accounts

To use Spot Scaling, you must provide access to your AWS account(s) to
the CMP. Read this article to see how to link your AWS account(s).

 If you’ve already linked your AWS account(s) to
the CMP, go to this step instead. 

As part of linking your account, you will need to create an AWS IAM Role
and attach an IAM Policy to it containing a requisite set of
permissions. These permissions allow Spot Scaling to function — monitor
your ASG behavior, make spot instance recommendations, and allow you to
implement them from the CMP

In the same article linked above, read the section on how to create a
policy for Spot Scaling with the requisite permissions.

AWS Account previously linked

If your account was already linked prior to enabling Spot Scaling
functionality, you need to update the role attached to the account with
the additional requisite permissions for Spot Scaling.

Follow these instructions on adding a feature to an already-linked AWS
account. Be sure to check the box next to “Spot Scaling”, as shown
below.



Implement Spot Scaling Recommendations

View Recommendations

To navigate to your Spot Scaling recommendations, click on the Spot
Scaling icon in your lefthand navigation panel.



Once an AWS account is linked, any Auto Scaling Groups (ASGs) associated
with it which aren’t optimized will appear in your Spot Scaling page.

These ASGs will have a value of “Not Optimized” under the “Optimization
Status” column.



Click on the ASG to view its Spot Scaling recommendation.



Your ASG’s current configuration is displayed under the “Current Values”
column. Spot Scaling’s recommendations are displayed under the
“Recommended Values” column.

Additional Spot Scaling Settings

With Spot Scaling you have two optional features you can turn on when
optimizing your ASG’s configuration:

-   Keep my ASG up to date: If turned on, Spot Scaling will
    automatically update the ASG’s configuration to continuously
    maximize system runtime and spot-related EC2 savings.
-   Fallback to On-Demand: When there aren’t where enough unused EC2
    instances to meet demand for Spot instances, Spot Scaling will
    automatically fallback to on-demand instances.



ASG Potential Savings Metrics

To better understand your potential savings for each ASG Spot Scaling
can optimize, you can see two metrics for each recommendation:

-   Monthly Savings Potential: How much Spot Scaling can save you if you
    apply its recommendation.
-   Monthly Saving Rate: The percentage savings over on-demand you’ll
    realize if you apply Spot Scaling’s recommendation.

Apply Recommendations

Examine the recommendations and, if the proposed changes seem
satisfactory with you, click on APPLY RECOMMENDATIONS to reconfigure
your ASG according to Spot Scaling’s recommendations.



If you want to tweak the recommendation, you may also modify the values
under the following rows before applying it:

-   On-Demand Base Capacity
-   On-Demand Instances
-   Spot Instances

Once you’ve applied the recommendation, the “Recommended Values” column
will disappear.

The values under the “Current Values” column will update, reflecting the
changes you made when applying the recommendation.



Additionally, once you apply a recommendation, the metrics appearing at
the top will update, showing you the previous month’s savings and the
current month’s savings. You will see a breakdown of hours and cost
under each metric for both spot and on-demand instances.

Finally, after applying a recommendation, your ASG will see a value of
“Optimized” under the “Optimization Status” column.


Setting Up Spot Scaling

Connect your AWS Accounts

To use Spot Scaling, you must provide access to your AWS account(s) to
the CMP. Read this article to see how to link your AWS account(s).

 If you’ve already linked your AWS account(s) to
the CMP, go to this step instead. 

As part of linking your account, you will need to create an AWS IAM Role
and attach an IAM Policy to it containing a requisite set of
permissions. These permissions allow Spot Scaling to function — monitor
your ASG behavior, make spot instance recommendations, and allow you to
implement them from the CMP

In the same article linked above, read the section on how to create a
policy for Spot Scaling with the requisite permissions.

AWS Account previously linked

If your account was already linked prior to enabling Spot Scaling
functionality, you need to update the role attached to the account with
the additional requisite permissions for Spot Scaling.

Follow these instructions on adding a feature to an already-linked AWS
account. Be sure to check the box next to “Spot Scaling”, as shown
below.



Implement Spot Scaling Recommendations

View Recommendations

To navigate to your Spot Scaling recommendations, click on the Spot
Scaling icon in your lefthand navigation panel.



Once an AWS account is linked, any Auto Scaling Groups (ASGs) associated
with it which aren’t optimized will appear in your Spot Scaling page.

These ASGs will have a value of “Not Optimized” under the “Optimization
Status” column.



Click on the ASG to view its SpotScaling recommendation.



Your ASG’s current configuration is displayed under the “Current Values”
column. Spot Scaling’s recommendations are displayed under the
“Recommended Values” column.

Additional Spot Scaling Settings

With Spot Scaling you have two additional options you can select when
optimizing your ASG’s configuration:

-   Keep my ASG up to date: If turned on, Spot Scaling will
    automatically update the ASG’s configuration to continuously
    maximize system runtime and spot-related EC2 savings.
-   Fallback to On-Demand: When there aren’t where enough unused EC2
    instances to meet demand for Spot instances, Spot Scaling will
    automatically fallback to on-demand instances.



Apply Recommendations

Examine the recommendations and, if the proposed changes seem
satisfactory with you, click on APPLY RECOMMENDATIONS to reconfigure
your ASG according to Spot Scaling’s recommendations.



If you want to tweak the recommendation, you may also modify the values
under the following rows before applying it:

-   On-Demand Base Capacity
-   On-Demand Instances
-   Spot Instances

Once you’ve applied the recommendation, the “Recommended Values” column
will disappear.

The values under the “Current Values” column will update, reflecting the
changes you made when applying the recommendation.



Additionally, after applying a recommendation, your ASG will have a
value of “Optimized” under the “Optimization Status” column.


Spot Scaling FAQ

What is a Spot instance?

Spot instances are spare EC2 capacity that can save you up to 90 off
On-Demand prices that Amazon Web Services can interrupt with a 2-minute
notification. Spot uses the same underlying EC2 instances as On-Demand
and Reserved Instances and is best suited for fault-tolerant, flexible
workloads. In addition, spot instances provide an additional option for
obtaining compute capacity and can be used along with On-Demand and
Reserved Instances.

How is a Spot instance different from an On-Demand instance?

While running, Spot instances are the essentially the same as On-Demand.
The main differences are that Spot instances typically offer a
significant discount over On-Demand prices. The tradeoff is that your
spot instances can be interrupted by Amazon EC2 for capacity
requirements with just two minutes’ notice. Spot prices adjust gradually
based on long-term supply and demand for spare EC2 capacity. See here
for details.

When to Use Spot Instances?

Spot instances are most suitable for applications that have fault
tolerance built in, are stateless, or perform data processing in large
clusters (for example, Hadoop).

Additional use cases include:

-   Batch processing — you can use the AWS Batch service in combination
    with spot instances to run batch processing on spot instances that
    are currently available at a low cost. This can generate significant
    cost savings compared to running the same batch process using
    on-demand instances.
-   Continuous integration — development and testing are very common in
    a cloud environment. Dev/test tasks typically run on an irregular
    schedule, and because they are not production workloads, they can
    tolerate occasional interruptions.
-   High performance computing (HPC)—you can use spot instances to run
    massively parallel workloads like artificial intelligence analytics
    applications. These applications run on graphical processing units
    (GPUs), and since GPU instances are expensive, spot instances can be
    a big help.

What are the best practices to use Spot instances?

We highly recommend using more than one Availability Zone and be
flexible about the instance types to maximize the amount of Spot
capacity available to you. A Spot capacity pool is a set of unused EC2
instances with the same instance type, operating system, Availability
Zone, and network platform (EC2-Classic or EC2-VPC).

What price will I pay for a Spot instance?

With Spot Instances, you pay the Spot price that’s in effect for the
time period your instances are running. Spot Instance prices are set by
Amazon EC2 and adjust gradually based on long-term trends in supply and
demand for Spot Instance capacity. To learn more about please visit the
AWS spot pricing page.

What happens if there are no available spot instances?

Spot Scaling supports Fallback to on-demand for scenarios where there
are no available spot instances to ensure your workload availability,
and it reverts back to spot instnaces as soon as they available again.

How do you calculate the Potential Savings?

The potential saving calculation is based on the following inputs:
1. The number of the desired instances in the Auto Scaling Group
2. The diff between on-demand prices to spot prices per 1 hour
3. The number of hours in a given month (approx 730 hours)

What if I want to control the proportion of the spot and on-demand instances?

By default Spot Scaling recommends 20 of desired capacity exists
on-demand and 80 with spot instances.However, you can define the
percentage split of On-Demand Instances and Spot Instances according to
your use case.
Spot Scaling Overview

What is Spot Scaling?

Spot Scaling proactively monitors your AWS Auto-Scaling Groups (ASGs)
and cleverly replaces some or all of on-demand EC2 instances with Spot
instances using sophisticated AI assisted analysis. By intelligently
managing your ASGs, Spot Scaling takes care of your launch templates,
configuration, mixed instances policies, and a myriad of other
configuration settings so you can focus on core activities.

To minimize interruptions, Spot Scaling will add more similar instance
types and zones into your ASG configuration. Still, if there are no spot
instances available, Spot Scaling will fall back to on-demand instances,
ensuring the high availability of your systems.

How does Spot Scaling work?

Analyze

Spot Scaling runs in the background, integrating natively with your AWS
Auto Scaling Groups (ASG), and monitors the configuration and potential
savings within each group.

Recommend

Spot Scaling recommends the most suitable configuration for your Auto
Scaling Group to run reliably and cost effectively. while presenting you
with the monthly potential savings vs. on-demand. You can accept your
recommendations as-is, or modify them as you see fit.

Provision

After you apply the recommendations, Spot Scaling updates your Auto
Scaling Group to work in a mixed instances policy. In addition, it
replaces on-demand instances with spot instances according to the
recommended settings, which you can change anytime.

When Spot Scaling cannot spin up Spot instances due to lack of spot
capacity, it automatically falls back to on-demand to ensure
availability and reverts to spot instances as soon as possible. As a
result, the system uptime for your app(s) are maximized, while EC2 costs
are minimized.

Monitor

Spot Scaling continuously assesses your Auto Scaling Groups and presents
important metrics such as:

-   Costs
-   Spot and On-Demand hours
-   Savings for the previous and current month.

What are the advantages of Spot Scaling?

Reliable & Safe - Spot Scaling works with AWS native Auto Scaling
Groups, supporting fallback to on-demand and follows Spot Instance Best
Practices

No cost overhead - You get the full spot discount provided by AWS.

Quick and Easy - Enable in less than 5 minutes with CloudFormation
StackSets. After essentially two clicks, your Auto Scaling Group is Spot
optimized.

No vendor lock-in - You can decide to stop using it at any given time
and revert back to what your ASGs were configured as prior to enabling
the features.

Typical Savings

Scenario: 50 m5.xlarge instances; replacing 80 of on-demand instances
with Spot instances

Without Spot Scaling
With Spot Scaling
Monthly Cost
50 instances  $0.192  730h = $7,008
10 instances  $0.192  730h = $1,401 40 instances  $0.0399  730h =
$1,165
Total cost = $1,401 + $1,165 = $2,566
Monthly Savings $
$0
$4,442
Monthly Savings 
0
63
Now let’s explore how to set up and use Spot Scaling.
Spot Scaling Overview

What is Spot Scaling?

Spot Scaling proactively monitors your AWS Auto-Scaling Groups (ASGs),
intelligently replacing all or some of an ASG’s on-demand EC2 instances
with Spot instances using sophisticated AI-assisted analysis.

By managing your ASGs, Spot Scaling takes care of your launch templates,
configuration, mixed instances policies, and a myriad of other
configuration settings so you can focus on core activities.

To minimize interruptions, Spot Scaling will add more similar instance
types and zones into your ASG configuration. Still, if there are no spot
instances available, Spot Scaling will fall back to on-demand instances,
ensuring the high availability of your systems.

How does Spot Scaling work?

Analyze

Spot Scaling runs in the background, integrating natively with your AWS
Auto Scaling Groups (ASG), and monitors the configuration and potential
savings within each group.

Recommend

Spot Scaling recommends the most suitable configuration for your Auto
Scaling Group to run reliably and cost effectively. while presenting you
with the monthly potential savings vs. on-demand. You can accept your
recommendations as-is, or modify them as you see fit.

Provision

After you apply the recommendations, Spot Scaling updates your Auto
Scaling Group to work in a mixed instances policy. In addition, it
replaces on-demand instances with spot instances according to the
recommended settings, which you can change anytime.

When Spot Scaling cannot spin up Spot instances due to lack of spot
capacity, it automatically falls back to on-demand to ensure
availability and reverts to spot instances as soon as possible. As a
result, the system uptime for your app(s) are maximized, while EC2 costs
are minimized.

Monitor

Spot Scaling continuously assesses your Auto Scaling Groups and presents
important metrics such as:

-   Costs
-   Spot and On-Demand hours
-   Savings for the previous and current month.

What are the advantages of Spot Scaling?

Reliable & Safe - Spot Scaling works with AWS native Auto Scaling
Groups, supporting fallback to on-demand and follows Spot Instance Best
Practices

No cost overhead - You get the full spot discount provided by AWS.

Quick and Easy - Enable in less than 5 minutes with CloudFormation
StackSets. After essentially two clicks, your Auto Scaling Group is Spot
optimized.

No vendor lock-in - You can decide to stop using it at any given time
and revert back to what your ASGs were configured as prior to enabling
the features.

Typical Savings

Scenario: 50 m5.xlarge instances; replacing 80 of on-demand instances
with Spot instances

Without Spot Scaling
With Spot Scaling
Monthly Cost
50 instances  $0.192  730h = $7,008
10 instances  $0.192  730h = $1,401 40 instances  $0.0399  730h =
$1,165
Total cost = $1,401 + $1,165 = $2,566
Monthly Savings $
$0
$4,442
Monthly Savings 
0
63
Now let’s explore how to set up and use Spot Scaling.
Spot Scaling FAQ

What is a Spot instance?

Spot instances are spare EC2 capacity that can save you up to 90 off
On-Demand prices that Amazon Web Services can interrupt with a 2-minute
notification. Spot uses the same underlying EC2 instances as On-Demand
and Reserved Instances and is best suited for fault-tolerant, flexible
workloads. In addition, spot instances provide an additional option for
obtaining compute capacity and can be used along with On-Demand and
Reserved Instances.

How is a Spot instance different from an On-Demand instance?

While running, Spot instances are the essentially the same as On-Demand.
The main differences are that Spot instances typically offer a
significant discount over On-Demand prices. The tradeoff is that your
spot instances can be interrupted by Amazon EC2 for capacity
requirements with just two minutes’ notice. Spot prices adjust gradually
based on long-term supply and demand for spare EC2 capacity. See here
for details.

When to Use Spot Instances?

Spot instances are most suitable for applications that have fault
tolerance built in, are stateless, or perform data processing in large
clusters (for example, Hadoop).

Additional use cases include:

-   Batch processing — you can use the AWS Batch service in combination
    with spot instances to run batch processing on spot instances that
    are currently available at a low cost. This can generate significant
    cost savings compared to running the same batch process using
    on-demand instances.
-   Continuous integration — development and testing are very common in
    a cloud environment. Dev/test tasks typically run on an irregular
    schedule, and because they are not production workloads, they can
    tolerate occasional interruptions.
-   High performance computing (HPC)—you can use spot instances to run
    massively parallel workloads like artificial intelligence analytics
    applications. These applications run on graphical processing units
    (GPUs), and since GPU instances are expensive, spot instances can be
    a big help.

What are the best practices to use Spot instances?

We highly recommend using more than one Availability Zone and be
flexible about the instance types to maximize the amount of Spot
capacity available to you. A Spot capacity pool is a set of unused EC2
instances with the same instance type, operating system, Availability
Zone, and network platform (EC2-Classic or EC2-VPC).

What price will I pay for a Spot instance?

With Spot Instances, you pay the Spot price that’s in effect for the
time period your instances are running. Spot Instance prices are set by
Amazon EC2 and adjust gradually based on long-term trends in supply and
demand for Spot Instance capacity. To learn more about please visit the
AWS spot pricing page.

What happens if there are no available spot instances?

Spot Scaling supports Fallback to on-demand for scenarios where there
are no available spot instances to ensure your workload availability,
and it reverts back to spot instnaces as soon as they available again.

How do you calculate the Potential Savings?

The potential saving calculation is based on the following inputs:
1. The number of the desired instances in the Auto Scaling Group
2. The diff between on-demand prices to spot prices per 1 hour
3. The number of hours in a given month (approx 730 hours)

What if I want to control the proportion of the spot and on-demand instances?

By default Spot Scaling recommends 20 of desired capacity exists
on-demand and 80 with spot instances.However, you can define the
percentage split of On-Demand Instances and Spot Instances according to
your use case.
Sharing Feedback

When it comes to building a better Cloud Management Platform for you and
all customers, your feedback plays a key role. It is one of the
important pieces of input we consider when planning our roadmap, and
gives us clear indications of where the needs are in the market.

Now you can share product feedback and feature requests with us directly
from the CMP. Read on to see how. Check out our Feedback Hub to view the
ideas that have already been shared and upvote them.

How to share ideas within the CMP

To share your feedback with us, click on the FEEDBACK button at the
top-right of your screen. Then describe your feature request or general
feedback, providing screenshots or images to give more context as
needed.



Once finished, click Next. If there are similar requests or suggestions
to the one you wrote, we will display them for you to upvote in our
Feedback Hub instead of submitting a new request.

If your request doesn’t already exist, click “Skip and post idea”.



Finally, give your idea a title and select the best category it fits
under, as shown in the example below. Once you click Submit, it will
appear in our Feedback Hub for others to upvote and the product team
will be notified.



Upvoting Existing Ideas in the Feedback Hub

When you share feedback and/or feature requests with us, they get
submitted to our Feedback Hub. There, you see and upvote any ideas you
like.

Let’s go over how to navigate the Feedback Hub and upvote ideas.

From the home page, select a category whose ideas you’d like to take a
look at. Alternatively, you can search for them directly in the search
box.



After clicking on a category, you can search for ideas by their
sub-categories on the left-hand side. Additionally, you can sort through
them via categories such as “Hot”, “Top Ideas”, “New”, or “Status”.

If an idea has been added to the roadmap or development has begun, you
will see a colored status icon similar to the yellow “Planned” rectangle
in the screenshot below.



Upvote an idea that interests you by clicking on the “Vote” button next
to the idea. Finally — if you aren’t signed in already — enter your
email or sign in with Google to submit your vote.

You will be notified if the status of the idea changes or ultimately
gets released in the product it corresponds to.


Slack Integration

The DoiT CMP Slack application helps you share rich previews of your
Cloud Analytics Reports and Budgets in your Slack workspace when you
paste any CMP link. This makes it easy for anyone in your Slack
workspace to learn from your CMP analyses, or to glean insights without
needing to open the CMP itself.

 Only Slack Workspace Admins can install Slack
applications. 

Enable the Integration

To enable the integration, make sure you’re logged in to both the CMP
and Slack. Then, in the CMP:

1.  Click on the Settings icon in your lefthand navigation panel
2.  Switch to the Slack tab
3.  Click “Add to Slack”

Or just click this link to add the DoiT CMP Slack app to your workspace.

How to add the DoiT CMP Slack app to your Slack workspace

Finally, click “Allow” to give the DoiT CMP Slack app permission to
access your Slack workspace.



At this point, DoiT CMP is a part of your Slack workspace, and any CMP
Report or Budget links you send in Slack will unfurl with metadata, and
if applicable a chart preview.

Once at least one member of your CMP organization has set up the Slack
integration for their account, any other members of the Slack workspace
will see a prompt the next time they paste a CMP link. The prompt will
ask them to connect their own CMP account to Slack as well. If they
choose to do so, Slack will guide them through the authentication flow
you see above. Once they have successfully connected CMP to Slack, any
further links they paste in Slack will unfurl.

Using the Integration

Once you’ve set up the integration, CMP links pasted in Slack will
unfurl. Most links will provide some basic link metadata, and links to
Reports and Budgets will include a chart preview.

For example:



Permissions

Only Slack Workspace Admins can install Slack applications. If you
aren’t an Admin for your Slack Workspace, forward this article to an
Admin or guide them to add the DoiT Slack app via the DoiT CMP.

After the CMP is connected to Slack, any Slack user who posts a CMP link
will be prompted to connect their own account in order to unfurl report
previews. By performing this integration at the user level, it ensures
that only reports the user has access to will unfurl in Slack.

Privacy

The CMP Slack app adheres to DoiT International overall privacy policy,
available in full here: https://www.doit-intl.com/privacy
Your Profile

You can access and edit your user profile to adjust your personal
details and/or notifications settings. To access your profile settings,
click your profile icon in the upper-right corner of the page header,
then select Profile.



You will be taken to a Profile page, where you’ll find the following
tabs:

-   Profile
-   Permissions
-   Notifications
-   API

Let’s go over what can be configured in each tab.

Profile

-   First / Last Name
-   Job Function
-   Phone Number
-   Default Dashboard - the default dashboard that appears in your
    “Home” page whenever you log in.



Permissions

This is where you can view your CMP Role (and the associated permissions
that come with it) and assign yourself to any Billing Profiles (if you
have the Admin role).



Notifications

You can request to be notified on the following events:

New Invoices - an email will be sent when a new invoice is uploaded to
the Cloud Management Platform

Credits Utilization - request to be notified when your credits are 75
exhausted and then again once they have been fully exhausted.

Cloud Quota Utilization - notifies you when you exceed 50 usage of any
of your Google Cloud and/or AWS service quotas.

Cost Anomalies - request to be notified when our system detects abnormal
usage of your cloud platform (i.e., AWS and/or Google Cloud).
Additionally, you can set at which threshold (Information, Warning,
Critical) you’d like to be notified.

Payment Due/Overdue - an email will be sent reminding the user to pay
the invoice. There are three different instances of when notifications
are sent:

1.  ☐ The first reminder is sent seven days before an invoice is due.
2.  ☐ The second reminder is sent four days after the invoice’s due
    date.
3.  ☐ The third reminder is sent 10 days after the invoice’s due date.

Cloud Known Issues - get alerted whenever there is an infrastructure
issue with Google Cloud and/or AWS that may affect your own workloads.



API

This is where you go to generate your API key in order to
programmatically access several CMP features.

After you generate your key, copy and store it somewhere handy, as we
won’t show it again after you leave the API page.


Company Registration

At DoiT International we want to create a seamless customer experience
from the very first touchpoint to the post-contract stage, and that’s
why registering your company through our Cloud Management Platform is an
integral part of a successful customer onboarding process.

At some point in your communications with DoiT International’s Account
Management team, you will receive an e-mail to register your company and
complete the form (see example below)



Click the link in the email to start the sign-in & registration process.
You will be brought to the ‘New Billing Profile’ section of the customer
onboarding process where you will fill out your company’s information.



In conclusion, enter your payment method and currency and click
‘Submit’.

 Please note that there will be a section that
requests your billing information. This does not activate billing, it
just ensures that once the paperwork is signed, you don’t experience any
drop in service. 



The following video shows you how to Register your Company.

 embed
url=“https://www.loom.com/share/cdc521cedb0e443c9d1f464fd8d53d8c” 
Login to CMP

Overview

In order to access the Cloud Management Platform, you have to sign in
with your Google, Microsoft, or email account. If your company uses
Google G Suite (now Workspace) or Microsoft Office 365, we recommend
signing in with your Google or Microsoft identity.

Otherwise, if you don’t have a Google or Microsoft account and this is
your first time signing in, please click the ‘SIGN UP’ button and fill
in your email and a password of your choice. Once you verify your email
account, you will be able to sign in with your email and the selected
password.

Login using Microsoft Accounts

When using sign in with Microsoft for the first time, the organization
admin must sign in himself to CMP and grant admin consent for CMP to
read user info (emails, etc.) for their org. Eg shown below:



Login using Google Accounts

When using sign in with Google for the first time, admin consent should
not be needed unless it is specifically configured that way by the
organization.

Login using Email and Password

Start at https://app.doit-intl.com



Click on the ‘Forgot password?’ button if you need it, and you will be
prompted to follow the instructions.


Creating Google Cloud Sandbox

Google Cloud Sandbox for Organizations is the easiest way for companies
to set up and manage Google Cloud sandbox accounts. Through the Cloud
Management Platform, you’ll be able to create a sandbox and monitor
budget utilization.



After a policy has been configured, a user can create sandbox accounts
up to the amount which was defined by the Admin in the Sandbox Policy.

From the home page, please select ‘Sandbox Accounts’ using the left
navigation menu. Then, click on ‘Create Sandbox’, located on the
right-hand side of the page.



A notification will pop up informing you of the policy set by your
organization (Sandbox Admin) and the budget amount that applies. Click
on ‘Create’ to proceed.



Once created, you will see your new sandbox project on the list.



To use the sandbox, click on the sandbox name. It will open the Google
Cloud Console home page and preselect the created Google Cloud project
for you.

When and if your sandbox project’s budget has surpassed the set
threshold, and if the ‘End of Budget Action’ in the Sandbox Policy is
set to ‘Disable Billing’, your sandbox project will be disconnected from
the billing account. When the billing is disabled for a protracted
period, some resources might be removed by Google from the projects
associated with that account. For example, if you use Google Cloud, your
Compute Engine resources might be removed. Removed resources are not
recoverable.

If the ‘End of Budget Action’ in the Sandbox Policy is set to ‘Email
Alert’, an email notification will be sent out informing you of the
status.
Configuring Sandbox Policy

Google Cloud Sandbox for Organizations is the easiest way for companies
to set up and manage Google Cloud sandboxes. Through the Cloud
Management Platform, you’ll be able to enable your developers to create
a sandbox, monitor sandboxes from a centralized hub, and have one-click
access to sandbox projects for deeper dives.

Set up a Google Cloud Sandbox Policy to enforce rules which automate
sandbox management. With a sandbox policy, you can set up sandbox
budgets, get alerts when a budget is hit, or automatically disable the
billing, limit the number of sandboxes per user, connect all sandboxes
to your Google Cloud billing account, organization, and IAM folder, and
give all sandboxes a stable naming convention.

To create Google Cloud Sandbox Accounts, you must verify that a Google
Cloud service account was successfully configured. You can read more on
how to configure your Google Cloud service account at Connect Your
Google Cloud Organization.

 Required Permission: Sandbox Admin   


Before users can create a sandbox account, the Sandbox Admin needs to
configure a policy. Without a configured policy, users cannot create a
sandbox, as the policy defines how a sandbox is created.

To begin, click the ‘Sandbox Accounts’ icon on the left-hand side of the
page. Once you’re at the Sandbox Accounts page, click on ‘Configure
Policy’, located on the right-hand side of the page.



A notification will pop up informing you that the sandbox policy doesn’t
guarantee you won’t exceed the budget. Click on ‘Accept’ to proceed.



Complete the Sandbox Management Policy form:

-   GCP Billing Account
-   Organization
-   IAM folder
-   Budget
-   Sandboxes per User - 10 maximum
-   Sandbox Name Prefix
-   Budget Type - One Time or Monthly
-   End of Budget Action - Send Alert or Disable Billing



The Sandbox Admin can disable the policy to prevent the creation of
additional sandboxes. This action will not disable any preexisting
sandboxes. Click on ‘Update Policy’, and locate the disable/enable
button. To finish, click ‘Save’.

To learn more about how to create sandbox environments in the CMP, go
here.

View the bite-sized video below for a closer look at setting up your
Cloud Sandbox policy and creating Cloud Sandboxes.

 embed
url=“https://www.loom.com/share/2e2adffc48464c0189b87e4750e7b7d3?sharedAppSource=teamlibrary”

Policy Engine Early Access

Overview

The DoiT Policy Engine is a new core feature in our CMP. It’s goal is to
provide an automated, flexible set of rules that can be run against a
your cloud environments. By automating industry standard and benchmarks,
you can always be sure that your environments are configured according
to best practice. Overtime we expect this engine to grow to support a
wide range of use-cases including: tag compliance and enforcement, cost
waste reduction, security auto remediation, and more.

The initial release is focused on providing out of the box value - a
simple preset experience that leverages a recognized industry best
practice. These presets will leverage CIS Foundations benchmarks for GCP
and AWS as an initial policy set. In the future this will grow to
include additional standards from the industry as built-in policy packs.
In addition, customers will have the ability to define custom rules to
catch more specific rules and scenarios for their business.

Capabilities

-   Scheduled Recurring Checks against current CIS Benchmarks for AWS
    and GCP
    -   CIS AWS Foundations Benchmarks 1.2.0
    -   CIS GCP Foundations Benchmarks 1.2.0
-   Filterable Dashboard UI sorted by violation severity
-   Actionable result to allow immediate remediation
-   Read-only Rule set to inspect what is being run

Early Access

If you would like to join the Early Access Program, navigate to the
Governance Area and ‘Opt-in’ to include your company in the program.

Opting in Requires the preset ‘Admin’ Role in the CMP

Opt-in Page for Early Access

Requirements for Access

-   You must have Core Permissions enabled for your GCP Organization, or
    your AWS Accounts.
-   Explicit permission (granted via opting in) for DoiT to run Read
    Only scans of your environment based on the rules mentioned above
    -   These checks are passive and make no changes to your environment
    -   API requests will be seen within account logs
-   Willingness to provide feedback based on early access to reports,
    dashboards, and UI mocks to help focus and validate releases.
Create Office 365 Subscriptions

You can add a new Microsoft Office 365 subscription to your existing
tenant, using the Cloud Management Platform.

 Required Permission: Assets Manager   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a new subscription. 

Start with accessing Office 365 based Assets from the menu on the
left-hand side of the page and clicking the ‘Assets’ icon.



Once you’re at the Assets page, switch to the Office 365 tab.



Go to the right-hand side of the page and click on ‘New Subscription’.



Select the Subscription/License and quantity you’d like to order.



Lastly, review your order summary, and if you approve click ‘Submit’.


Purchasing Office 365 Licenses

If you manage your Office 365 licenses with DoiT International, you can
easily purchase more. We increase your monthly payment to cover the new
licenses.

 Required Permission: Licenses Manager   


 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to purchase a license. 

Start by accessing your Office 365-based Assets from the menu on the
left-hand side of the page and clicking on Assets.



Once you’re at the Assets page, switch to the Office 365 tab.



Locate the subscription you’d like to add licenses for and click the +
icon to add as many licenses as needed.



Add up to as many licenses as you wish, and click ‘Apply’.



Finally, you may approve the purchase by clicking the ‘Approve’ button.



Understanding License Utilization:

You can see the number of licenses in use under the Quantity field. In
the following example, four licenses were purchased.



Decreasing the Number of Licenses:

It is possible to decrease the number of licenses. The charges will be
deducted from your account as reflected in the next month’s billing to
your organization.

Please note that only FLEXIBLE plans allow you to decrease the number of
licenses. For more information, please review
https://docs.microsoft.com/en-us/office365/admin/subscriptions-and-billing/buy-licenses?view=o365-worldwide.
Perks

Perks are service-based benefits available to DoiT International
customers at no extra cost, including workshops, training, cost
optimization sessions, case studies, and co-produced webinars. They can
easily be browsed and requested on-demand from within the CMP. Let’s go
over how that is done.

Accessing Perks

Access your Perks library via the Perks icon on the left-hand navigation
panel.



In the Perks library, you will find a list of all of the available Perks
your team can request. For each Perk, you will see the:

-   Name of the perk
-   Platform(s) the perk is applicable to (AWS, Google Cloud, etc.)
-   Perk type
-   Perk description
-   “Learn More” link

Requesting a Perk

To request a Perk, first, click on the “Learn More” link associated with
the selected perk’s card. Following that, you will see the following
information associated with the selected perk:

-   Full Perk description
-   Prerequisites (if any exist)
-   Agenda
-   Modules that make up the perk with accompanying description(s)

To request the perk for your team, click on the “Request Perk” button at
the top-right corner of the Perks page.



After a few seconds, you will see the following message on the
lower-left corner of your screen if the request is successful:



Additionally, you will receive an email confirming that your request has
been received.

Once requested, a ticket will be automatically created in Zendesk and
assigned to the DoiT International engineer(s) that will administer the
Perk.

In the ticket, you and the engineers will arrange a suitable time for
the workshop, training, or pro-serv to take place. Finally, any
questions you have prior to the start date can be asked here.

View the bite-sized video below for a closer look at viewing and
requesting Perks.

 embed
url=“https://www.loom.com/share/9ff183270cb84e32817818589a80d37e?sharedAppSource=teamlibrary”

Create Cloud Analytics Reports

Cloud Analytics Reports give you instant visibility into your Google
Cloud or AWS costs without having to spend agonizing hours scanning
through vendor’s bills. Using Cloud Analytics Reports, you’ll be able to
slice and dice your cloud spend and shine a light on cost & performance
optimization opportunities for your organization.

 Required Permissions: Cloud Analytics   


 Please connect your Google Cloud Organization
or Amazon Web Services to the Cloud Management Platform to get all
available features. 

Accessing Cloud Reports

To access your Cloud Reports, click on the “Cloud Analytics” icon on the
left-hand side of the page.

By default, CMP provided several preset reports to start with, such as:

-   Google Cloud Monthly Credits History 12mo
-   Daily Google Cloud Cost 12mo
-   Monthly Google Cloud Cost by Service 12mo
-   Monthly Google Cloud Cost by Project 12mo
-   Google Cloud CloudSQL Hourly Cost 60d
-   Trending Up Google Cloud Costs

Click on the “Explore” button on the top-right part of the Cloud
Analytics page to begin working on a new ad-hoc Cloud Report. Reports
created this way will not be automatically saved unless you give it a
name.

If you’d like your report to be automatically saved regardless of
whether you give it a name, click on the dropdown arrow next to
“Explore” and select “New Report” instead.



Set up your Cloud Report

By default, your report will be in “View Mode”. This is a read-only view
of your report, where you’ll only be able to adjust the Metric,
Aggregation, and Chart Type options.

To edit your report, click on the pencil icon on the right-hand sidebar.
This will switch you to “Edit Mode” so you can start setting up your
report.

Conversely, if you are in Edit Mode, you can switch to View mode by
clicking on the eye icon that will appear in place of the pencil icon.



There are four steps to setting up your cloud report:

1.  Give your Cloud Report a meaningful name.
2.  Drag fields to the “Dimensions” and “Breakout Dimensions” sections.
3.  Determine a) which metric you’d like to measure your selected
    dimensions by b) how you’d like to visualize and display
    aggregations in your report c) the time interval & range for your
    report.
4.  Generate the report by clicking on the “Run” button.

After a few seconds, your report will appear, ready for your analysis.



FAQ

When are the metric amounts (Cost, Usage, etc) for a day counted as “final”?

You can consider numbers “final” for 3 days after the date. With that in
mind, there is really no SLA for this and numbers can change any time if
there are corrections or delays that needs to be applied.

Are the reports back-filled/updated, and at what frequency?

Cloud Analytics data and reports are updated hourly.

What timezone are Cloud Analytics Reports based on?

Data coming from Google Cloud is based on Pacific time and Data coming
from AWS is based on Coordinated Universal Time (UTC)

Watch

View the bite-sized video below for a closer look at creating and
exploring Cloud Reports:

 embed
url=“https://www.loom.com/share/3bb89b9c624a4a52a2ecfbb61a56b4b8” 
Report Dimensions, Group By, and Filters

When creating reports in Cloud Analytics, you will have every billing dimension to choose from, including any custom, project, and system labels for a detailed view of your cloud spend. You can also further customize your reports by grouping or filtering these dimensions.

Dimensions determine the fields along the X-axis of the chart and “Group
by” determines the fields along the Y-axis of the chart.

In the screenshot below you can see that “service” is under “Group By”
therefore; it is showing the service data on the Y- axis. The year,
month and day have been added as “Dimensions” so the data/columns are
placed on the X- axis as shown



Filters allow you to view more specific information. For example, if you
only want to look at GCP, you can Filter on Cloud = GCP without having
to show AWS on the chart.

This screenshot shows the “cloud” being filtered as Google Cloud only.
As previously mentioned, filters determine the data that will be shown
inside the chart.



Standard Dimensions

  Account

  This dimension refers to the “Billing Account” in CMP - Assets for
  Google Cloud; Cloud health account ID and Cloud Health name for AWS

  Cloud

  This reflects the cloud provider either “Google Cloud” or “Amazon Web
  Services”

  Cost Type

  The Cost Type dimension helps to identify the type of charge covered
  for a specific charge item. For example with AWS this helps
  distinguish between RI fees, usage fees, saving plan fees, taxes (if
  applicable) and so on.

  Credit

  A credit is usually a cloud provider’s way of implementing discounts
  such as Committed Use Discount or Sustained Use Discount or free-tier
  usage of a service

  Folder

  Folder can contain projects, other folders, or a combination of both.
  … For example, your organization might contain multiple departments,
  each with its own set of Google Cloud resources. folders allow you to
  group these resources on a per-department basis.

  Operation

  The specific AWS operation covered by this line item. This describes
  the specific usage of the line item. For example, a value of
  RunInstances indicates the operation of an Amazon EC2 instance.

  Project

  This dimension refers to the AWS Account ID; whereas for Google Cloud
  this identifies the Project ID

  Region, Country, Zone

  These dimensions refer to the cloud location specific to the Region,
  Country, or Zone where resources are deployed.

  Google Cloud Locations - Regions & Zones

  AWS Regions and Availability Zones

  Resource

  At the lowest level, resources are the fundamental components that
  make up all Google Cloud services. Examples of resources include
  Compute Engine Virtual Machines (VMs), Pub/Sub topics, Cloud Storage
  buckets, App Engine instances. All these lower level resources can
  only be parented by projects, which represent the first grouping
  mechanism of the Google Cloud resource hierarchy.

  Service

  A service is the high-level “type” of cloud technology that can be
  broken down into SKUs. A SKU is the resource itself for which there’s
  a given price per unit.

  SKU

  The ID of the resource used by the service. For the full list of SKUs,
  see the Pricing table report

  Unit

  The “Unit” dimension corresponds to the “Usage” Metric. This varies by
  service but generally refers to their unit of measure. e.g. Core -
  “hour”; Ram - “gigabyte hour”; EC2 - “vCPU-Hours”

Date / Time

  Year | Month | Day

  By default, when you create a new report, the “Year”, “Month”, and
  “Day” dimensions would already be added as shown on the example image
  below.



  The Date/Time dimension is also linked to the display option “Time
  Interval”, thus the selection here will add/remove a Date/Time
  dimension accordingly. For example, when Time Interval “Hour” is
  selected, “Hour” will also be automatically added to the dimensions.



Labels

Labels are key-value pairs that are used for identifying, organizing and
grouping resources which helps with tracking cloud spend. They can be
either user-defined or generated by the cloud provider or DoiT.

For added granularity, when creating reports in CMP, you will see labels
dimension in different categories:

“Labels” in general refer to the cost allocation tags for AWS and labels
for Google Cloud as assigned to resources

“Project Labels” are specific to Google Cloud for labels that were set
on the project level

“System Labels” refer to labels that were systematically generated by
DoiT or AWS and Google Cloud

 For AWS, not all cost allocation tags are
automatically imported in CMP. Please submit a Support Request if you
have any new tags that needs to be added in your reports. 

“GKE Labels” become available only when GKE Cost Analytics has been
successfully configured. These are labels applied at the cluster level
and propagates to all of the cluster’s individual resources (such as
nodes and persistent disks).

 You cannot combine both Google Cloud Labels
and GKE Labels in the same report. 

GKE Dimensions

If GKE Cost Analytics has been configured, additional dimensions will be
available in Cloud Analytics Reports for reporting on GKE spend.

The four GKE dimensions Namespace, Cluster, Region, and Resource add
levels of granularity to the report which helps you better understand
the real costs of running Kubernetes-based workloads on Google
Kubernetes Engine.

  GKE Namespace

  The Kubernetes namespace from which the usage is generated.

  GKE Cluster

  A cluster is the foundation of Google Kubernetes Engine (GKE): the
  Kubernetes objects that represent your containerized applications all
  run on top of a cluster.

  GKE Region

  The Google cloud region in which the GKE nodes are running at/resides

  GKE Resource

  The GKE resource in use, such as “cpu”, “memory”, and “storage”.

Below is a sample report snippet with a full breakdown of the four GKE
dimensions:


GKE Cost Analytics

GKE Cost Analytics in the CMP helps you demystify your Google Kubernetes
Engine (GKE) spend. With real-time visibility into GKE spend, you’ll be
able to:

-   Accurately track TCO of Kubernetes-based workloads across teams,
    product lines, etc.
-   Plan better with realistic Kubernetes-based budgets
-   Forecast and identify trends across any/all K8s primitives in one
    click.

Enabling GKE Cost Analytics involves three main steps:

1.  Connect your Google Cloud Organization by uploading a service
    account
2.  Enable GKE Usage Metering for your GKE clusters in the Google Cloud
    console or CloudSDK
3.  Grant the “BigQuery” Data Viewer” role to the service account
    (generated in step 1)

 You may have already executed some or all of
these steps. However, unless ALL steps have been taken, the GKE Cost
Analytics feature will not function correctly in the DoiT CMP. 
  

 GKE Cost Analytics is not applicable to
Autopilot clusters because they currently do not support Usage Metering
feature as noted here. 

Step 1 - Enable the GKE Cost Analytics

In order to do this, you will need to connect your Google Cloud
Organization to the CMP. Please navigate to the Settings page via the
gear icon in your lefthand navigation panel.

Then check the box(es) of the additional features you’d like to enable,
making sure to select “GKE Cost Analytics” here.

Click on the “Create Service Account” button. This will display all of
the Google SDK (gcloud) commands you need to run sequentially to create
the service account that contains the permissions for all of the
features you checked.

Finally, once you’ve executed all of the commands, click “Upload Key” to
upload the service account to the CMP.



 Remember the service account email you
created in this step. You will need it for step three. 

Step 2 - Enable GKE Usage Metering in the Google Cloud Console

First, you will need to create a BigQuery dataset in the Google Cloud
console, and then configure your clusters to export their resource usage
to it.

After that, you can enable GKE usage metering on a new or existing
cluster, using either the gcloud command or the Cloud Console.

You can find a more detailed description of these steps in the Google
Kubernetes Engine documentation.

 1. You can set multiple clusters in your project
to write to the same BigQuery dataset. 2. Clusters can export usage data
only to BigQuery datasets in the same project. 

Step 3 - Grant the “BigQuery Data Viewer” role

In order to do this for each GKE usage dataset you’ve created, you will
need to ensure this role is assigned to the Service Account email
created in Step 1 above.

First, navigate to the BigQuery console and locate the dataset you chose
from Step 2 to store the cluster usage information.

From there, select “Share Dataset”



Then enter the service account email in the “Add members” field.
Finally, grant this email the “BigQuery Data Viewer” role and click
“Add”, then “Done” to apply the changes.



 Note: Datasets to which the Service Account
email is not granted this permission will not be available in the GKE
Cost Analytics feature of the DoiT CMP. 

Step 4- Make sure you have the Kubernetes Engine API enabled.

 If you created the CMP service account in
Project A, then “Kubernetes Engine API” needs to be enabled in the
project in which you created the CMP service account, Project A. 
  

Analyzing GKE Cost Data in the CMP

Once everything is set up, your team’s GKE metering data can be analyzed
using the CMP’s Cloud Analytics functionality.

To start, open a new Report. You should see new GKE dimensions appear
alongside your other billing dimensions, as highlighted below.

GKE billing dimensions you can analyze in Cloud Analytics Reports

You will also find any GKE labels in the Labels chip, under the “GKE
Labels” header in the dropdown.



Drag a GKE chip or a GKE label chip into the “Group By” or “Dimensions”
section to start understanding the real costs of running
Kubernetes-based workloads on Google Kubernetes Engine.

Current Limitations

-   GKE Reports will only show data from the day that all of the steps
    were completed. We may be able to load historical data upon request
    (i.e. “backfill”). Please contact support to file a backfill
    request.
-   If you did not have “GKE Usage Metering” enabled until now, we will
    not be able to show historical data for GKE reports.
-   It will take a few hours from the moment you complete all steps
    until you will be able to use GKE Reports in Cloud Analytics.
    Usually, this process will take around 4 hours.
-   GKE reports are not compatible with some of the dimensions. For
    example, you will not be able to create a report that is based on
    the “GKE Cluster” field and the “Zone” field. You also cannot
    combine both Google Cloud Labels and GKE Labels in the same report.
Trend Analysis

Oftentimes when analyzing our cloud usage, we’re overwhelmed with so
many data points that it becomes impossible to identify important
trends. Trend Analysis helps you cut through the “noise” and isolate
what is trending upward or downward in a single click.

Use Trend Analysis in your Cloud Analytics Reports by selecting an
option from the “ML Features” dropdown on the lefthand set of options.



Trending Up or Trending Down

Using the Mann-Kendall algorithm, the “Trending Up / Down” feature
removes “noise” from your Cloud Analytics Reports and only shows
trending Metrics (i.e. Cost or Usage) in your series.

See how it works in the video below.

 embed
url=“https://www.loom.com/share/e2b7381983fa41bb929436a1d4a1e30b” 
Export Cloud Analytics Reports

You have four options when exporting your Cloud Reports:

-   Export as PNG
-   Export as PDF
-   Export to CSV
-   Export to Google Sheets

 Required Permissions: Cloud Analytics   


Exporting to PNG or PDF

To access your export options, click on the hamburger menu at the
top-right corner of your Cloud Report.

Finally, once you click on an option, a download will begin and you will
receive your exported report after a few seconds.



Exporting to CSV or Google Sheets

To export to Google Sheets or CSV, click on the “View As” dropdown and
select either the “Sheets Export” or “CSV Export” options, respectively.



Export to Google Sheets

If this is your first time exporting a Cloud Report to Google Sheets,
you will be asked to give CMP permission to create Google Drive files.



Once you’ve selected your email account, click on “Export” to view your
Cloud Report in Google Sheets.



CSV Export

After selecting the “CSV Export” option, a textbox will appear with your
report’s information ready to be copied by you.


Edit Cloud Analytics Report

Note: If you’re new to Cloud Reports and/or haven’t created a Cloud
Report yet, we recommend reading our post on Creating Cloud Reports
before reading further.

There are several types of edits you can make to your Cloud Report:

-   Adding additional dimensions
-   Changing the metric by which your dimensions are being measured
-   Reordering results
-   Changing the visualization
-   Modifying the time interval and/or range
-   Filtering dimensions

Most of these are self-explanatory, as you would simply make your
changes the same way you made your original selection.

Let’s briefly go over your options for editing reports, highlighted
below.



Report Settings

Metric

Cost: Analyze your reports on a basis of how much your selected
dimensions cost you.

Usage: Analyze your reports and selected dimensions on a usage basis.
Make sure to pair this with the Unit chip as a Breakdown Dimension.

Savings: Analyze your reports and selected dimensions on a savings
basis. These savings come as a result of your commercial agreement with
Google Cloud and the agreed-upon discount between your company and DoiT
International.

 The discount is not available for the
following services:
Google Maps APIs, Google Support, Looker, Preemptible VMs (compute
engine), 3rd party GCP Marketplace services, Premium OS Images. 
  

Aggregation

Use aggregations to summarize how you view your reports. Read more on
aggregations.

View As

This is where you select how your report is visualized.

ML Features

Use this to perform advanced analysis in your reports with just a click.
Use this to perform Trend Analysis or to create Forecasts is supported.

Time Interval & Time range

Specify the frequency in which data is aggregated. For the time
interval, you have the following options: Hour, Day, Week, Month,
Quarter, Year.
For the time range, the options are the following:



Currency

Currency that the billing data is reported in (Metric must be “Cost”).

Filtering Dimension Values

To view a subset of your dimension’s values, click on the chip you’d
like to filter. Then check the boxes next to the subsets you’d like to
view in the report.

You may also exclude a selection of values, or limit results to a
specific number of values arranged in descending order according to the
Metric (Cost, Usage, or Savings) selected.

Next, click “Save” in the lower-right corner of the popup modal.



Your filters are displayed along with any other visible configurations
on the right-hand collapsable sidebar. To expand it, click on the >|
icon in the lower-right corner of your screen.



Finally, click the “Run” button to generate an updated report that
reflects the filters you’ve selected.

Performing Edits

Depending on the edits you’re making to your Cloud Report, you may have
to re-run your report for the changes to reflect while other edits will
show up in real-time.

Real-time updates

Any edits which don’t alter the results themselves will update the
report in real-time. This includes changes made to:

-   Metric measurement
-   Chart type
-   Sorting of results
-   ML Features such as Trend Analysis or Forecasting

Below, we can see the first three types of real-time edits being
performed.



Edits requiring a refresh

Updates made to reports which require you to refresh it include:

-   Adding additional dimensions
-   Modifying the time interval and/or range
-   Filtering dimensions

Below, you’ll see what it looks like to filter a dimension.


Forecasting

Being able to forecast your future cloud costs is important when trying
to stay within your planned budgets.

With Forecasting in Cloud Analytics Reports, you’ll answer questions
like “How much I am going to pay Google Cloud/AWS this month?” or “How
much I will spend on BigQuery and Pub/Sub during the next 90 days?” in
just one click.

Generate a forecast

Use Forecasting in your Cloud Analytics Reports by selecting the
“Forecast” option from the “ML Features” dropdown on the lefthand set of
options.



Once selected, you will see a forecast line which estimates what your
costs may look like for the period you selected moving forward.

For example, if you selected “Last 30 days” under the “Time Range”
dropdown, your forecast will display cloud cost estimates for 30 days
looking forward.



Identify incomplete billing data

Because billing data can lag behind — sometimes by 12-36 hours —
sometimes you can get an incomplete picture of your daily cloud costs, .

As shown in the example below, in these situations you can use forecasts
to give you an idea of what to expect your cloud costs to be.



Watch this short video explainer for more information

 embed
url=“https://www.loom.com/share/51439d799674427eba2b2f3a7b26cd87” 
Understanding “Minor Values”

To make reports more human-readable, very small values are removed by
default from CMP Cloud Analytics reports, for the Cost metric.

 By default, CMP will remove report result cells
that are < $1. For example, a report that groups by “project” and by
“day”, will not show data for days that have less than $1 

While this is very useful for performing cloud cost analytics, it may
cause reports not to match the invoices, though by a very small amount
(usually far less than US$1).

To make Cloud Analytics reports show “minor values”, please enable the
“Minor Values” filter and run the report again.

Cloud Analytics Report with Minor Values filter disabled

 The “Filtering minor values” option is not
available for “Usage” and “Savings” metrics. 
Understanding Aggregations

Before you can properly control and optimize your Google Cloud costs,
you need to understand where costs originated within your organization.
Aggregations in Cloud Reports help you summarize patterns so you can
more quickly identify the source of potential issues.

In this article, we’ll go over the types of aggregation options you have
available in Cloud Reports. For consistency’s sake, we’ll be showing how
each aggregation looks in a Table view. However, these aggregations can
also be useful in other Chart types and may behave differently as a
result.

Total

In the “Total” aggregation, your results will be displayed in absolute
terms. A row and column, each titled “Totals”, will be added at the end
containing the sum of all of the results per row and column,
respectively.



 of Total

“ of Total” aggregations express each result as a percentage of the
total sum of results. All values of the cell will add up to 100.

If you’re viewing your results in a Table view, then a final column
titled “Totals” will be added at the end containing the sum of all of
the results per row, expressed as a percentage.



 of Column

“ of Column” aggregations display cell values as a percentage of its
column, with each column being represented as 100 in totality.



 of Row

“ of Row” aggregations display cell values as a percentage of its row,
with each row being represented as 100 in totality.



Cost÷Usage

“Cost÷Usage” aggregations are great for use cases requiring
cost-per-unit pricing validation. In the example below, we are using
this aggregation to examine BigQuery SKU costs per project.


Clone Cloud Analytics Reports

For cases in which you’ll want to create a copy of an existing Cloud
Report, you have the option to either:

-   Clone the report
-   Customize the report

Let’s go over the differences, and how to perform each action.

Clone Reports

The “Clone” function is available for all Cloud Reports, whether you
created it or a colleague did. When you clone a report, you create a new
version of it and can make whatever changes you’d like without affecting
the report the cloned version is based on.

To clone a report, open a report and click on the “Clone” button at the
right-hand sidebar of your Cloud Reports screen.

Finally, a new report will appear with the name “A copy of Original
Report Name”. From there, edit the report’s name and make your
modifications.



Customize Reports

The “Customize” function is available for Preset Reports only. These are
built-in reports you have access to right away before creating any
reports yourself. This function allows you to create a copy of a Preset
Report and make modifications on top of it.

To identify a Preset Report, look under the “Type” column for the word
“Preset”.



Then click on the “Customize” button on the right-hand sidebar of your
Cloud Reports screen.



Finally, a new report will appear with the name “A copy of Original
Preset Report Name”. From there, edit the report’s name and make your
modifications.
Manage Budgets

 Note: If you’re new to Budgets and/or aren’t
familiar with Attributions we recommend reading our post on Creating
Attributions before reading further. 

Setting budgets and forecasting IT spend is a well-established FinOps
practice, ensuring that you won’t get surprised by your cloud bill.

Within the Cloud Management Platform, you can set Budgets using
Attributions, custom-defined groupings of cloud resources (accounts,
services, etc.) that map to your organizational and financial reporting
structure.

 Required Permissions: Cloud Analytics   


Creating budgets

Go to the main Budgets page by clicking on the 1 Cloud Analytics icon
in the left-hand navigation panel, and then clicking on the 2 Budgets
tab.

You will see a list of your team’s Budgets that you’ve created, been
shared on, or have been made public if there are any.

To create a new Budget, click the 3 “+ NEW BUDGET” button.



Configure your Budget

After giving your Budget a suitable name, set the Budget’s scope by
selecting the Attribution(s) your Budget will be allocated to. As
mentioned earlier, Attributions let you group any combination of cloud
resources (and their associated costs) so you can better relate cloud
costs to your financial reporting structure.

Next, select the Budget type, time interval, and start date. If you’re
configuring a Fixed Budget, you’ll need to set the end date as well.
After defining the above, it’s time to set your Budget’s amount or upper
limit. Before entering a number, it might be helpful to see what the
last period’s cost was for reference.

Click on the “Refresh” icon to view your last period’s cost, given the
Budget scope, time interval, and date(s) you’ve selected.



After refreshing and setting a Budget amount, two visual bars will
appear below:

-   Current Spend: Your current spend relative to alert thresholds (next
    section) you’ve set.
-   Forecasted Spend: How much you are forecasted to spend by the end of
    the Budget period.

Lastly, if you’re configuring a recurring Budget, you have the option to
factor in growth in spending for subsequent periods. This will adjust
your Budget amount in future periods, increasing it by a growth
percentage rate set by you.

Enable this by checking the “Allow growth in recurring budget periods”
box, and then enter in a  growth rate for each subsequent period.



Set Budget Thresholds

After configuring your Budget, you can set up to three Budget
thresholds. By default, thresholds are set at 50, 85, and 95 of your
Budget amount, but you can modify any of the percentages as you wish.

You will see the corresponding amount for each threshold, and the
forecasted date that you will reach each threshold.

Setting thresholds is useful especially when setting up Budget alerts.

 Note: In order to see forecasted dates for
Budget thresholds, you need to click the “Refresh” button after setting
a Budget amount. 



Sharing Budgets

By default, Budgets are only viewable by the creator. Sharing your
Budget makes it visible to others.

To share your Budget, click the “Share” icon in the top right of the
“Sharing & Alerting” widget.

This will open a pop-up that will give you two options when sharing:

-   Give everyone on your team Viewer access.
-   Explicitly give someone from your team Viewer or Editor Access.

Having View access means the Budget will appear on the main Budgets
page, and that you can view the Budget itself — but you can’t make any
edits to the Budget.

Edit access allows you to edit a Budget, but not delete it. Only those
with Owner access can delete Budgets.

Once you’ve entered the email(s) of who you’re sharing your Budget with,
click “Add” and then hit “Save” to apply your changes.

 Sharing someone on your Budget does not mean
they will be alerted when usage thresholds are exceeded. 



Changing a user’s Budget permission

To change a user’s permission, make them the owner of the report, or
remove them from the report, click on the dropdown next to their email
in the Share Budget pop-up.

Then make a selection and click “Save” to apply the changes.

Receive Alerts for Budgets

Alerts help notify yourself and others when you exceed a Budget
threshold.

To add someone as a recipient of an email alert notification, enter
their email in the “Send to” text box in the “Sharing & Alerting”
widget. If they haven’t been shared on the Budget already, you will be
asked to share it with them first before being able to subscribe them to
the Budget’s alert.

You will see a confirmation in the lower-left corner of your screen when
someone has been successfully subscribed to your Budget’s email alerts.



When you exceed a Budget threshold, you’ll receive an email detailing:

1.  Which budget threshold you exceeded
2.  Your current spend
3.  The forecasted date when you will reach 100 of your budget

Here is what a typical alert looks like:



Video Walkthrough

Watch Budgets in action in the video below:

 embed
url=“https://www.loom.com/share/3588cdf27fd84f7fab8e96ea91b7d7f9?sharedAppSource=personallibrary”

Schedule Report Email Delivery

You can send a copy of your Cloud Analytics report to yourself and your
stakeholders on a regular basis by setting up an email delivery
schedule.

 Required Permissions: Cloud Analytics   


Create a Scheduled Email Delivery

There are two ways to schedule emailed reports:

-   Via a specific Report’s page
-   Via the main Cloud Analytics page

Scheduling via a Report’s Page

Begin by opening a report that you have “Owner” access to. Then, click
on the mail icon at the far-right side of your screen.



Then, configure the scheduled delivery:

-   Set other users, you’d like to be included on report’s distribution
-   Optionally, update email’s subject and the message to provide more
    context for recipients
-   Set up when you’d like to be delivered (using cron expression)



If you’ve included someone who doesn’t have access to the report, you
will be asked to add that user to the report. You can choose whether to
grant the “Viewer” or “Editor” access.



About Cron Expressions

The delivery time and recurrence of a Cloud Analytics Report can be
configured by using a cron expression. Cron is a time-based job
scheduler originally used in Unix-like computer operating systems. A
cron expression is a string comprising of five or six fields separated
by whitespace. The following table defines the fields of a cron
expression and the possible values for each field.

  --------------------------------------------------------------------------
  Minute         Hour           Day            Month          Day of the
                                                              week
  -------------- -------------- -------------- -------------- --------------
  0-59           0-23           1-31           1-12 (Jan-Dec) 0-6 (Sun-Sat)
                                               1=Jan, 2=Feb,  where 0=Sun,
                                               … 12=Dec       1=Mon, … 6=Sat

  --------------------------------------------------------------------------

In addition to using these values, every field in a cron expression can
also use special characters:

  -----------------------------------------------------------------------
  Character               Meaning                 Example
  ----------------------- ----------------------- -----------------------
                         any                     If the day of month
                                                  field, day of the week
                                                  field are each set to
                                                  , then the schedule
                                                  starts every day.

  -                       range                   If the day of week
                                                  field is set to 1-5 or
                                                  Mon-Fri, then the
                                                  schedule starts every
                                                  week Monday to Friday.

  ,                       list                    If the month field is
                                                  set to 5,7,9 or
                                                  May,Jul,Sep, then the
                                                  schedule starts every
                                                  May, July, and
                                                  September.

  /                       step                    If the month field is
                                                  set to /3, then the
                                                  schedule starts during
                                                  the first month and
                                                  every 3 months after
                                                  that: January, April,
                                                  July, and October.
  -----------------------------------------------------------------------

 Schedule intervals lower than daily are not
permitted with Cloud Analytics, meaning the first 2 places must be
numbers between (0-59) and (0-23) 

To create a schedule that repeats, use special characters to describe
when that schedule is to repeat. For example, the cron expression 30 8 
 Mon-Fri configures a schedule to start at 8:30 AM on every Monday,
Tuesday, Wednesday, Thursday, and Friday.

Your scheduled report will look something like the image below. From the
email, you’ll be able to preview the report and open an interactive
report in Cloud Analytics, by using the “Open Live Report” button.

Select the access level you’d like to give them, and click “Add” to give
them access to the report and add them to the list of scheduled report
recipients.



Your scheduled report will look something like the image below. From the
email, you’ll be able to preview the report and open an interactive
report in Cloud Analytics, by using the “Open Live Report” button.

Your scheduled report will look something like in the example below.
From the email, you’ll be able to preview the report and open an
interactive report in Cloud Analytics, by using the “Open Live Report”
button.



Scheduling via the Cloud Analytics page

You may also schedule emailed reports from the main Cloud Analytics
page.

First, find a report that you are the Owner of. Then, under the Email
Schedule column, click on the envelope icon.



From there, configure your report as described above, modifying the
message and interval as well as the recipients.

Updating Scheduled Delivery

To update the scheduled email delivery configuration, open a report that
already has a configured schedule.

Then, click on the blue envelope icon on the far-right side of your
report’s page.

Finally, make the changes then click on the Update button.



You may also update a report’s email delivery schedule from the Cloud
Analytics page.

First, identify a report that you’ve already set up an email schedule
for, and click on the unix-cron interval syntax under the Email
Schedule column for that report.

Then, as described above, make your changes and click on the Update
button to implement your changes.



Subscribing to a Scheduled Delivery

Add yourself as a recipient of someone else’s scheduled report delivery
to stay updated on reports other people on your team create.

Similar to creating a scheduled email delivery, you can subscribe to
others’ scheduled emails from both the main Cloud Analytics page and a
specific report’s page.

From the main Cloud Analytics page, identify a colleague’s report that
has a scheduled email set up already by looking for a blue envelope icon
under the Email Schedule column.



Conversely, you can subscribe to a colleague’s scheduled email from a
specific report’s page itself.



Confirm that you’d like to be added to the report’s email distribution
by clicking on Subscribe.



Deleting Scheduled Delivery

If you need to delete the scheduled report, please use the Delete button
on the “Schedule Report Email Delivery” dialog.



Limitations

A few limitations exist for scheduled reports:

-   Each report can only have a single email delivery schedule
-   Preset reports cannot be scheduled. You can clone the report though
    and schedule it.
-   The person who scheduled the report is always included in the email
-   You can’t schedule a report to be delivered more than once a day.
-   Only chart-based reports can be scheduled (i.e. no tables or
    heatmaps at this time)
Attribute Cloud Spend

Attributions are a flexible way to group resources and their associated
costs, helping you understand the cloud costs and relate them to the
business in your Cloud Reports.

You may have various components of your application(s) spread across
different projects, using different services. Attributions allow you to
combine everything into something coherent.

 Required Permissions: Cloud Analytics   


Creating an Attribution

To create an attribution:

1.  Click on the Cloud Analytics icon on the left hand navigation panel
2.  Switch to the Attributions tab
3.  Click the “+ NEW ATTRIBUTION” button



Next, you will be taken to an attribution creation page, where you will
configure its conditions and settings.

To start, give your Attribution a name that gives some context. In our
example, we’ll be creating attributions to group costs for different
teams: production, dev, and ops.

If you want to give even more context to your Attribution, you may give
it a description by clicking on the icon at the far-right end of the
text box.



Now it’s time to configure the conditions, or the criteria, which will
determine what falls under your Attribution. You have the option to
either set as meet “ALL” or “ANY” of the conditions. This will switch
between “AND” to “OR” relations.



You will have every cloud billing dimension to choose from; as well as
any custom, project, and system labels. Select the field(s) you’d like
to include as part of your Attribution from the dropdown:



From there, filter your selections either by keyword, exclusion, or
regular expression just as you would do in Cloud Analytics Reports.
Continuing our example from above, let’s filter for projects which the
production team uses.



Finally, click “Save” to apply the filter on your condition.

Once you’ve set a condition, a quick preview will appear showing your
attribution’s costs over the last 30 days. This will continue to update
as you add more conditions. This way, you can easily validate the
conditions of your attribution.



Using our example from above, we will also create similar attributions
for dev and ops teams.

 You should not set multiple separate conditions
with the same field — unless there is an exclusion set up in one of
those conditions. 

Using Attributions in Cloud Analytics Reports

Finally, once an attribution is created, you’ll be able to use it your
Cloud Analytics Reports by adding the Attributions chip to the
break-out/group-by section, or by filtering them.

Note the “Attribution” chip in the group-by section for Report below:



In the event that you have many attributions, make sure to click on the
Attribution chip to filter the ones you want to include in your report.

In the example above, we made sure to filter for the production, dev,
and ops team attributions we created earlier.



View the bite-sized video below for a closer look at Attributions and
using them in your Cloud Reports.

 embed
url=“https://www.loom.com/share/8d36dbd796c84d51a26b3f836226c883?sharedAppSource=teamlibrary”

Share and Download Cloud Analytics Reports

1) Sharing Cloud Analytics Reports

Note: If you’re new to Cloud Reports and/or haven’t created a Cloud
Report yet, we recommend reading our post on Creating Cloud Reports
before reading further.

Before discussing how to share a Cloud Report, let’s briefly review
roles and permissions.

Available Sharing Permissions:

-   Viewer: Sees the report in “read-only” mode. Can only modify
    “Metric” and the chart type.
-   Editor: Can modify all settings of a Cloud Report, and share the
    report with others.

How to share a report

To share a Cloud Report with your team, click the “Share” button on your
report’s page.



This will open a pop-up that will give you two options when sharing:

-   Give everyone on your team Viewer access.
-   Explicitly give someone from your team Viewer or Editor Access.

Once you’ve entered the email(s) of who you’re sharing your Cloud Report
with, click “Add” and then hit “Save” to apply your changes.



Once a report is shared, the recipient(s) will receive an email that
looks like this:



Editing a user’s role

To change a user’s role, make them the owner of the report, or remove
them from the report, click on the dropdown next to their email in the
Share Report pop-up. From there, make a selection and click “Save” to
apply the changes.



2) Downloading Cloud Analytics Reports

In Cost Analytics > Reports, once you have saved your report you can
download it, following these steps:

1) Click on this icon on the side:



2) Choose between “Export to CSV” and “Export to Google Sheets”


Access Public Dashboard

In order to access a Public Dashboard that was created by another user
in your organization, go to the right-hand side of the page, and click
’Attach’.



Choose a dashboard from the dropdown list, and click ‘Attach’.



Instantly, you’ll see the dashboard appear in the exact format from
which it was created. As a user, you have the ability to edit this
dashboard by using the ‘Customize’ button. The ‘Add Widgets’ button on
the bottom right is available as well.



However, now you can see that the dashboard owner changed the permission
and is not allowing others to edit, as a lock icon appears in place of
the globe icon.


Widgets Overview

Widgets are an essential aspect of the home dashboard in the Cloud
Management Platform customization. You can change the location of the
widgets by clicking the ‘Customize’ button and reordering the widgets on
your dashboard, as well as remove them altogether if you wish.

Manage Licenses & Assets opens the assets page which you can use to
purchase additional licenses and subscriptions for G Suite and Office
365.

Access & Pay Invoices provides a list of your company’s invoices from
DoiT International, including their amounts, payment status, and invoice
details.

Access Support is used to create new customer service requests or access
existing requests previously opened by you or someone on your team.

Please note that if one of the items on that list is disabled (grayed
out), it means your user doesn’t have the appropriate credentials
required to perform this action.

Essential Contacts

There are several people involved in making sure your cloud assets are
managed to the best possible extent and you’re enjoying the best
service. Usually, it’s the group of your DoiT International and
Google/Amazon/Microsoft account managers, depending on which cloud
platforms your company uses.

Using this widget you can see who is your account manager at DoiT
International as well as at Google, Amazon, and Microsoft. You can use
this information to send an email to your Account Manager by clicking on
their email address. When using a mobile device, click on the phone
number and to dial.



Please note that when you open a new service request, your account
manager will be copied to the correspondence. Depending on the chosen
cloud platform of the service request, Google, Amazon and Microsoft
account managers will be included as well.

Billing Profiles

This widget lists all of your company’s billing profiles, including some
basic information such as your billing profile’s ID, currency and
payment method. You can use this widget to update your billing profile
by clicking the edit icon.



Latest Invoices

By clicking on the invoice number, you can quickly access the specific
invoice.



Overdue Payments

View the overdue payments and see the total amount due in the top
right-hand corner.



Credits

Subject to the available credits your company has for AWS and/or Google
Cloud products, you’re able to get a glance at the remaining/used
credits, sum, and expiration dates.



Licensing Activity

Increase and decrease of licenses in the represented subscription (i.e.,
G Suite Basic) for the last 12 months. In addition, you can filter the
license activity by subscription by clicking the filter button and
selecting the subscription you’d like to inspect.



Support Requests

The activity of your company’s customer service requests over the last
36 months. Each bar represents how many support requests your company
has made with DoiT International per month.



Monthly Cloud Cost History

Review your AWS consumption over the last 12 months. The bars represent
AWS services consumption per month and the different gradients show the
amount that each product consumed. Please note that the chart contains
only the top 10 AWS services consumed by your accounts.

On the top right-hand corner is the machine learning prediction for the
current month.



Review your Google Cloud consumption over the last 12 months. The bars
represent Google Cloud services consumption per month.

On the top right-hand corner is the machine learning prediction for the
current month.



Cloud Commitment

Analyze your Google Cloud or AWS attainment to your contractual
commitments, including forecasts of your future expenses towards the
commitment. Using this widget, you can track your actual spending, the
remainder of the contract, and managing the rollover for the following
period. Also, if you fall short of your commitment for a specific
period, you can identify the shortfall.

The chip on the top right-hand corner of the widget displays the
forecast of estimated spending for the current period.

The dark blue section of the bar displays the actual spend, and you will
be able to see an even darker shade of blue if/when you have a rollover
to the next period.

The light blue section of the bar displays the remaining commitment. The
pink section of the bar displays the shortfall, i.e., your actual
consumption is less than the commitment.


Adding Reports to a Dashboard

CMP Dashboards help you visually track and analyze key cloud data points
& metrics. Create personal dashboards, project dashboards, team-specific
dashboards and more, depending on what you would like to track more
closely.

Adding Cloud Analytics Reports into customizable dashboards gives you an
at-a-glance view of your most important cloud infrastructure data
points.

 Required Permissions: Cloud Analytics (part of
‘Standard User’ preset role) 

Adding Reports to a Dashboard

Add your report to a dashboard by clicking the ‘Add to dashboard’ icon
in the upper right-hand corner of the report.



 Only chart-based reports can be added to your
dashboards. Table-based and heatmap-based reports are currently not
supported in dashboards. 

Next, select which dashboard(s) you’d like to add the report to. You may
also toggle the report to be addable from the Widget Library.



Additionally, you may also add a report to a new, yet-to-be-created
dashboard. To add the report to a new dashboard, click on the “NEW
DASHBOARD” button, give your dashboard a name, and click “Save”.



Check the box of the newly-created dashboard to add your report there as
well.



Next, navigate to your dashboard(s) to view the report(s) you added.

From there, you’re free to customize the size and arrangement of the
widgets as you see fit. Note that report data displayed in the widget
will refresh every four hours.



Finally, if you’d like to quickly navigate to your report to investigate
further or edit something, you may click on the report’s name in the
widget.

 embed
url=“https://www.loom.com/share/4f125260e1214c6f9b85002ca13e6ade?sharedAppSource=personallibrary”

AWS FinOps Dashboard

Having full visibility into your services’ operations and being
accountable for your cloud finances to fully manage costs is crucial,
whether fixed or variable. Use this dashboard to decide how and when to
optimize costs, monitor performance, and more. The AWS FinOps dashboard
can only be attached if you have Amazon Web Services assets linked to
DoiT International.

 Please note that you must be assigned access
to the specific Billing Profile under which the domain is managed in
order to invite an existing account. 

Your first step would be attaching the AWS FinOps dashboard within the
Cloud Management Platform.

Please navigate to the right-hand side of the page and click ‘Attach
Dashboard’:



From the list, select ‘AWS FinOps’ and click ’Attach” to access the AWS
FinOps dashboard.



The AWS FinOps dashboard is now available with an analysis of the AWS
services you use.



Each of the six widgets serves its own purpose and will reflect the data
filtered by month and year:

Cost History - Review your AWS expenses over the last 12 months, and get
a look into next month’s AI-assisted cost prediction, listed at the top
right-hand part of the widget.





AWS Cost - Helps you to review AWS services your app/s is using
including several preconfigured breakdowns such as; AWS Service,
Component, AWS Account, and Region. Select the breakdown configuration
from the first dropdown.



EC2 Lens - Focus on Amazon EC2 service for your compute based workloads
with a breakdown by; Reservation, Accounts, Regions, Instance Type, and
O/S. This will help you with identifying the major cost factors of
Amazon Elastic Compute Cloud.



S3 Lens - Focus on how your application uses AWS Simple Storage System
(S3), and monitor your costs with a breakdown by; Bucket, Storage Type,
and AWS Account.



EBS Lens - Review your Amazon Elastic Block Store (EBS) costs to gain
insights on what is driving the cost with a breakdown by; Volume Types,
Accounts, Volumes, and Availability Zones.





Network Lens - Gain insights on how your application uses the AWS
network with a breakdown by; Traffic Type, Origins, Service, and
Destinations.


Rightsizing for Google Cloud

DoiT International makes rightsizing recommendations for Google Cloud
assets available through the Cloud Management Platform. Our customers
can apply these recommendations, and resize instances to cost optimize
their environments.

To use Rightsizing for Google Cloud, you must verify that your service
account was successfully uploaded and granted the appropriate
permissions. You can read more on how to configure your Google Cloud
accounts at Connect Your Google Cloud Organization.

If successful, you will see:

-   Either a Healthy or Partial value underneath the Status column
    in your Configured Accounts widget, and
-   Healthy status next to “Rightsizing Insights” under the Features
    widget, and
-   Healthy status next to “Rightsizing Resize” under the Features
    widget

 This is optional. However, without the permissions granted here, you
will have to make the rightsizing changes yourself in the Google Cloud
Console, as opposed to doing it in a couple of clicks from the CMP.

Please note that if the status reads ‘Unhealthy’, you may be lacking
permissions. Refer back to the Connect Your Google Cloud Organization
article on how to configure your account.



Once that’s been set up, you can add the ‘Recommendations’ widget to any
of your dashboards within the Cloud Management Platform.

Navigate to the dashboard you’d like to add the widget to, locate the
‘Add Widgets’ button and search for ‘Recommendations’ and add the widget
to your dashboard.

If the Service Usage API is disabled in your cloud environment, you’ll
need to enable it via the ‘Click Here’ button within the widget. Once
you do so, confirm the action by clicking on ‘I Have Enabled The
Service’.



Recommendations for cost savings will now be presented. Click on the
recommendation to further inspect the instance.



In this dialogue, you will be able to apply the recommendations in order
to save costs by changing machine types. DoiT International provides any
further recommendations within 24 hours after the change. Afterward,
instance recommendations are refreshed at regular intervals throughout
the day. To apply the recommendation, stop the instance for the Current
machine type that’s currently under the status ‘Running’, then click
‘Apply’. You will then be able to start the instance for the New machine
type once it reloads.



View the bite-sized video below for a closer look at Rightsizing Google
Cloud Instances.

 embed
url=“https://www.loom.com/share/cecfc1a7f3d84240a5be922e27c0ac56?sharedAppSource=teamlibrary”

Create New Dashboard

You can maintain multiple dashboards in your Cloud Management Platform
to visualize metrics, manage licenses, and access important data for
your organization.

In order to create a new dashboard, go to the right-hand side of the
page and click ‘Add Dashboard’.



Create the ‘New Dashboard’ and choose a name, for example, ‘AWS’,
‘Google Cloud’, ‘Finance’, ‘Ops’, or anything else that suits your use
case.

Every dashboard can be ‘Private’, or ‘Public’.

-   Private - only you can view the dashboard
-   Public - any user in your organization can access this dashboard

When creating a new public dashboard, choose whether or not to grant
other users permission to edit the dashboard by switching on the ‘Enable
others to edit’ toggle.



Once a dashboard has been created, adding widgets is the next step in
the dashboard customization process. Go to the bottom right-hand corner
and click ‘Add Widgets’.



Select widgets from the Widgets Library you’d like to add to your
dashboard.



In the following example, I created a customized dashboard named “Cloud
FinOps”.



Considering that a user can have multiple dashboards which can be either
‘Private’ and ‘Public’, notice the globe icon next to a dashboard title;
the globe icon represents a ‘Public’ dashboard. There are a few
dependencies for recognizing a dashboard as Private or Public :

1.  Globe icon + ‘Customize’ button disabled + ‘Add Widgets’ button
    doesn’t appear - public, non-editable dashboard
2.  Lock icon - your own private dashboard
3.  Dashboard title text is highlighted blue - currently viewing
    dashboard

For more info on accessing a Public Dashboard, go here.
BigQuery FinOps Dashboard

Overview

BigQuery FinOps is your Swiss army knife for highlighting inefficiencies
in your organization’s BigQuery usage, and its insights are displayed in
the BigQuery FinOps Dashboard, located in your Cloud Management
Platform. Without configuring anything, you’ll have the most important
BigQuery insights brought to you.

 To access the BigQuery FinOps Dashboard, you
must verify that your Google Cloud service account was successfully
uploaded and granted the appropriate permissions. Read more on linking
your Google Cloud Organization. 

If successfully uploaded, you will see:

-   Either a Healthy or Partial value underneath the Status column
    in your Configured Accounts widget, and
-   Healthy status next to “BigQuery FinOps” in the Features widget.
-   Optional Healthy status next to “BigQuery FinOps Advanced” in the
    Features widget



Setup

Once the Google Cloud Service Account setup is complete, click the
’Attach’ button and choose the BigQuery FinOps dashboard from the list.



Cloud Management Platform will now start gathering the information on
your usage patterns.

 The BigQuery historical jobs are backfilled for
the last 30 days 

 While this information is being collected,
your BigQuery FinOps will have the three following states: 

1) We have started to analyze your historical usage. So far we have
processed X. In the meantime, you can explore our training Perks!



2) The scan is completed, and X of your data was already processed. You
are almost there!



3) BigQuery FinOps highlights inefficiencies in your BigQuery usage. The
analysis represents the last 30 days of use.

Once available, you’ll see the dashboard appear with the statistics of
your organization’s BigQuery usage.

Understanding the BigQuery FinOps Dashboard

The BigQuery FinOps dashboard is compiled of widgets that will provide
you more insight into your organization’s statistics.



Elements of the Dashboard

Below is a list of the elements that make up your BigQuery FinOps
dashboard, with an understanding of their purpose:

1. Timeframe - all insights displayed are from the last 30 days.

2. BigQuery Spend by SKU - cloud cost and usage analytics

3. BigQuery Recommendations - comprehensive recommendations with further
details on how to act on each recommendation.

4. BigQuery Explorer - get more granular information as far as your
team’s BigQuery usage, completely modifiable by the user in the
following format:

Top 10 (Project, Billing Project, Dataset, Table, User) by (Scan Price,
Scan TB, Storage Price, Storage TB).

Clicking on one of the results in the BigQuery Usage Explorer widget
will open a pop-up where you can get even more granular with your usage
insights.

5. BigQuery Scans by Table Type - see how much data you are scanning
from various types of tables, broken down between unpartitioned tables
and various types of partitioned tables, along with external sources
such as Google Sheets.

Click on a specific table type to see what are the most
frequently-scanned tables within that type.

Note on the BigQuery FinOps Advanced

BigQuery Recommendation Types

Below is a list of the recommendation categories you’ll see in the
BigQuery Recommendations widget, and how to use the information
contained within each recommendation.

Backup and Remove Unused Tables - Backup and remove the unused tables
listed under the “Table” column. If the table has multiple partitions,
click on the number listed under “Partition(s) to Remove” to see
precisely which partitions should be removed.

Cluster your tables - Cluster the tables listed under the “Table” column
by the field(s) suggested under the “Cluster By” column.

Enforce Partition Fields - Use the suggested partitioned fields(s) under
the “Partition Field” column for the corresponding queries listed under
the “Query ID” column.

Partition your tables - Partition the tables listed under the “Table”
column by the suggested field(s) listed under the “Partition Fields”
column.

Limit query jobs - Reduce job execution frequency of the listed jobs
under the “Query ID” column by the percentage you choose on the slider,
and view the associated savings of each reduced job under the “Savings
by Reducing Jobs” column.

 The BigQuery Finops Dashboard does not currently
reflect reservations and your job costs are displayed as on-demand. If
you use reservations, please disregard the BigQuery Finops Dashboard’s
recommendations until we include reservations in our future release. 
  

BigQuery FinOps Frequently Asked Questions (FAQ)

Oftentimes we get asked what the non-read-only permissions are for, and
so we’d like to share more about how it plays into the process of
creating your BigQuery FinOps Dashboard.

What are the permissions we are referring to?

bigquery.datasets.create, logging.sinks.create, bigquery.jobs.create,
and bigquery.tables.getData

Why do you separate between BigQuery FinOps and BigQuery FinOps Advanced permissions?

We require bigquery.tables.getData in order to provide clustering
recommendations, and this is separated from the permissions required
under the BigQuery FinOps feature.

This allows us to query your BigQuery tables and determine your top 20
non-clustered tables, which field(s) are the best candidates to cluster
those tables by, and in what order.

More specifically, this helps us identify the cardinality of the columns
in your top 20 non-clustered tables which get referenced in the WHERE
clause and are possible to cluster on. Knowing how many distinct
elements exist in each column enables us to compute the average chunk
size and see what the best candidates in terms of savings would be.

However, you can still use and benefit from the BigQuery FinOps
Dashboard without receiving clustering recommendations. That’s why we
separate the two.

 Given that you execute similar queries as you
did during the previous 30 days, and reference fields in the order we
recommend. 

What datasets are you creating, where and for what purpose?

A dataset called doitintl-cmp-bq is created in the billing project
attached to the service account you add to the CMP.

What log sinks are you creating, where and for what purpose?

A sink for query jobs is created in the same project as (1). This sink
pushes all your bigquery jobs into a table under
<PROJECTID>.doitintl-cmp-bq. cl oudauditgoogleapiscomdata access

What queries will you be running, where, and for what purpose?

We have two main processes, once of which runs queries and the other
not: 1) Enrichment process: We take the data from doitintl-cmp-bq.
cloudaudit googleapiscomdataaccess and create a new table
doitintl-cmp-bq.enrichedJobs. This is done at no cost to you, but rather
an algorithmic and API based enrichment from our side to have a clean
dataset to work with in the processes that follow. 2) BigQuery Finops
process: We create a few UDF’s under the doitintl-cmp-bq dataset, as
well as two more derived tables called pegUtilsT2 and queries. These
support the FinOps in running over aggregated data, rather than raw
data. The following queries are executed as part of the process (2)
above:

-   Aggregations into pegUtilsT2 and queries tables
-   Daily run of cost simulation queries to provide the cost savings
    information and potential savings.
-   Daily run of FinOps calculation queries to provide the richly
    detailed information you see in the CMP on your BigQuery usage.

View the bite-sized video below for a quick tutorial on the BigQuery
FinOps Dashboard.

What does it mean when I see “Not yet allocated” in the Cost Explorer?

You will see “not yet allocated” when analyzing dimensions like Projects
in the BigQuery Explorer when we aren’t able to detect which table a
query is scanning.

This could be because of queries like “SELECT 1” or queries we aren’t
able to parse due to complexity (parser times out), or it uses a
function/statement which we don’t support yet.

How much does BigQuery finops cost monthly? I understand that BQ datasets are created in the background.

Typically, it’s less than $10 per month.




Customize Dashboards

To personalize the appearance of your Home Dashboard, you can reorder
the widgets to your preference, or remove them from the dashboard
entirely.

On the Home Dashboard go to the right-hand side of the page and click on
‘Customize’.



After clicking the ‘Customize’ button, you can move the widgets around
and in addition, remove them from the dashboard.



After clicking ‘Done’, I have my new view of the Home Dashboard.


CMP Data Access Policy

This document outlines what customer data Cloud Management Platform
accesses, why, what data is stored, and how we do that. If you’re not
using DoiT Cloud Management Platform for the following features, this
article doesn’t apply.

-   Enterprise Cloud Accounts (formerly Sandboxes)
-   Google Cloud Rightsizing
-   Google Kubernetes Engine Metering
-   BigQuery FinOps
-   Google Cloud and/or AWS Proactive Quota Monitoring
-   AWS ASG Optimizer

TL;DR: We only access data required for Cloud Management Platform (CMP)
functionality. We store and handle your data in a secure way, encrypted
in transit and at rest. We do not provide the data to any 3rd party,
with the exceptions required for core CMP functionality and listed
below.

What we access 

The list below denotes all permissions we require to your Google Cloud
Organization and why.

 While this provides us permissions to read info
about your resources, none of these allow us to access your data, such
as GCS objects or a BigQuery table’s data. 

The following permissions are used to get information about your Google
Cloud resource hierarchy and correlate it with billing.

    resourcemanager.organizations.get
    resourcemanager.organizations.getIamPolicy
    resourcemanager.folders.get
    resourcemanager.folders.list
    resourcemanager.projects.get
    resourcemanager.projects.list

The following permission is required for CMP Sandbox functionality
(create Google Cloud projects)

    resourcemanager.projects.create

The following permissions are required to provide you with Rightsizing
Recommendations for your Google Compute Engine instances across your
entire organization

    recommender.computeInstanceMachineTypeRecommendations.list
    compute.instances.list

The following set of permissions required for implementing Rightsizing
recommendations:

    compute.instances.setMachineType
    compute.instances.stop
    compute.instances.start 

The following permissions are used to check the status (and enable if
required) Google Cloud APIs (such as the Recommender API)

    serviceusage.services.enable
    serviceusage.services.get
    serviceusage.services.list
    serviceusage.services.use

The following permissions are required for the BigQuery FinOps Dashboard
to get actionable cost optimization recommendations for your Google
BigQuery environment.

    logging.sinks.create
    bigquery.datasets.create
    logging.sinks.get
    bigquery.datasets.get
    bigquery.tables.get
    bigquery.tables.list
    bigquery.jobs.get
    bigquery.jobs.list
    bigquery.jobs.listAll
    bigquery.jobs.create

The following permissions are required to list your clusters for their
GKE usage metering export configuration used to enable GKE reports in
cloud analytics.

    container.clusters.list
    container.clusters.get

The following policies/permissions are required to proactively monitor
AWS Quotas, access to the billing data, as well as the security posture
of your AWS accounts:

    arn:aws:iam::aws:policy/SecurityAudit
    arn:aws:iam::aws:policy/AWSSavingsPlansReadOnlyAccess
    arn:aws:iam::aws:policy/job-function/Billing
    support:DescribeTrustedAdvisorCheckSummaries
    support:DescribeTrustedAdvisorCheckRefreshStatuses
    support:DescribeTrustedAdvisorChecks
    support:DescribeSeverityLevels
    support:RefreshTrustedAdvisorCheck
    support:DescribeSupportLevel
    support:DescribeCommunications
    support:DescribeServices
    support:DescribeIssueTypes
    support:DescribeTrustedAdvisorCheckResult
    trustedadvisor:DescribeNotificationPreferences
    trustedadvisor:DescribeCheckRefreshStatuses
    trustedadvisor:DescribeCheckItems
    trustedadvisor:DescribeAccount
    trustedadvisor:DescribeAccountAccess
    trustedadvisor:DescribeChecks
    trustedadvisor:DescribeCheckSummaries

AWS ASG Optimizer analyzes your Auto Scaling Groups based on cost and
usage and get recommendations to replace on-demand EC2 instances with
Spot instances.

    autoscaling:BatchDeleteScheduledAction
    autoscaling:BatchPutScheduledUpdateGroupAction
    autoscaling:CreateOrUpdateTags
    autoscaling:UpdateAutoScalingGroup
    autoscaling:Describe
    cloudformation:ListStacks
    cloudformation:Describe
    ec2:CreateLaunchTemplate
    ec2:CreateLaunchTemplateVersion
    ec2:ModifyLaunchTemplate
    ec2:RunInstances

What we store

We only store data required for CMP functionality.

-   Cloud Billing exports - required for core Billing functionality;
    stored in BigQuery
-   User information - required for core CPM functionality; stored in
    Firestore
-   Assets created via using CMP (Invoices, Billing Profiles, etc.) -
    required for core CMP functionality; stored in Firestore
-   Contracts - required for core CMP functionality; stored in Google
    Cloud Storage
-   Service Account Keys - required for core CPM functionality; stored
    in Firestore and encrypted with KMS

How we handle and store your data 

All data we handle are encrypted in transit using industry-standard
protocols like HTTPS (TLS).

All data we store are encrypted at rest:

-   Google BigQuery - using Google-managed encryption keys and Advanced
    Encryption Standard (AES)
-   Google Firestore - using Google-managed encryption keys and AES
-   Google Cloud Storage - using Google-managed encryption keys and AES
-   Service Account Keys - encrypted using Google Cloud KMS and stored
    in Google Secret Manager

Who can access your data? 

DoiT International employees in customer-facing roles, such as Account
managers and Support engineers, can access your data using the CMP
platform. Only a small team of core CMP developers is able to access
your data directly in the underlying storage.

Service Account keys are only used by backend systems to retrieve
relevant data from GCP. Only a small team of core CMP developers has
access to the KMS keys used for encryption and would be able to decrypt
the keys.

3rd parties 

We do not provide your data to any 3rd party, with the exceptions listed
below required for core CMP functionality.

-   CMP Support - We use Zendesk as a backend for support ticketing
    functionality. All ticket-related data are stored in Zendedsk and
    retrieved using Zendesk APIs 1.
-   Payments - We use Stripe for payments. All payment-related data
    (such as Credit card or bank account details) are stored in the
    Stripe platform and used via Stripe APIs 2.

Compliance 

EU and GDPR Compliance - we have many customers in the European Economic
Area and we handle your data in compliance with the General Data
Protection Regulation (GDPR) 3.

We’re working towards completing our SOC 2 Type 2 audit. We anticipate
the Type 2 report being available during Q2, 2021.

External references 

-   1: Zendesk Privacy and Data Protection:
    https://www.zendesk.co.uk/company/privacy-and-data-protection/
-   2: Stripe Global Privacy Policy: https://stripe.com/gb/privacy
-   3: EU Data Protection page:
    https://ec.europa.eu/info/law/law-topic/data-protectionen
General Vendor Information

If you need to setup DoiT International as a new vendor in your systems,
you’re welcome to use the following information according to the
geography where we do business:

United States

-   Our company name is DoiT International USA, Inc
-   Our W9 form is available at http://l.doit-intl.com/w9
-   Our EIN is 36-4866702
-   Our address is: 5201 Great America Parkway, Suite 320, Santa Clara,
    CA 95054

United Kingdom

-   Our company name is DoiT International UK&I, Ltd
-   Our VAT number is 349 5963 45
-   Our address is: 201 Haverstock Road (2nd-floor) London, NW3 4QG,
    England, United Kingdom

Germany

-   Our company name is: DoiT International, DACH GmbH
-   Our VAT number is DE331662430
-   Our address is: Amelia-Mary-Earhart-Straße 8 Frankfurt, 60549

France

-   Our company name is DoiT International France SAS
-   Our RCS Registration Number is 884 924 051 R.C.S. Paris
-   Our address is: 4 rue de Marivaux 75002 Paris

Australia

-   Our company name is DoiT International AUS Pty, Ltd
-   The company number is 03243570
-   Our address is 30 Wellington Park Drive, Warranwood, VIC 3134

Israel

-   Our company name is DoiT International Ltd
-   The company number is 514554328
-   Our address is David Elazar 12, Tel Aviv, 6107408

Netherlands

-   Our company name is DoiT International NL B.V.
-   Our VAT number is n/a
-   Our address is: Claude Debussylaan 10, 1082 MD Amsterdam, NL

Switzerland

-   Our company name is DoiT International CH Sarl
-   Our VAT number is n/a
-   Our address is: rue d’Italie 10, 1204 Geneve

Canada

-   Our company name is DoiT Holdings International CA Ltd.
-   Our ABN is 40 638 259 355
-   Our address is 20th Floor, 250 Howe Street, Vancouver, BC V6C 3R8
    Canada
Exchange rates

When DoiT International charges in local currency, we convert prices
pursuant to the conversion rates published by leading financial
institutions. Like many other large companies, we are using
https://fixer.io to obtain historical currency exchange rates.

 We will not notify you for increases in non-USD
prices that are due to currency conversion fluctuations. 

2021 Historical Rates

  Month           EUR        GBP        CAD        AUD
  --------------- ---------- ---------- ---------- ----------
  January 2021    0.82485    0.730098   1.28032    1.31242
  February 2021   0.8272     0.715735   1.269705   1.289985
  March 2021      0.852765   0.72545    1.25652    1.316881
  April 2021      0.831981   0.723772   1.229005   1.29584
  May 2021        0.817428   0.70295    1.206105   1.291156
  June 2021       0.852765   0.72545    1.25652    1.316881
  July 2021       0.842673   0.719166   1.247735   1.36147
  August 2021     0.846775   0.72711    1.261665   1.366299
Our Subprocessors

The table shows what activity each entity performs and indicates if an
entity is only relevant to a specific Service or Region. More
information about each activity is provided directly below. This
explains the limited processing of Customer Data the entity is
authorized to perform.

Subprocessor
Description
Location
GDPR
Google, Inc
Google Cloud Platform provides infrastructure as a service, platform as
a service, and serverless computing environments.
Seattle, WA
Compliant.
Contact.
Amazon, Inc
Amazon Web Services provides on-demand cloud computing platforms and
APIs to individuals, companies, and governments, on a metered
pay-as-you-go basis.
Mountain View, CA
Compliant.
Contact.
Stripe, Inc.
Stripe offers payment processing and anti-fraud tools which DoiT
International uses to accept payments from customers, manage
subscriptions, and perform transaction reporting. Stripe is certified as
a PCI Level 1 Service Provider, which is the most stringent level of
certification available in the payments industry.
San Francisco, CA
Compliant.
Contact.
HubSpot, Inc.
HubSpot provides tools for customer relationship management (CRM),
social media marketing, lead generation and web analytics. It has TRUSTe
certification for Enterprise Privacy and its IT is audited as part of
the Sarbanes Oxley compliance. DoiT International uses HubSpot CRM and
analytics tools to manage and automate our sales processes.
Cambridge, MA
Compliant.
Contact.
Zendesk
Zendesk is a helpdesk software provider. It is compliant with SOC 2/3,
ISO 27001 and other security regulations. DoiT International uses
Zendesk to accept the customer support tickets, manage and automate the
technical support services.
San Francisco, CA
Compliant.
Contact.
Algolia
The Algolia model provides search as a service, offering web search
across a client's website using an externally hosted search engine.
Algolia provides their search service via various APIs.The Rest API
provides basic features of search, analysis and monitoring.
San Francisco, CA
Compliant.
Contact.
Fullstory, Inc
FullStory is a new kind of platform, designed to help companies answer
any question they might have about their digital experience.
Atlanta, GA
Compliant
Mixpanel, Inc
Mixpanel is a business analytics service company. It tracks user
interactions with web and mobile applications and provides tools for
targeted communication with them. Its toolset contains in-app A/B tests
and user survey forms. Data collected is used to build custom reports
and measure user engagement and retention.
San Francisco, CA
Compliant.
Contact.
Segment Inc.
Segment is a popular tool that can be used to collect and send data to
various places, including, Zendesk, Optimizely, and one of our
favorites, Google Analytics. Segment can be a good option for companies
that are sending data to several databases and integrating with lots of
different marketing tools.
San Francisco, CA
Compliant
Contact.
External Services We Use

We rely on several 3rd party services which you may need to whitelist in
your personal firewall. These are the mandatory services for Cloud
Management Platform to function:

    https://.googleapis.com
    https://accounts.google.com
    https://apis.google.com
    https://fonts.gstatic.com
    https://.stripe.com
    https://.stripe.network
    https://.plaid.com

These services are optional and they help us to make Cloud Management
Platform better:

    https://.mxpnl.com
    https://.announcekit.app
    https://.uservoice.com
    https://.fullstory.com
    https://.pingdom.net
Manage Roles

If you don’t want to give a user full access to the Cloud Management
Platform, you can let them perform only a subset of tasks by assigning a
role. Roles make it easy to assign multiple permissions and manage users
more efficiently in your organization.

 Required permission to manage and assign roles:
User Manager 

 Prior to Roles, CMP users were manually
assigned permissions. These legacy permissions are forward-compatible,
so you will not lose access to any functionalities you previously had
access to. 

Pre-built roles

There are a few pre-built roles in your account for your convenience.
The easiest way to give user privileges is to assign pre-built roles.
Each role grants one or more privileges that together, allow performing
a common business function. For example, one role allows managing user
accounts, another role manages financial aspects, another role manages
IT functions, and so on.

Basic Role

  Privileges   Only users with privilege can:
  ------------ -----------------------------------------------------------
  Support      create new and access existing technical support requests

IT Manager

  Privileges       Only users with privilege can:
  ---------------- -----------------------------------------------------------
  Support          create new and access existing technical support requests
  Assets Manager   view and manage assets, including managing licenses

Finance User

  -----------------------------------------------------------------------
  Privileges                          Only users with privilege can:
  ----------------------------------- -----------------------------------
  Support                             create new and access existing
                                      technical support requests

  Billing Profiles Admin              create new and manage existing
                                      billing profiles, including payment
                                      method

  Invoice Viewer                      access invoices

  Cloud Analytics                     create new and access existing
                                      Cloud Analytics Reports

  Contracts Viewer                    provides access to the commercial
                                      contracts

  Perks Viewer                        access and request Perks

  Anomalies Viewer                    access Cost and Usage Anomalies
  -----------------------------------------------------------------------

Standard User

  -----------------------------------------------------------------------
  Privileges                          Only users with privilege can:
  ----------------------------------- -----------------------------------
  Support                             create new and access existing
                                      technical support requests

  Cloud Analytics                     create new and access existing
                                      Cloud Analytics Reports

  Sandbox User                        create disposable cloud
                                      environments (sandboxes) according
                                      to company policy

  superQuery                          unlimited access to the superQuery
                                      IDE

  Contracts Viewer                    provides access to the commercial
                                      contracts

  Perks Viewer                        access and request Perks

  Anomalies Viewer                    access Cost and Usage Anomalies

  Issues Viewer                       access to cloud outage information

  Budgets Manager                     create, delete and manage budgets

  Attributions Manager                create, delete and manage
                                      attributions
  -----------------------------------------------------------------------

Power User

  -----------------------------------------------------------------------
  Privileges                          Only users with privilege can:
  ----------------------------------- -----------------------------------
  Support                             create new and access existing
                                      technical support requests

  Cloud Analytics                     create new and access existing
                                      Cloud Analytics Reports

  Sandbox User                        create disposable cloud
                                      environments (sandboxes) governed
                                      by a company Sandbox policy

  superQuery                          access superQuery IDE

  Sandbox Admin                       set company Sandbox policy for
                                      other users

  FlexRI Admin                        purchase and manage flexible
                                      reservations

  Settings Manager                    manage your Cloud Management
                                      Platform account settings

  Contracts Viewer                    provides access to the commercial
                                      contracts

  Perks Viewer                        access and request Perks

  Anomalies Viewer                    access Cost and Usage Anomalies

  Issues Viewer                       access to cloud outage information

  Budgets Manager                     create, delete and manage budgets

  Attributions Manager                create, delete and manage
                                      attributions
  -----------------------------------------------------------------------

Admin

Has access to all features in the Cloud Management Platform and the CMP
API, and can manage every aspect of your organization’s account.

Summary: Pre-built Roles and Permissions

Permissions
Admin
Finance
User
IT
Manager
Power
User
Standard
User
superQuery
User
Anomalies Viewer
✔
✓
✔
✓
Assets Manager
✓
✓
Attributions Manager
✓
✓
✓
Billing Profile Admin
✓
✓
Budgets Manager
✓
✓
✓
Cloud Analytics
✓
✓
✓
✓
Contracts Viewer
✓
✓
✓
✓
Flexible RI Admin
✓
✓
Invoice Viewer
✓
✓
Issues Viewer
✓
✓
✓
✓
✓
✓
Settings Manager
✓
✓
Sandbox Admin
✓
✓
Sandbox User
✓
✓
✓
Spot0
✓
✓
Support Requester
✓
✓
✓
✓
✓
✓
Users Manager
✓
✓
superQuery
✓
✓
✓
✓
Custom Roles

If one of the built-in roles doesn’t work for you, you can create a
custom role with your own set of permissions. To create a custom user
role, select the “Users and Roles” icon in the lefthand navigation bar.



From there, navigate to the “Roles” tab. You will see a list of Preset
Roles, as well as any other Custom Roles created by your team.



Create a new role by clicking on the “+ NEW” button at the top right of
the screen. This opens a new page with a list of permissions available
to group into the new role.

To get started:

1.  Give your new User Role a good name.
2.  Optional: Give the role a description to give additional context
    around who the role is for.
3.  Select the permissions you’d like the role to contain.



Editing a Custom Role



To modify the permissions contained in a custom role, check the box next
to the role you’d like to edit, then click on the “Edit Role” icon at
the top-right of your screen.



From there, make your edits to the permissions the role contains. When
finished, click on the <– back arrow icon at the top-left to return to
the main Roles page.

Deleting a Custom Role

To delete the custom role, you will need to make sure there are no users
configured with this role. You cannot delete a role until this condition
is satisfied.

Select the role you’d like to delete and click the “Remove” button. You
will need to confirm your action and the role will be removed.



Setting a Default Role

A default role is the role a new user on your team is auto-provisioned,
until a role is explicitly set by an admin. Both pre-built and custom
roles can be designated as a default role.

To set a role as the default role for your team, click on a role from
your list and then click the “Make Default” button at the top-right
corner of the page.

Finally, click “Confirm”.


Bulk Invite Users

Whether you’re just creating your team in the CMP or simply want to add
a lot of new teammates at once, bulk inviting users will save you lots
of time here. From within the CMP, you can invite as many users as you
want by uploading a CSV file.

Begin by navigating to the Users and Roles page.



Then, at the top-right corner of the page, click on the vertical
ellipsis (⋮). Next, click on “Upload Users” and upload a CSV file with
your user information.



To ensure your CSV file is structured properly, we recommend downloading
the template below and using it to format your bulk invitations.

 file src=“../.gitbook/assets/new-user-bulk-upload-template.csv”
caption=“User Bulk Invite Template” 
Creating a New User

You can manage the access of other users on behalf of the organization,
as well as create users for new employees who need access to the Cloud
Management Platform.



Inviting new users

Please select the ‘Users and Roles’ icon on the left-hand navigation
panel.



Next, click the “Invite User” button on the right side of the page.



Enter the email(s) of the colleague(s) you’d like to invite to your
team. If you want to continue on to edit their profile settings, check
the “Continue to editing user profile” box.



The recipient(s) you invited will receive an email, which you will be
cc’d on, inviting them to complete the sign up and use the CMP.

Editing User Profiles

There are two ways you can access the page to edit a user’s profile:

-   Check the “Continue to editing user profile” box when initially
    inviting them.
-   Click on their email in your Users list.

When editing a profile, you have four sections:

1.  Profile - Set name, job function, and phone number of the user
2.  Permissions - Assign a role to the user, which contains the set of
    permissions they have.
3.  Notifications - Determine which events you’d like the user to be
    notified on.
4.  API - Generate an API key that lets you programmatically access CMP
    features.



Bulk Editing

To perform bulk updates on users in your organization, check the boxes
next to the users you’d like to update. Next, click on the “Edit”
button.





In the “Bulk Update Users” pop-up, make your bulk changes. This can
include updating multiple users’ job function, role, and/or
notifications.

Once you’ve made your desired changes, click on the “Update” button to
confirm them.

You may also bulk delete users from your organization. Simply click on
the “Delete” button and confirm your decision after.



Notification Types:

-   New Invoices - Get sent an email when a new invoice is uploaded to
    the Cloud Management Platform.
-   Cost Anomalies - Get notified when our system detects abnormal usage
    of your cloud platform (i.e., AWS or Google Cloud)
-   Payment Due/Overdue - Get automated updates when your invoices are
    becoming due and when they’re overdue.
-   Credit Alerts - request to be notified when your credits are nearly
    exhausted (75 utilization), and once again when they’ve been
    exhausted.
-   Cloud Quota Utilization - Get alerted when your Google Cloud and/or
    AWS service quota utilization exceeds 80.
-   Cloud Known Issues - Get notified when there are any known
    infrastructure issues with Google Cloud and/or AWS.
User Permissions Explained

User Permissions designate the type of access given to users that
enables them to access specific resources within the Cloud Management
Platform.

 Raising support or consulting requests doesn’t
require any permission or role. 

Available Permissions:

Anomalies Viewer

-   Access Cost and Usage Anomalies

Assets Manager (previously Licenses Manager)

-   View and Manage assets, including managing licenses
-   Purchase additional licenses and subscriptions for G Suite
-   Purchase additional licenses and subscriptions for Office 365
-   Create new AWS accounts
-   Invite existing AWS accounts
-   Create new Google Cloud billing accounts

Attributions Manager

-   Create, delete and manage attributions

Billing Profile Admin

-   Create, view and manage billing profiles
-   Update Payment Methods, Address, Accounts Payable, Invoice Settings

Budgets Manager

-   Create, delete and manage budgets

Cloud Analytics

-   Create and view Cloud Reports and Attributions

Contracts Viewer

-   Provides access to the commercial contracts

Flexible RI Admin

-   Purchase Flexible Reserved Instances and manage orders

Invoice Viewer

-   View and pay invoices

Issues Viewer

-   Access to cloud outage information

Users Manager

-   Create Users
-   Update Users
-   Remove Users

Settings Manager

-   Manage your Cloud Management Platform account settings
-   Access the Settings page via the left-hand navigation bar
-   Upload Google Cloud service key
-   Add AWS ARN
-   Set up Slack channel integration for alerts on cost anomalies and
    known issues

Perks Viewer

-   Access and request Perks

Sandbox Admin

-   Create and modify Cloud Sandbox policies.

Sandbox Viewer

-   Create Cloud Sandboxes

superQuery

-   Access to superQuery IDE




Manage Organizations

Overview‌ 

Organizations are a feature within the DoiT CMP which allows users to
create isolated segments of their data. Over time this feature will
empower customers to centrally manage their public cloud while
decentralizing the management of each section. These segments are
defined using attributions allowing for very flexible and dynamic
control.‌

Today CMP supports Role based access control (RBAC) functionality that
enables application admins to limit the permissions of some users within
a team. Organizations are a step beyond this allowing customers to
represent their organizational structure, business units, and other
groupings within the CMP.‌

Organizations are used to provide a tightly scoped Cloud Analytics
experience for a sub-set of your users. By creating an organization, you
can help focus its members by automatically scoping all reports to only
the attributions used to create it. For instance, if you have a
department or group that operates independently within your company (an
acquisition, or R&D initiative), you can use organizations to provide a
focused experience within the CMP. By removing the noise of total
company spend, insights and trends can be brought into focus faster and
with less effort.‌

 Required permission to create and manage
Organizations: User Manager 

Terminology 

Organization

An organization is an automatic set of attributions that filter data for
its members. When a user is a member of an organization all reports in
Cloud Analytics are automatically filtered to show only relevant data

Root Organization (The default organization)

Every company has a default organization named after their primary
domain. This organization, by default, sees all data within a company.
It can be restricted by attribution by editing it. When an organization
with members is deleted, its users are placed in the default
organization rather than being given full access to the company. This
allows you the ability to configure a restricted landing zone for users
when deleting existing organizations.

Member

When a user is assigned to an organization, they are said to be a member
of that organization. Once a member, they will see only data included in
the configured attributions while in Cloud Analytics or Dashboards (with
the exception of Global Dashboards)

How to Setup Organizations 

‌Organizations use attributions to control what data is included.‌

Step 1. Configure Attributions.‌ 

Navigate to Cloud Analytics → Attributions

Cloud Analytics - Attributions tab

If you already have an attribution configured, select it and confirm
that it matches the set of data you would like to use as an
organization.‌

​Please click here to learn more about attributions‌

Step 2. Create an Organization‌ 

Navigate to the Users and Roles menu and select the ‘Organizations’ Menu

Identity & Access Tabs

Select ‘New Organization’‌

Step 3. Configure your Organization 

Organization Configuration

Select the attribution or set of attributions that define your
organization.

1.  Select the Attributions you want to use to scope this organization
2.  Select the users that will be members of the organization
    1.  Note: A user can only be a member of a single organization.
3.  Select your options for Dashboard Visibility
4.  Optional Advanced Option
    1.  Disable Custom Dashboards -
        1.  Use this option if you do not want any data exposure via
            dashboard widgets. When checked it will remove the ability
            for users within an organization to customize dashboards and
            add widgets.

 A note about Dashboards and Widgets

The preset dashboards in CMP (Account, AWS FinOps, BigQuery FinOps, and
Pulse) have a global scope. Regardless of organization, they always show
data from across all configured accounts/projects. If you do not want
organization members to see data outside their scope, you can prevent
them from seeing these dashboards‌ 

Widgets function differently‌ 

For each widget there are two concerns‌

1.  Do you have access to the widget?
    1.  Roles in the CMP control what widgets you are able to access.
    2.  For instance: the Support Viewer Role provides access to the
        support tickets graph widget in the Account Dashboard
2.  Is the widget scoped to my organization?
    1.  Currently most widgets have global scope. The only way to limit
        access to them is to “Disable Custom Dashboards” in the advanced
        configuration menu.

‌Current Limitations

1.  Only the Cloud Analytics feature supports Organizations today
    1.  If other roles are granted to users within the organization,
        they will see all company data
    2.  Savings features like FlexSave are reflective of the total
        company spend
    3.  Anomalies run against all company data, not only an organization
2.  Reports shared from outside the organization cannot be seen within
    the organization
3.  Dashboards and Widgets reflect a global scope, they can be made
    visible, but the data represented is not filtered to the
    organization
4.  Budgets are available only to users with Budgets Manager Permissions
